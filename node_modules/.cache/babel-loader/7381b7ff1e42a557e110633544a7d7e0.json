{"ast":null,"code":"import _defineProperty from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{makeStyles}from\"@material-ui/core/styles\";import MaterialTable from\"material-table\";import{Text}from\"@chakra-ui/react\";import clsx from\"clsx\";import{useHistory}from\"react-router-dom\";import{Button,Paper,Grid,Icon,Divider,TextField}from\"@material-ui/core\";import{Box,Modal,ModalOverlay,ModalContent,ModalHeader,ModalFooter,ModalBody,ModalCloseButton,Select,useDisclosure}from\"@chakra-ui/react\";import{Input,InputGroup,InputLeftAddon,NumberInput,NumberInputField,NumberInputStepper,NumberIncrementStepper,NumberDecrementStepper,Stack}from\"@chakra-ui/react\";import{useRecoilState}from\"recoil\";import{useEmployeesContext}from\"../context/employees_context\";import{usePayslipsContext}from\"../context/payslips_context\";import{useExpensesContext}from\"../context/expenses_context\";import{useDailyAllowancesContext}from\"../context/dailyallowances_context\";import{payrunState,payrunIdState}from\"./data/atomdata\";import{usePayrun}from\"./payrun/usePayrun\";import{useCurrency}from\"./currency/useCurrency\";import{useExpenses}from\"./expenses/useExpenses\";import UpdateCurrency from\"./CurrencyTable\";import{usePayslipsBatch}from\"./payslips/usePayslipsBatch\";//const drawerWidth = 240;\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var columns=[{title:\"Name\",field:\"name\",editable:\"never\",cellStyle:{width:280,maxWidth:280}}];var selectmonths=[{mth:\"January\"},{mth:\"February\"},{mth:\"March\"},{mth:\"April\"},{mth:\"May\"},{mth:\"June\"},{mth:\"July\"},{mth:\"August\"},{mth:\"September\"},{mth:\"October\"},{mth:\"November\"},{mth:\"December\"}];var Payrun=function Payrun(){var history=useHistory();var date=new Date();var longMonth=date.toLocaleString(\"en-us\",{month:\"long\"});var classes=useStyles();var fixedHeightPaper=clsx(classes.paper,classes.fixedHeight);//const { payrun } = usePayrun();\nvar _usePayslipsBatch=usePayslipsBatch(),payslipsbatch=_usePayslipsBatch.payslipsbatch,psbpayrunId=_usePayslipsBatch.psbpayrunId,setPSBPayrunId=_usePayslipsBatch.setPSBPayrunId;var _useCurrency=useCurrency(),currency=_useCurrency.currency;//const { expenses, setPayrunId } = useExpensesPayrun();\nvar _useDisclosure=useDisclosure(),isOpen=_useDisclosure.isOpen,onOpen=_useDisclosure.onOpen,onClose=_useDisclosure.onClose;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loadPaybatch=_useState2[0],setLoadPaybatch=_useState2[1];var _useEmployeesContext=useEmployeesContext(),loadEmployees=_useEmployeesContext.loadEmployees,employees=_useEmployeesContext.employees;var _useExpensesContext=useExpensesContext(),loadUnpaidExpenses=_useExpensesContext.loadUnpaidExpenses,expenses=_useExpensesContext.expenses,unpaidexpenses=_useExpensesContext.unpaidexpenses,updateExpense=_useExpensesContext.updateExpense;var _useDailyAllowancesCo=useDailyAllowancesContext(),unpaiddailyallows=_useDailyAllowancesCo.unpaiddailyallows,loadUnpaidDailyAllows=_useDailyAllowancesCo.loadUnpaidDailyAllows,updateDailyAllowance=_useDailyAllowancesCo.updateDailyAllowance;var _usePayslipsContext=usePayslipsContext(),addPayrun=_usePayslipsContext.addPayrun,getPayrun=_usePayslipsContext.getPayrun,payrun=_usePayslipsContext.payrun,payrun_loading=_usePayslipsContext.payrun_loading,addPayslip=_usePayslipsContext.addPayslip,resetPayslipsData=_usePayslipsContext.resetPayslipsData,singlebatch_payslip_loading=_usePayslipsContext.singlebatch_payslip_loading,setPayslipPeriod=_usePayslipsContext.setPayslipPeriod;var _useRecoilState=useRecoilState(payrunState),_useRecoilState2=_slicedToArray(_useRecoilState,2),input=_useRecoilState2[0],setInput=_useRecoilState2[1];var _useRecoilState3=useRecoilState(payrunIdState),_useRecoilState4=_slicedToArray(_useRecoilState3,2),payrunId=_useRecoilState4[0],setPayrunId=_useRecoilState4[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),alert=_useState4[0],setAlert=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),errornoselect=_useState8[0],setErrornoselect=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),isPayrunExist=_useState10[0],setIsPayrunExist=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),isSubmit=_useState12[0],setIsSubmit=_useState12[1];useEffect(function(){if(!payrun_loading){setLoadPaybatch(false);}},[loadPaybatch]);function formatDate(string){var options={year:\"numeric\",month:\"long\",day:\"numeric\"};return new Date(string).toLocaleDateString(\"en-GB\",options);}function formatPayrun(){var yy=input.fromdate.substring(0,4)+\"-\"+input.fromdate.substring(5,7);var mm=input.fromdate.substring(5,7);var d=input.fromdate;}var payrunExists=function payrunExists(data){return payrun.some(function(el){return el.payrun===data;});};var handleChange=function handleChange(e){setInput(_objectSpread(_objectSpread({},input),{},_defineProperty({},e.target.name,e.target.value)));};var handlePayrunSubmit=function handlePayrunSubmit(e){e.preventDefault();setPayrunId(\"\");var count=employees.reduce(function(acc,r){if(r.tableData.checked){return acc+1;}else{return acc;}},0);//console.log(\"count\", count);\nif(count===0){setErrornoselect(true);setTimeout(function(){setErrornoselect(false);},3000);return null;}var period=formatDate(input.fromdate)+\" - \"+formatDate(input.todate);var payrundata=input.fromdate.substring(0,4)+\"-\"+input.fromdate.substring(5,7);setInput(_objectSpread(_objectSpread({},input),{},{period:period,payrun:payrundata,status:\"New\"}));formatPayrun();setPayslipPeriod(payrundata);var isExist=payrunExists(payrundata);if(isExist){//console.log(\"exist\");\nsetIsPayrunExist(true);setIsSubmit(false);setAlert(true);}else{//console.log(\"add\");\ncheckSelectedEmployees(period,payrundata);add_Payrun(period,payrundata);setIsPayrunExist(false);setAlert(true);setIsSubmit(true);setLoadPaybatch(true);}};var checkSelectedEmployees=function checkSelectedEmployees(period,payrun){//console.log(\"payrun\", payrun, period);\nvar exp=0,allows=0,tmpbasicsalary=0,tmptotalallows=0,tmptotalTAP=0,tmptotalSCP=0,tmpsiteallows=0,tmpexpsclaims=0,tmpnettpay=0,tmpcurrrate=0,tmpbasicsalarybnd=0,tmptotalallowsbnd=0,tmptotalTAPbnd=0,tmptotalSCPbnd=0,tmpsiteallowsbnd=0,tmpexpsclaimsbnd=0,tmpnettpaybnd=0;resetPayslipsData();employees&&employees.forEach(function(emp,index){exp=0;allows=0;tmpbasicsalary=0;tmptotalallows=0;tmptotalTAP=0;tmptotalSCP=0;tmpnettpay=0;tmpcurrrate=0;tmpbasicsalarybnd=0;tmptotalallowsbnd=0;tmptotalTAPbnd=0;tmpsiteallowsbnd=0;tmpexpsclaimsbnd=0;tmptotalSCPbnd=0;tmpnettpaybnd=0;if(emp.tableData.checked){exp=0;if(unpaidexpenses){unpaidexpenses.filter(function(r){return r.empid===emp.id;}).map(function(i){updateExpense({id:i.id,payrun:payrun});return exp=exp+i.amount;});}allows=0;if(unpaiddailyallows){unpaiddailyallows.filter(function(r){return r.empid===emp.id;}).map(function(i){updateDailyAllowance({id:i.id,payrun:payrun});return allows=allows+i.amount;});}var id=emp.id,name=emp.name,bank_name=emp.bank_name,bank_acno=emp.bank_acno,basic_salary=emp.basic_salary,salary_currency=emp.salary_currency,tap_acno=emp.tap_acno,scp_acno=emp.scp_acno,tap_checkbox=emp.tap_checkbox;tmpbasicsalary=basic_salary;if(salary_currency&&salary_currency!==\"BND\"){var table=currency.filter(function(r){return r.currency===salary_currency;}).map(function(rec){return _objectSpread({},rec);});tmpcurrrate=table[0].rate;}else{tmpcurrrate=1;}//console.log(\"USD\", table, basic_salary, tmpbasicsalary);\n//tmptotalallows = allows + exp;\ntmptotalTAP=tap_checkbox?Math.ceil(tmpbasicsalary*0.05):0;tmptotalSCP=tap_checkbox?Math.round((tmpbasicsalary+Number.EPSILON)*0.035*100)/100:0;if(tmptotalSCP>98){tmptotalSCP=98;}tmpnettpay=tmpbasicsalary+allows+exp+tmptotalallows-tmptotalTAP-tmptotalSCP;tmpbasicsalarybnd=Math.round((basic_salary+Number.EPSILON)*tmpcurrrate*100)/100;tmptotalTAPbnd=Math.round((tmptotalTAP+Number.EPSILON)*tmpcurrrate*100)/100;tmptotalSCPbnd=Math.round((tmptotalSCP+Number.EPSILON)*tmpcurrrate*100)/100;tmpnettpaybnd=Math.round((tmpnettpay+Number.EPSILON)*tmpcurrrate*100)/100;tmpsiteallowsbnd=Math.round((allows+Number.EPSILON)*tmpcurrrate*100)/100;tmpexpsclaimsbnd=Math.round((exp+Number.EPSILON)*tmpcurrrate*100)/100;tmpnettpaybnd=tmpbasicsalarybnd+tmpsiteallowsbnd+tmpexpsclaimsbnd-tmptotalTAPbnd-tmptotalSCPbnd;var data={name:name,period:period,pay_date:input.pay_date,payrun:payrun,bank_name:bank_name,bank_acno:bank_acno,salary_currency:salary_currency?salary_currency:\"BND\",currency_rate:tmpcurrrate,tap_acno:tap_acno,scp_acno:scp_acno,tap_checkbox:tap_checkbox,empid:id,status:\"Pending\",allows_type1:\"Site Allowances\",allows_type1amt:allows,allows_type2:\"Expenses Claims\",allows_type2amt:exp,allows_type3:\" \",allows_type3amt:0,allows_type4:\" \",allows_type4amt:0,allows_type5:\" \",allows_type5amt:0,allows_type6:\" \",allows_type6amt:0,allows_type7:\" \",allows_type7amt:0,allows_type8:\" \",allows_type8amt:0,deducts_type1:\" \",deducts_type1amt:0,deducts_type2:\" \",deducts_type2amt:0,deducts_type3:\" \",deducts_type3amt:0,deducts_type4:\" \",deducts_type4amt:0,deducts_type5:\" \",deducts_type5amt:0,deducts_type6:\" \",deducts_type6amt:0,deducts_type7:\" \",deducts_type7amt:0,deducts_type8:\" \",deducts_type8amt:0,wages:tmpbasicsalary,tap_amount:tmptotalTAP,scp_amount:tmptotalSCP,total_allowances:tmptotalallows,total_deductions:0,site_allows:allows,expenses_claims:exp,nett_pay:tmpnettpay,wages_bnd:tmpbasicsalarybnd,site_allows_bnd:tmpsiteallowsbnd,expenses_claims_bnd:tmpexpsclaimsbnd,total_allowances_bnd:tmptotalallowsbnd,total_deductions_bnd:0,tap_amount_bnd:tmptotalTAPbnd,scp_amount_bnd:tmptotalSCPbnd,nett_pay_bnd:tmpnettpaybnd};addPayslip(_objectSpread({},data));}});};var handleNext=function handleNext(){history.push(\"/payrunbatch\");};var add_Payrun=function add_Payrun(period,payrun){//update payrun\naddPayrun({pay_freq:input.payfreq,from_date:input.fromdate,to_date:input.todate,pay_date:input.paydate,period:period,payrun:payrun,status:\"Pending\"});getPayrun();};useEffect(function(){loadEmployees();loadUnpaidExpenses();loadUnpaidDailyAllows();getPayrun();},[]);// useEffect(() => {\n//   loadUnpaidDailyAllows();\n// }, []);\n// useEffect(() => {\n//   console.log(\"useEffect here\", input.payrun);\n//   // getSingleBatchPayslip(input.payrun);\n//   if (singlebatchpayslip) {\n//     checkSelectedEmployees(input.period, input.payrun);\n//     setLoadPaybatch(false);\n//   }\n// }, [loadPaybatch]);\n//   useEffect(() => {\n//     if (input.period && input.payrun) {\n//       //add_Payrun();\n//       setAlert(true);\n//     }\n//   }, [input]);\nreturn/*#__PURE__*/_jsx(Paper,{className:fixedHeightPaper,style:{backgroundColor:\"659dbd\"},children:/*#__PURE__*/_jsxs(\"section\",{className:classes.section,children:[/*#__PURE__*/_jsxs(Grid,{direction:\"row\",container:true,spacing:1// style={{ border: \"1px solid white\" }}\n,children:[/*#__PURE__*/_jsx(Grid,{container:true,item:true,sm:3,style:{border:\"1px solid black\"},direction:\"column\",align:\"left\",children:/*#__PURE__*/_jsxs(\"article\",{className:classes.jobinfo,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Pay Run\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handlePayrunSubmit,children:[/*#__PURE__*/_jsx(\"div\",{}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(TextField,{label:\"Pay Frequency\",variant:\"filled\",required:true,defaultValue:\"Monthly\",style:{width:\"100%\"},name:\"payfreq\",value:input.payfreq,onChange:function onChange(e){return handleChange(e);},Select:true,children:/*#__PURE__*/_jsx(\"option\",{value:\"Monthly\",children:\"Monthly\"})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(TextField,{label:\"From Date\",variant:\"filled\",name:\"fromdate\",type:\"date\",value:input.fromdate,required:true,style:{width:\"100%\"},onChange:function onChange(e){return handleChange(e);},InputLabelProps:{shrink:true}})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(TextField,{label:\"To Date\",variant:\"filled\",type:\"date\",name:\"todate\",value:input.todate,required:true,onChange:function onChange(e){return handleChange(e);},style:{width:\"100%\"},InputLabelProps:{shrink:true}})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(TextField,{label:\"Payment Date\",variant:\"filled\",type:\"date\",name:\"paydate\",value:input.paydate,required:true,style:{width:\"100%\"},onChange:function onChange(e){return handleChange(e);},InputLabelProps:{shrink:true}})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",className:classes.button,onClick:onOpen,disabled:isSubmit,children:\"Currency Exchange Table\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:classes.button,children:[\"Submit \",/*#__PURE__*/_jsx(Icon,{className:classes.rightIcon,children:\"send\"})]}),alert&&!isPayrunExist&&/*#__PURE__*/_jsxs(Button,{type:\"submit\",variant:\"contained\",color:\"primary\",className:classes.button,onClick:handleNext,children:[\"Next \",/*#__PURE__*/_jsx(Icon,{className:classes.rightIcon,children:\"send\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[alert&&!isPayrunExist&&!singlebatch_payslip_loading&&/*#__PURE__*/_jsx(\"h3\",{children:\"New Payrun being added!\"}),alert&&isPayrunExist&&/*#__PURE__*/_jsx(\"h3\",{children:\"This payrun already existed!\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[error&&/*#__PURE__*/_jsx(\"h3\",{children:\"This Payrun period already existed!\"}),errornoselect&&/*#__PURE__*/_jsx(\"h3\",{children:\"You must select employees!\"})]})]})]})}),/*#__PURE__*/_jsx(Divider,{orientation:\"vertical\",flexItem:true,style:{background:\"white\"}}),/*#__PURE__*/_jsx(Grid,{container:true,item:true,sm:3,style:{border:\"1px solid black\"},align:\"right\",children:/*#__PURE__*/_jsx(MaterialTable,{columns:columns,data:employees,title:\"Employee Listing\",options:{filtering:false,search:false,toolbar:true,selection:true,pageSize:10,headerStyle:{backgroundColor:\"#daad86\",color:\"primary\"},showTitle:true// selectionProps: rowData => {\n//   rowData.tableData.checked = true\n// }\n}})})]}),/*#__PURE__*/_jsxs(Modal,{isOpen:isOpen,onClose:onClose,children:[/*#__PURE__*/_jsx(ModalOverlay,{}),/*#__PURE__*/_jsxs(ModalContent,{children:[/*#__PURE__*/_jsx(ModalHeader,{children:\"Currency Table\"}),/*#__PURE__*/_jsx(ModalCloseButton,{}),/*#__PURE__*/_jsx(ModalBody,{children:/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(UpdateCurrency,{})})}),/*#__PURE__*/_jsx(ModalFooter,{children:/*#__PURE__*/_jsx(Button,{colorScheme:\"blue\",mr:3,onClick:onClose,children:\"Close\"})})]})]})]})});};var useStyles=makeStyles(function(theme){return{root:{flexGrow:1},button:{margin:theme.spacing(1)},container:{margin:0,padding:0,width:\"80vw\",display:\"grid\",gridTemplateColumns:\"repeat(auto-fill,250px)\",gridAutoRows:\"10px\",position:\"absolute\",left:\"50%\",transform:\"translateX(-50%)\",justifyContent:\"center\",backgroundColor:\"primary\"},fixedHeight:{height:800},paper:{padding:theme.spacing(10),// display: \"flex\",\ndisplay:\"flex\",overflow:\"auto\",flexDirection:\"column\",border:\"1px solid\",width:\"100%\",color:\"primary\",bcakgroundColor:\"black\"},card:{backgroundColor:\"black\"},section:{width:\"95vw\",margin:\"5rem auto\",maxWidth:\"var(--max-width)\"},underline:{width:\"5rem\",height:\"0.25rem\",marginBottom:\"1.25rem\",background:\"var(--clr-primary-5)\",marginLeft:\"auto\",marginRight:\"auto\"},title:{marginbottom:\"4rem\",textAlign:\"center\"},jobscenter:{width:\"80vw\",margin:\"0 auto\",maxWidth:\"var(--max-width)\",flexDirection:\"row\"},btncontainer:{display:\"flex\",flexDirection:\"row\",justifyContent:\"center\",marginBottom:\"4rem\",flexWrap:\"wrap\"},jobbtn:{background:\"transparent\",borderColor:\"transparent\",textTransform:\"capitalize\",fontSize:\"1.25rem\",letterSpacing:\"var(--spacing)\",margin:\"0 0.5rem\",transition:\"var(--transition)\",cursor:\"pointer\",padding:\"0.25rem 0\",lineHeight:\"1\",outlineColor:\"var(--clr-primary-10)\",\"&:hover\":{color:\"var(--clr-primary-5)\",boxShadow:\"0 2px var(--clr-primary-5)\"}},activebtn:{color:\"var(--clr-primary-5)\",boxShadow:\"0 2px var(--clr-primary-5)\"},jobinfo:{fontWeight:\"400\"},rightIcon:{marginLeft:theme.spacing(1)},formLabel:{fontSize:12,textAlign:\"left\",marginLeft:8,marginTop:5}};});export default Payrun;","map":{"version":3,"sources":["D:/react-myprojects/hrms-airtable/src/components/Payrun.js"],"names":["React","useState","useEffect","makeStyles","MaterialTable","Text","clsx","useHistory","Button","Paper","Grid","Icon","Divider","TextField","Box","Modal","ModalOverlay","ModalContent","ModalHeader","ModalFooter","ModalBody","ModalCloseButton","Select","useDisclosure","Input","InputGroup","InputLeftAddon","NumberInput","NumberInputField","NumberInputStepper","NumberIncrementStepper","NumberDecrementStepper","Stack","useRecoilState","useEmployeesContext","usePayslipsContext","useExpensesContext","useDailyAllowancesContext","payrunState","payrunIdState","usePayrun","useCurrency","useExpenses","UpdateCurrency","usePayslipsBatch","columns","title","field","editable","cellStyle","width","maxWidth","selectmonths","mth","Payrun","history","date","Date","longMonth","toLocaleString","month","classes","useStyles","fixedHeightPaper","paper","fixedHeight","payslipsbatch","psbpayrunId","setPSBPayrunId","currency","isOpen","onOpen","onClose","loadPaybatch","setLoadPaybatch","loadEmployees","employees","loadUnpaidExpenses","expenses","unpaidexpenses","updateExpense","unpaiddailyallows","loadUnpaidDailyAllows","updateDailyAllowance","addPayrun","getPayrun","payrun","payrun_loading","addPayslip","resetPayslipsData","singlebatch_payslip_loading","setPayslipPeriod","input","setInput","payrunId","setPayrunId","alert","setAlert","error","setError","errornoselect","setErrornoselect","isPayrunExist","setIsPayrunExist","isSubmit","setIsSubmit","formatDate","string","options","year","day","toLocaleDateString","formatPayrun","yy","fromdate","substring","mm","d","payrunExists","data","some","el","handleChange","e","target","name","value","handlePayrunSubmit","preventDefault","count","reduce","acc","r","tableData","checked","setTimeout","period","todate","payrundata","status","isExist","checkSelectedEmployees","add_Payrun","exp","allows","tmpbasicsalary","tmptotalallows","tmptotalTAP","tmptotalSCP","tmpsiteallows","tmpexpsclaims","tmpnettpay","tmpcurrrate","tmpbasicsalarybnd","tmptotalallowsbnd","tmptotalTAPbnd","tmptotalSCPbnd","tmpsiteallowsbnd","tmpexpsclaimsbnd","tmpnettpaybnd","forEach","emp","index","filter","empid","id","map","i","amount","bank_name","bank_acno","basic_salary","salary_currency","tap_acno","scp_acno","tap_checkbox","table","rec","rate","Math","ceil","round","Number","EPSILON","pay_date","currency_rate","allows_type1","allows_type1amt","allows_type2","allows_type2amt","allows_type3","allows_type3amt","allows_type4","allows_type4amt","allows_type5","allows_type5amt","allows_type6","allows_type6amt","allows_type7","allows_type7amt","allows_type8","allows_type8amt","deducts_type1","deducts_type1amt","deducts_type2","deducts_type2amt","deducts_type3","deducts_type3amt","deducts_type4","deducts_type4amt","deducts_type5","deducts_type5amt","deducts_type6","deducts_type6amt","deducts_type7","deducts_type7amt","deducts_type8","deducts_type8amt","wages","tap_amount","scp_amount","total_allowances","total_deductions","site_allows","expenses_claims","nett_pay","wages_bnd","site_allows_bnd","expenses_claims_bnd","total_allowances_bnd","total_deductions_bnd","tap_amount_bnd","scp_amount_bnd","nett_pay_bnd","handleNext","push","pay_freq","payfreq","from_date","to_date","paydate","backgroundColor","section","border","jobinfo","shrink","button","rightIcon","background","filtering","search","toolbar","selection","pageSize","headerStyle","color","showTitle","theme","root","flexGrow","margin","spacing","container","padding","display","gridTemplateColumns","gridAutoRows","position","left","transform","justifyContent","height","overflow","flexDirection","bcakgroundColor","card","underline","marginBottom","marginLeft","marginRight","marginbottom","textAlign","jobscenter","btncontainer","flexWrap","jobbtn","borderColor","textTransform","fontSize","letterSpacing","transition","cursor","lineHeight","outlineColor","boxShadow","activebtn","fontWeight","formLabel","marginTop"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport MaterialTable from \"material-table\";\r\nimport { Text } from \"@chakra-ui/react\";\r\nimport clsx from \"clsx\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport {\r\n  Button,\r\n  Paper,\r\n  Grid,\r\n  Icon,\r\n  Divider,\r\n  TextField,\r\n} from \"@material-ui/core\";\r\nimport {\r\n  Box,\r\n  Modal,\r\n  ModalOverlay,\r\n  ModalContent,\r\n  ModalHeader,\r\n  ModalFooter,\r\n  ModalBody,\r\n  ModalCloseButton,\r\n  Select,\r\n  useDisclosure,\r\n} from \"@chakra-ui/react\";\r\nimport {\r\n  Input,\r\n  InputGroup,\r\n  InputLeftAddon,\r\n  NumberInput,\r\n  NumberInputField,\r\n  NumberInputStepper,\r\n  NumberIncrementStepper,\r\n  NumberDecrementStepper,\r\n  Stack,\r\n} from \"@chakra-ui/react\";\r\nimport { useRecoilState } from \"recoil\";\r\nimport { useEmployeesContext } from \"../context/employees_context\";\r\nimport { usePayslipsContext } from \"../context/payslips_context\";\r\nimport { useExpensesContext } from \"../context/expenses_context\";\r\nimport { useDailyAllowancesContext } from \"../context/dailyallowances_context\";\r\nimport { payrunState, payrunIdState } from \"./data/atomdata\";\r\nimport { usePayrun } from \"./payrun/usePayrun\";\r\nimport { useCurrency } from \"./currency/useCurrency\";\r\nimport { useExpenses } from \"./expenses/useExpenses\";\r\nimport UpdateCurrency from \"./CurrencyTable\";\r\nimport { usePayslipsBatch } from \"./payslips/usePayslipsBatch\";\r\n\r\n//const drawerWidth = 240;\r\n\r\nconst columns = [\r\n  {\r\n    title: \"Name\",\r\n    field: \"name\",\r\n    editable: \"never\",\r\n    cellStyle: {\r\n      width: 280,\r\n      maxWidth: 280,\r\n    },\r\n  },\r\n];\r\n\r\nconst selectmonths = [\r\n  { mth: \"January\" },\r\n  { mth: \"February\" },\r\n  { mth: \"March\" },\r\n  { mth: \"April\" },\r\n  { mth: \"May\" },\r\n  { mth: \"June\" },\r\n  { mth: \"July\" },\r\n  { mth: \"August\" },\r\n  { mth: \"September\" },\r\n  { mth: \"October\" },\r\n  { mth: \"November\" },\r\n  { mth: \"December\" },\r\n];\r\n\r\nconst Payrun = () => {\r\n  let history = useHistory();\r\n  let date = new Date();\r\n  let longMonth = date.toLocaleString(\"en-us\", { month: \"long\" });\r\n\r\n  const classes = useStyles();\r\n  const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight);\r\n  //const { payrun } = usePayrun();\r\n  const { payslipsbatch, psbpayrunId, setPSBPayrunId } = usePayslipsBatch();\r\n  const { currency } = useCurrency();\r\n  //const { expenses, setPayrunId } = useExpensesPayrun();\r\n  const { isOpen, onOpen, onClose } = useDisclosure();\r\n  const [loadPaybatch, setLoadPaybatch] = useState(false);\r\n  const { loadEmployees, employees } = useEmployeesContext();\r\n  const { loadUnpaidExpenses, expenses, unpaidexpenses, updateExpense } =\r\n    useExpensesContext();\r\n  const { unpaiddailyallows, loadUnpaidDailyAllows, updateDailyAllowance } =\r\n    useDailyAllowancesContext();\r\n  const {\r\n    addPayrun,\r\n    getPayrun,\r\n    payrun,\r\n    payrun_loading,\r\n    addPayslip,\r\n    resetPayslipsData,\r\n    singlebatch_payslip_loading,\r\n    setPayslipPeriod,\r\n  } = usePayslipsContext();\r\n  const [input, setInput] = useRecoilState(payrunState);\r\n  const [payrunId, setPayrunId] = useRecoilState(payrunIdState);\r\n  const [alert, setAlert] = useState(false);\r\n  const [error, setError] = useState(false);\r\n  const [errornoselect, setErrornoselect] = useState(false);\r\n  const [isPayrunExist, setIsPayrunExist] = useState(false);\r\n  const [isSubmit, setIsSubmit] = useState(false);\r\n  \r\n  useEffect(() => {\r\n    if (!payrun_loading) {\r\n      setLoadPaybatch(false);\r\n    }\r\n  }, [loadPaybatch]);\r\n\r\n  function formatDate(string) {\r\n    var options = { year: \"numeric\", month: \"long\", day: \"numeric\" };\r\n    return new Date(string).toLocaleDateString(\"en-GB\", options);\r\n  }\r\n\r\n  function formatPayrun() {\r\n    const yy =\r\n      input.fromdate.substring(0, 4) + \"-\" + input.fromdate.substring(5, 7);\r\n    const mm = input.fromdate.substring(5, 7);\r\n    const d = input.fromdate;\r\n  }\r\n\r\n  const payrunExists = (data) => {\r\n    return payrun.some(function (el) {\r\n      return el.payrun === data;\r\n    });\r\n  };\r\n  const handleChange = (e) => {\r\n    setInput({ ...input, [e.target.name]: e.target.value });\r\n  };\r\n\r\n  const handlePayrunSubmit = (e) => {\r\n    e.preventDefault();\r\n    setPayrunId(\"\");\r\n    var count = employees.reduce((acc, r) => {\r\n      if (r.tableData.checked) {\r\n        return acc + 1;\r\n      } else {\r\n        return acc;\r\n      }\r\n    }, 0);\r\n    //console.log(\"count\", count);\r\n    if (count === 0) {\r\n      setErrornoselect(true);\r\n      setTimeout(() => {\r\n        setErrornoselect(false);\r\n      }, 3000);\r\n      return null;\r\n    }\r\n\r\n    const period =\r\n      formatDate(input.fromdate) + \" - \" + formatDate(input.todate);\r\n    const payrundata =\r\n      input.fromdate.substring(0, 4) + \"-\" + input.fromdate.substring(5, 7);\r\n    setInput({\r\n      ...input,\r\n      period: period,\r\n      payrun: payrundata,\r\n      status: \"New\",\r\n    });\r\n    formatPayrun();\r\n    setPayslipPeriod(payrundata);\r\n    const isExist = payrunExists(payrundata);\r\n\r\n    if (isExist) {\r\n      //console.log(\"exist\");\r\n      setIsPayrunExist(true);\r\n      setIsSubmit(false);\r\n      setAlert(true);\r\n    } else {\r\n      //console.log(\"add\");\r\n      checkSelectedEmployees(period, payrundata);\r\n      add_Payrun(period, payrundata);\r\n      setIsPayrunExist(false);\r\n      setAlert(true);\r\n      setIsSubmit(true);\r\n      setLoadPaybatch(true);\r\n    }\r\n  };\r\n\r\n  const checkSelectedEmployees = (period, payrun) => {\r\n    //console.log(\"payrun\", payrun, period);\r\n    var exp = 0,\r\n      allows = 0,\r\n      tmpbasicsalary = 0,\r\n      tmptotalallows = 0,\r\n      tmptotalTAP = 0,\r\n      tmptotalSCP = 0,\r\n      tmpsiteallows = 0,\r\n      tmpexpsclaims = 0,\r\n      tmpnettpay = 0,\r\n      tmpcurrrate = 0,\r\n      tmpbasicsalarybnd = 0,\r\n      tmptotalallowsbnd = 0,\r\n      tmptotalTAPbnd = 0,\r\n      tmptotalSCPbnd = 0,\r\n      tmpsiteallowsbnd = 0,\r\n      tmpexpsclaimsbnd = 0,\r\n      tmpnettpaybnd = 0;\r\n\r\n    resetPayslipsData();\r\n    employees &&\r\n      employees.forEach((emp, index) => {\r\n        exp = 0;\r\n        allows = 0;\r\n        tmpbasicsalary = 0;\r\n        tmptotalallows = 0;\r\n        tmptotalTAP = 0;\r\n        tmptotalSCP = 0;\r\n        tmpnettpay = 0;\r\n        tmpcurrrate = 0;\r\n        tmpbasicsalarybnd = 0;\r\n        tmptotalallowsbnd = 0;\r\n        tmptotalTAPbnd = 0;\r\n        tmpsiteallowsbnd = 0;\r\n        tmpexpsclaimsbnd = 0;\r\n        tmptotalSCPbnd = 0;\r\n        tmpnettpaybnd = 0;\r\n\r\n        if (emp.tableData.checked) {\r\n          exp = 0;\r\n          if (unpaidexpenses) {\r\n            unpaidexpenses\r\n              .filter((r) => r.empid === emp.id)\r\n              .map((i) => {\r\n                updateExpense({ id: i.id, payrun: payrun });\r\n                return (exp = exp + i.amount);\r\n              });\r\n          }\r\n          allows = 0;\r\n          if (unpaiddailyallows) {\r\n            unpaiddailyallows\r\n              .filter((r) => r.empid === emp.id)\r\n              .map((i) => {\r\n                updateDailyAllowance({ id: i.id, payrun: payrun });\r\n                return (allows = allows + i.amount);\r\n              });\r\n          }\r\n\r\n          const {\r\n            id,\r\n            name,\r\n            bank_name,\r\n            bank_acno,\r\n            basic_salary,\r\n            salary_currency,\r\n            tap_acno,\r\n            scp_acno,\r\n            tap_checkbox,\r\n          } = emp;\r\n\r\n          tmpbasicsalary = basic_salary;\r\n\r\n          if (salary_currency && salary_currency !== \"BND\") {\r\n            const table = currency\r\n              .filter((r) => r.currency === salary_currency)\r\n              .map((rec) => {\r\n                return { ...rec };\r\n              });\r\n            tmpcurrrate = table[0].rate;\r\n          } else {\r\n            tmpcurrrate = 1;\r\n          }\r\n\r\n          //console.log(\"USD\", table, basic_salary, tmpbasicsalary);\r\n          //tmptotalallows = allows + exp;\r\n          tmptotalTAP = tap_checkbox ? Math.ceil(tmpbasicsalary * 0.05) : 0;\r\n          tmptotalSCP = tap_checkbox\r\n            ? Math.round((tmpbasicsalary + Number.EPSILON) * 0.035 * 100) / 100\r\n            : 0;\r\n          if (tmptotalSCP > 98) {\r\n            tmptotalSCP = 98;\r\n          }\r\n          tmpnettpay =\r\n            tmpbasicsalary +\r\n            allows +\r\n            exp +\r\n            tmptotalallows -\r\n            tmptotalTAP -\r\n            tmptotalSCP;\r\n\r\n          tmpbasicsalarybnd =\r\n            Math.round((basic_salary + Number.EPSILON) * tmpcurrrate * 100) /\r\n            100;\r\n\r\n          tmptotalTAPbnd =\r\n            Math.round((tmptotalTAP + Number.EPSILON) * tmpcurrrate * 100) /\r\n            100;\r\n          tmptotalSCPbnd =\r\n            Math.round((tmptotalSCP + Number.EPSILON) * tmpcurrrate * 100) /\r\n            100;\r\n          tmpnettpaybnd =\r\n            Math.round((tmpnettpay + Number.EPSILON) * tmpcurrrate * 100) / 100;\r\n          tmpsiteallowsbnd =\r\n            Math.round((allows + Number.EPSILON) * tmpcurrrate * 100) / 100;\r\n          tmpexpsclaimsbnd =\r\n            Math.round((exp + Number.EPSILON) * tmpcurrrate * 100) / 100;\r\n\r\n          tmpnettpaybnd =\r\n            tmpbasicsalarybnd +\r\n            tmpsiteallowsbnd +\r\n            tmpexpsclaimsbnd -\r\n            tmptotalTAPbnd -\r\n            tmptotalSCPbnd;\r\n\r\n          const data = {\r\n            name: name,\r\n            period: period,\r\n            pay_date: input.pay_date,\r\n            payrun: payrun,\r\n            bank_name: bank_name,\r\n            bank_acno: bank_acno,\r\n            salary_currency: salary_currency ? salary_currency : \"BND\",\r\n            currency_rate: tmpcurrrate,\r\n            tap_acno: tap_acno,\r\n            scp_acno: scp_acno,\r\n            tap_checkbox: tap_checkbox,\r\n            empid: id,\r\n            status: \"Pending\",\r\n            allows_type1: \"Site Allowances\",\r\n            allows_type1amt: allows,\r\n            allows_type2: \"Expenses Claims\",\r\n            allows_type2amt: exp,\r\n            allows_type3: \" \",\r\n            allows_type3amt: 0,\r\n            allows_type4: \" \",\r\n            allows_type4amt: 0,\r\n            allows_type5: \" \",\r\n            allows_type5amt: 0,\r\n            allows_type6: \" \",\r\n            allows_type6amt: 0,\r\n            allows_type7: \" \",\r\n            allows_type7amt: 0,\r\n            allows_type8: \" \",\r\n            allows_type8amt: 0,\r\n            deducts_type1: \" \",\r\n            deducts_type1amt: 0,\r\n            deducts_type2: \" \",\r\n            deducts_type2amt: 0,\r\n            deducts_type3: \" \",\r\n            deducts_type3amt: 0,\r\n            deducts_type4: \" \",\r\n            deducts_type4amt: 0,\r\n            deducts_type5: \" \",\r\n            deducts_type5amt: 0,\r\n            deducts_type6: \" \",\r\n            deducts_type6amt: 0,\r\n            deducts_type7: \" \",\r\n            deducts_type7amt: 0,\r\n            deducts_type8: \" \",\r\n            deducts_type8amt: 0,\r\n\r\n            wages: tmpbasicsalary,\r\n            tap_amount: tmptotalTAP,\r\n            scp_amount: tmptotalSCP,\r\n            total_allowances: tmptotalallows,\r\n            total_deductions: 0,\r\n            site_allows: allows,\r\n            expenses_claims: exp,\r\n            nett_pay: tmpnettpay,\r\n\r\n            wages_bnd: tmpbasicsalarybnd,\r\n            site_allows_bnd: tmpsiteallowsbnd,\r\n            expenses_claims_bnd: tmpexpsclaimsbnd,\r\n            total_allowances_bnd: tmptotalallowsbnd,\r\n            total_deductions_bnd: 0,\r\n            tap_amount_bnd: tmptotalTAPbnd,\r\n            scp_amount_bnd: tmptotalSCPbnd,\r\n            nett_pay_bnd: tmpnettpaybnd,\r\n          };\r\n          addPayslip({ ...data });\r\n        }\r\n      });\r\n  };\r\n\r\n  const handleNext = () => {\r\n    history.push(\"/payrunbatch\");\r\n  };\r\n\r\n  const add_Payrun = (period, payrun) => {\r\n    //update payrun\r\n    addPayrun({\r\n      pay_freq: input.payfreq,\r\n      from_date: input.fromdate,\r\n      to_date: input.todate,\r\n      pay_date: input.paydate,\r\n      period: period,\r\n      payrun: payrun,\r\n      status: \"Pending\",\r\n    });\r\n    getPayrun();\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadEmployees();\r\n    loadUnpaidExpenses();\r\n    loadUnpaidDailyAllows();\r\n    getPayrun();\r\n  }, []);\r\n\r\n  // useEffect(() => {\r\n  //   loadUnpaidDailyAllows();\r\n  // }, []);\r\n\r\n  // useEffect(() => {\r\n  //   console.log(\"useEffect here\", input.payrun);\r\n\r\n  //   // getSingleBatchPayslip(input.payrun);\r\n  //   if (singlebatchpayslip) {\r\n  //     checkSelectedEmployees(input.period, input.payrun);\r\n  //     setLoadPaybatch(false);\r\n  //   }\r\n  // }, [loadPaybatch]);\r\n\r\n  //   useEffect(() => {\r\n  //     if (input.period && input.payrun) {\r\n  //       //add_Payrun();\r\n\r\n  //       setAlert(true);\r\n  //     }\r\n  //   }, [input]);\r\n\r\n  return (\r\n    <Paper className={fixedHeightPaper} style={{ backgroundColor: \"659dbd\" }}>\r\n      <section className={classes.section}>\r\n        <Grid\r\n          direction=\"row\"\r\n          container\r\n          spacing={1}\r\n          // style={{ border: \"1px solid white\" }}\r\n        >\r\n          <Grid\r\n            container\r\n            item\r\n            sm={3}\r\n            style={{ border: \"1px solid black\" }}\r\n            direction=\"column\"\r\n            align=\"left\"\r\n          >\r\n            <article className={classes.jobinfo}>\r\n              <h2>Pay Run</h2>\r\n              <form onSubmit={handlePayrunSubmit}>\r\n                <div>\r\n                  {/* <InputLabel\r\n                    htmlFor=\"deduct-customized-native-simple\"\r\n                    className={classes.formLabel}\r\n                  >\r\n                    Copy From\r\n                  </InputLabel>\r\n                  <NativeSelect\r\n                    name=\"copyfrom\"\r\n                    value={\"New\"}\r\n                    style={{\r\n                      padding: 4,\r\n                      marginLeft: 5,\r\n                      width: \"100%\",\r\n                      textAlign: \"left\",\r\n                    }}\r\n                    onChange={(e) => handleChange(e)}\r\n                  >\r\n                    <option value=\"\">New</option>\r\n                    {payrun.map((row) => {\r\n                      return (\r\n                        <option key={row.id} value={row.payrun}>\r\n                          {row.payrun}\r\n                        </option>\r\n                      );\r\n                    })}\r\n                  </NativeSelect> */}\r\n                </div>\r\n                <div>\r\n                  <TextField\r\n                    label=\"Pay Frequency\"\r\n                    variant=\"filled\"\r\n                    required\r\n                    defaultValue=\"Monthly\"\r\n                    style={{ width: \"100%\" }}\r\n                    name=\"payfreq\"\r\n                    value={input.payfreq}\r\n                    onChange={(e) => handleChange(e)}\r\n                    Select\r\n                  >\r\n                    {/* <MenuItem value=\"Weekly\">Weekly</MenuItem> */}\r\n                    <option value=\"Monthly\">Monthly</option>\r\n                  </TextField>\r\n                </div>\r\n                {/* <div>\r\n                  <InputLabel\r\n                    htmlFor=\"deduct-customized-native-simple\"\r\n                    className={classes.formLabel}\r\n                  >\r\n                    Month\r\n                  </InputLabel>\r\n                  <NativeSelect\r\n                    name=\"selectmonth\"\r\n                    defaultValue={longMonth}\r\n                    // value={input.selectmonth}\r\n                    style={{\r\n                      padding: 4,\r\n                      marginLeft: 5,\r\n                      width: \"100%\",\r\n                      textAlign: \"left\",\r\n                    }}\r\n                    onChange={(e) => handleChange(e)}\r\n                  >\r\n                    {selectmonths.map((row, i) => {\r\n                      return (\r\n                        <option key={i} value={row.mth}>\r\n                          {row.mth}\r\n                        </option>\r\n                      );\r\n                    })}\r\n                  </NativeSelect>\r\n                </div> */}\r\n                <div>\r\n                  <TextField\r\n                    label=\"From Date\"\r\n                    variant=\"filled\"\r\n                    name=\"fromdate\"\r\n                    type=\"date\"\r\n                    value={input.fromdate}\r\n                    required\r\n                    style={{ width: \"100%\" }}\r\n                    onChange={(e) => handleChange(e)}\r\n                    InputLabelProps={{\r\n                      shrink: true,\r\n                    }}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <TextField\r\n                    label=\"To Date\"\r\n                    variant=\"filled\"\r\n                    type=\"date\"\r\n                    name=\"todate\"\r\n                    value={input.todate}\r\n                    required\r\n                    onChange={(e) => handleChange(e)}\r\n                    style={{ width: \"100%\" }}\r\n                    InputLabelProps={{\r\n                      shrink: true,\r\n                    }}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <TextField\r\n                    label=\"Payment Date\"\r\n                    variant=\"filled\"\r\n                    type=\"date\"\r\n                    name=\"paydate\"\r\n                    value={input.paydate}\r\n                    required\r\n                    style={{ width: \"100%\" }}\r\n                    onChange={(e) => handleChange(e)}\r\n                    InputLabelProps={{\r\n                      shrink: true,\r\n                    }}\r\n                  />\r\n                </div>\r\n                <div>\r\n                  <div>\r\n                    <Button\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                      className={classes.button}\r\n                      onClick={onOpen}\r\n                      disabled={isSubmit}\r\n                    >\r\n                      Currency Exchange Table\r\n                    </Button>\r\n                  </div>\r\n                  <div>\r\n                    <Button\r\n                      type=\"submit\"\r\n                      variant=\"contained\"\r\n                      color=\"primary\"\r\n                      className={classes.button}\r\n                    >\r\n                      Submit <Icon className={classes.rightIcon}>send</Icon>\r\n                    </Button>\r\n\r\n                    {alert && !isPayrunExist && (\r\n                      <Button\r\n                        type=\"submit\"\r\n                        variant=\"contained\"\r\n                        color=\"primary\"\r\n                        className={classes.button}\r\n                        onClick={handleNext}\r\n                      >\r\n                        Next <Icon className={classes.rightIcon}>send</Icon>\r\n                      </Button>\r\n                    )}\r\n                  </div>\r\n                </div>\r\n                <div>\r\n                  {alert && !isPayrunExist && !singlebatch_payslip_loading && (\r\n                    <h3>New Payrun being added!</h3>\r\n                  )}\r\n                  {alert && isPayrunExist && (\r\n                    <h3>This payrun already existed!</h3>\r\n                  )}\r\n                </div>\r\n                <div>\r\n                  {error && <h3>This Payrun period already existed!</h3>}\r\n                  {errornoselect && <h3>You must select employees!</h3>}\r\n                </div>\r\n              </form>\r\n            </article>\r\n          </Grid>\r\n          <Divider\r\n            orientation=\"vertical\"\r\n            flexItem\r\n            style={{ background: \"white\" }}\r\n          />\r\n          <Grid\r\n            container\r\n            item\r\n            sm={3}\r\n            style={{ border: \"1px solid black\" }}\r\n            align=\"right\"\r\n          >\r\n            <MaterialTable\r\n              columns={columns}\r\n              data={employees}\r\n              title=\"Employee Listing\"\r\n              options={{\r\n                filtering: false,\r\n                search: false,\r\n                toolbar: true,\r\n                selection: true,\r\n                pageSize: 10,\r\n                headerStyle: {\r\n                  backgroundColor: \"#daad86\",\r\n                  color: \"primary\",\r\n                },\r\n                showTitle: true,\r\n                // selectionProps: rowData => {\r\n                //   rowData.tableData.checked = true\r\n                // }\r\n              }}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n        <Modal isOpen={isOpen} onClose={onClose}>\r\n          <ModalOverlay />\r\n          <ModalContent>\r\n            <ModalHeader>Currency Table</ModalHeader>\r\n            <ModalCloseButton />\r\n            <ModalBody>\r\n              <Box>\r\n                <UpdateCurrency />\r\n                {/* <Stack spacing={4}>\r\n                  <InputGroup>\r\n                    <InputLeftAddon children=\"USD\" />\r\n                    <Input type=\"text\" placeholder=\"USD Rate\" />\r\n                  </InputGroup>\r\n                  <InputGroup>\r\n                    <InputLeftAddon children=\"MYR\" />\r\n                    <Input type=\"text\" placeholder=\"MYR Rate\" />\r\n                  </InputGroup>\r\n                </Stack> */}\r\n              </Box>\r\n            </ModalBody>\r\n\r\n            <ModalFooter>\r\n              <Button colorScheme=\"blue\" mr={3} onClick={onClose}>\r\n                Close\r\n              </Button>\r\n            </ModalFooter>\r\n          </ModalContent>\r\n        </Modal>\r\n      </section>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  button: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  container: {\r\n    margin: 0,\r\n    padding: 0,\r\n    width: \"80vw\",\r\n    display: \"grid\",\r\n    gridTemplateColumns: \"repeat(auto-fill,250px)\",\r\n    gridAutoRows: \"10px\",\r\n    position: \"absolute\",\r\n    left: \"50%\",\r\n    transform: \"translateX(-50%)\",\r\n    justifyContent: \"center\",\r\n    backgroundColor: \"primary\",\r\n  },\r\n  fixedHeight: {\r\n    height: 800,\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(10),\r\n    // display: \"flex\",\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    border: \"1px solid\",\r\n    width: \"100%\",\r\n    color: \"primary\",\r\n    bcakgroundColor: \"black\",\r\n  },\r\n  card: {\r\n    backgroundColor: \"black\",\r\n  },\r\n  section: {\r\n    width: \"95vw\",\r\n    margin: \"5rem auto\",\r\n    maxWidth: \"var(--max-width)\",\r\n  },\r\n  underline: {\r\n    width: \"5rem\",\r\n    height: \"0.25rem\",\r\n    marginBottom: \"1.25rem\",\r\n    background: \"var(--clr-primary-5)\",\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n  },\r\n  title: {\r\n    marginbottom: \"4rem\",\r\n    textAlign: \"center\",\r\n  },\r\n  jobscenter: {\r\n    width: \"80vw\",\r\n    margin: \"0 auto\",\r\n    maxWidth: \"var(--max-width)\",\r\n    flexDirection: \"row\",\r\n  },\r\n  btncontainer: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"center\",\r\n    marginBottom: \"4rem\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  jobbtn: {\r\n    background: \"transparent\",\r\n    borderColor: \"transparent\",\r\n    textTransform: \"capitalize\",\r\n    fontSize: \"1.25rem\",\r\n    letterSpacing: \"var(--spacing)\",\r\n    margin: \"0 0.5rem\",\r\n    transition: \"var(--transition)\",\r\n    cursor: \"pointer\",\r\n    padding: \"0.25rem 0\",\r\n    lineHeight: \"1\",\r\n    outlineColor: \"var(--clr-primary-10)\",\r\n    \"&:hover\": {\r\n      color: \"var(--clr-primary-5)\",\r\n      boxShadow: \"0 2px var(--clr-primary-5)\",\r\n    },\r\n  },\r\n  activebtn: {\r\n    color: \"var(--clr-primary-5)\",\r\n    boxShadow: \"0 2px var(--clr-primary-5)\",\r\n  },\r\n  jobinfo: {\r\n    fontWeight: \"400\",\r\n  },\r\n  rightIcon: {\r\n    marginLeft: theme.spacing(1),\r\n  },\r\n  formLabel: {\r\n    fontSize: 12,\r\n    textAlign: \"left\",\r\n    marginLeft: 8,\r\n    marginTop: 5,\r\n  },\r\n}));\r\n\r\nexport default Payrun;\r\n"]},"metadata":{},"sourceType":"module"}
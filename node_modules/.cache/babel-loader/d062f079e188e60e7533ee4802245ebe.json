{"ast":null,"code":"import _objectSpread from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _slicedToArray from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect,useRef}from\"react\";import{useReactToPrint}from\"react-to-print\";import{makeStyles}from\"@material-ui/core/styles\";import clsx from\"clsx\";import dayjs from\"dayjs\";import{useHistory}from\"react-router-dom\";import*as emailjs from\"emailjs-com\";import MaterialTable,{MTableToolbar}from\"material-table\";import{FiSave,FiCheckCircle,FiMail}from\"react-icons/fi\";import{useCustomToast}from\"../helpers/useCustomToast\";//import { Button} from \"@material-ui/core\"\nimport{Box,Button,Divider,Grid,GridItem,Flex,Heading,Stack,Spacer,Tabs,TabList,TabPanels,Tab,TabPanel,Table,Thead,Tbody,Tfoot,Tr,Th,Td,TableCaption,Text,Modal,ModalOverlay,ModalContent,ModalHeader,ModalFooter,ModalBody,ModalCloseButton,Wrap,WrapItem,useDisclosure}from\"@chakra-ui/react\";import PayForm from\"./PayForm\";import PaySummary from\"./PaySummary\";import PrintPaySummary from\"./PrintPaySummary\";import{useEmployees}from\"./employees/useEmployees\";import{usePayrun}from\"./payrun/usePayrun\";import{useUpdatePayrun}from\"./payrun/useUpdatePayrun\";import{usePayslipsBatch}from\"./payslips/usePayslipsBatch\";import{useUpdatePayslips}from\"./payslips/useUpdatePayslips\";import{usePayslipsContext}from\"../context/payslips_context\";import{useTablesContext}from\"../context/tables_context\";import{useSetRecoilState,useRecoilState}from\"recoil\";import{payrunState,paydataState,payrunIdState,payrunStatusState}from\"./data/atomdata\";import{useRecoilValue}from\"recoil\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var drawerWidth=240;var SERVICE_ID=process.env.REACT_APP_EMAILJS_SERVICEID;var TEMPLATE_ID=\"template_1y8odlq\";var USER_ID=process.env.REACT_APP_EMAILJS_USERID;var initial_formdata={name:\"\",period:\"\",pay_date:null,payrun:\"\",bank_name:\"\",bank_acno:\"\",salary_currency:\"BND\",currency_rate:1,tap_acno:\"\",scp_acno:\"\",tap_checkbox:false,empid:\"\",status:\"\",allows_type1:\"\",allows_type1amt:\"\",allows_type2:\"\",allows_type2amt:\"\",allows_type3:\" \",allows_type3amt:0,allows_type4:\"\",allows_type4amt:0,allows_type5:\" \",allows_type5amt:0,allows_type6:\" \",allows_type6amt:0,allows_type7:\" \",allows_type7amt:0,allows_type8:\" \",allows_type8amt:0,deducts_type1:\" \",deducts_type1amt:0,deducts_type2:\" \",deducts_type2amt:0,deducts_type3:\" \",deducts_type3amt:0,deducts_type4:\" \",deducts_type4amt:0,deducts_type5:\" \",deducts_type5amt:0,deducts_type6:\" \",deducts_type6amt:0,deducts_type7:\" \",deducts_type7amt:0,deducts_type8:\" \",deducts_type8amt:0,wages:0,tap_amount:0,scp_amount:0,total_allowances:0,total_deductions:0,site_allows:0,expenses_claims:0,nett_pay:0,wages_bnd:0,site_allows_bnd:0,expenses_claims_bnd:0,total_allowances_bnd:0,total_deductions_bnd:0,tap_amount_bnd:0,scp_amount_bnd:0,nett_pay_bnd:0};var months=[\"January\",\"February\",\"March\",\"April\",\"May\",\"June\",\"July\",\"August\",\"September\",\"October\",\"November\",\"December\"];var columns=[{title:\"Name\",field:\"name\",editable:\"never\",cellStyle:{width:280,maxWidth:280}}];var Payrunbatch=function Payrunbatch(){var history=useHistory();var classes=useStyles();var toast=useCustomToast();var componentRef=useRef();var fixedHeightPaper=clsx(classes.paper,classes.fixedHeight);//const { register, handleSubmit, control, setValue, reset, watch } = useForm();\nvar _usePayslipsContext=usePayslipsContext(),getSingleBatchPayslip=_usePayslipsContext.getSingleBatchPayslip,payslip_period=_usePayslipsContext.payslip_period,singlebatch_payslip_loading=_usePayslipsContext.singlebatch_payslip_loading,singlebatch_payslip_error=_usePayslipsContext.singlebatch_payslip_error;var _usePayslipsBatch=usePayslipsBatch(),payslipsbatch=_usePayslipsBatch.payslipsbatch,psbpayrunId=_usePayslipsBatch.psbpayrunId,setPSBPayrunId=_usePayslipsBatch.setPSBPayrunId;var _useEmployees=useEmployees(),employees=_useEmployees.employees;var _usePayrun=usePayrun(),payrun=_usePayrun.payrun;var updatePayslip=useUpdatePayslips();var updatePayrun=useUpdatePayrun();var _useTablesContext=useTablesContext(),loadPayitems=_useTablesContext.loadPayitems,payitems=_useTablesContext.payitems;var _useRecoilState=useRecoilState(payrunState),_useRecoilState2=_slicedToArray(_useRecoilState,2),payrundata=_useRecoilState2[0],setPayrundata=_useRecoilState2[1];var _useRecoilState3=useRecoilState(payrunIdState),_useRecoilState4=_slicedToArray(_useRecoilState3,2),payrunId=_useRecoilState4[0],setPayrunId=_useRecoilState4[1];var _useRecoilState5=useRecoilState(payrunStatusState),_useRecoilState6=_slicedToArray(_useRecoilState5,2),payrunstatus=_useRecoilState6[0],setPayrunStatus=_useRecoilState6[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loadFormdata=_useState2[0],setLoadFormdata=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loadUpdatedata=_useState4[0],setLoadUpdatedata=_useState4[1];var _useState5=useState(initial_formdata),_useState6=_slicedToArray(_useState5,2),formdata=_useState6[0],setFormdata=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),rowindex=_useState8[0],setRowIndex=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),emponclick=_useState10[0],setEmponclick=_useState10[1];var _useState11=useState(false),_useState12=_slicedToArray(_useState11,2),showSumm=_useState12[0],setShowSumm=_useState12[1];var _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),isCalc=_useState14[0],setIsCalc=_useState14[1];var _useState15=useState(true),_useState16=_slicedToArray(_useState15,2),isStart=_useState16[0],setIsStart=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),isShow=_useState18[0],setIsShow=_useState18[1];var _useState19=useState(0),_useState20=_slicedToArray(_useState19,2),tabno=_useState20[0],setTabno=_useState20[1];var _useDisclosure=useDisclosure(),isOpen=_useDisclosure.isOpen,onOpen=_useDisclosure.onOpen,onClose=_useDisclosure.onClose;var singlebatchpayslip=payslipsbatch;useEffect(function(){loadPayitems();setEmponclick(true);// getSingleBatchPayslip(payslip_period);\n},[]);useEffect(function(){setRowIndex(0);// handleEmpButtonClick(0);\nsetEmponclick(false);},[emponclick]);useEffect(function(){setLoadFormdata(false);},[loadUpdatedata]);useEffect(function(){setPSBPayrunId(payslip_period);//setIsCalc(true);\n},[psbpayrunId]);useEffect(function(){calcPayrunTotals();setIsCalc(false);},[isCalc]);// useEffect(() => {\n//   handleEmpButtonClick(0);\n//   setIsLoad(false);\n// }, [isLoad]);\nvar handleShowSumm=function handleShowSumm(e){e.preventDefault();setShowSumm(!showSumm);};var handlePrintSummary=function handlePrintSummary(e){e.preventDefault();if(payrundata.status===\"Verified\"||payrundata.status===\"Approved\"){exportPdfTable(singlebatchpayslip);}else{// save individual payslips\nsaveIndividualPayslips();// save payrun\nupdatePayrun({id:payrunId,totalpayroll:payrundata.totalpayroll,totalwages:payrundata.totalwages,totaltap:payrundata.totaltap,totalscp:payrundata.totalscp,totalallows:payrundata.totalallows,totaldeducts:payrundata.totaldeducts,totalsitesallows:payrundata.totalsiteallows,totalexpensesclaims:payrundata.totalexpensesclaims});exportPdfTable(singlebatchpayslip);}};var exportPdfTable=function exportPdfTable(singlebatchpayslip){PrintPaySummary(singlebatchpayslip={singlebatchpayslip:singlebatchpayslip});};var handleSavePayslips=function handleSavePayslips(e){e.preventDefault();//calcPayrunTotals();\n// eslint-disable-next-line no-lone-blocks\n// {\n//   singlebatchpayslip.forEach((rec) => {\n//     const { id, rec_id, tableData, ...fields } = rec;\n//     updatePayslip({ id, ...fields });\n//   });\n// }\n// save individual payslips\nsaveIndividualPayslips();//update payrun\nhandleSavePayrun();toast({title:\"Changes have been saved!\",status:\"success\"});history.push(\"/payslip\");};var saveIndividualPayslips=function saveIndividualPayslips(){singlebatchpayslip.forEach(function(rec){var id=rec.id,rec_id=rec.rec_id,tableData=rec.tableData,fields=_objectWithoutProperties(rec,[\"id\",\"rec_id\",\"tableData\"]);updatePayslip(_objectSpread({id:id},fields));});};var calcPayrunTotals=function calcPayrunTotals(){// if (!psbpayrunId) {\n//   return null;\n// }\nvar tmpbatch=singlebatchpayslip.filter(function(r){return r.payrun===payslip_period;}).map(function(rec){return _objectSpread({},rec);});//console.log(\"recalc\", tmpbatch);\nvar totalpayroll=tmpbatch.reduce(function(acc,item){var value=isNaN(item.nett_pay_bnd)?0:item.nett_pay_bnd;return acc+Math.round((value+Number.EPSILON)*100)/100;},0);var totalwages=tmpbatch.reduce(function(acc,item,index){var value=isNaN(item.wages_bnd)?0:item.wages_bnd;return acc+Math.round((value+Number.EPSILON)*100)/100;},0);var totaltap=tmpbatch.reduce(function(acc,item){var value=isNaN(item.tap_amount_bnd)?0:item.tap_amount_bnd;return acc+Math.round((value+Number.EPSILON)*100)/100;},0);var totalscp=tmpbatch.reduce(function(acc,item){var value=isNaN(item.scp_amount_bnd)?0:item.scp_amount_bnd;return acc+Math.round((value+Number.EPSILON)*100)/100;},0);var totalallows=tmpbatch.reduce(function(acc,item){var value=isNaN(item.total_allowances_bnd)?0:item.total_allowances_bnd;return acc+Math.round((value+Number.EPSILON)*100)/100;},0);var totaldeducts=tmpbatch.reduce(function(acc,item){var value=isNaN(item.total_deductions_bnd)?0:item.total_deductions_bnd;return acc+Math.round((value+Number.EPSILON)*100)/100;},0);var totalsiteallows=tmpbatch.reduce(function(acc,item){var value=isNaN(item.site_allows_bnd)?0:item.site_allows_bnd;return acc+Math.round((value+Number.EPSILON)*100)/100;},0);var totalexpensesclaims=tmpbatch.reduce(function(acc,item){var value=isNaN(item.expenses_claims_bnd)?0:item.expenses_claims_bnd;return acc+Math.round((value+Number.EPSILON)*100)/100;},0);setPayrundata(_objectSpread(_objectSpread({},payrundata),{},{totalpayroll:totalpayroll,totalwages:totalwages,totaltap:totaltap,totalscp:totalscp,totalallows:totalallows,totaldeducts:totaldeducts,totalsiteallows:totalsiteallows,totalexpensesclaims:totalexpensesclaims}));};var handleSavePayrun=function handleSavePayrun(){if(payrundata.status===\"Verified\"||payrundata.status===\"Approved\"){toast({title:\"This payroll batch has been \".concat(payrundata.status,\"! No changes can be made!\"),status:\"warning\"});return/*#__PURE__*/_jsx(\"div\",{});}var tmppayrun=payrun.filter(function(r){return r.payrun===payslip_period;});//console.log(\"paysave\", tmppayrun[0].id);\n// eslint-disable-next-line no-lone-blocks\nconsole.log(\"paybatch\",payslip_period,payrundata);updatePayrun({id:tmppayrun[0].id,totalpayroll:payrundata.totalpayroll,totalwages:payrundata.totalwages,totaltap:payrundata.totaltap,totalscp:payrundata.totalscp,totalallows:payrundata.totalallows,totaldeducts:payrundata.totaldeducts,totalsitesallows:payrundata.totalsiteallows,totalexpensesclaims:payrundata.totalexpensesclaims});history.push(\"/payslip\");};var handleVerifyPayslips=function handleVerifyPayslips(e){e.preventDefault();setPayrundata(_objectSpread(_objectSpread({},payrundata),{},{status:\"Verified\"}));setPayrunStatus(\"Verified\");// save individual payslips\nsaveIndividualPayslips();// save payrun\nupdatePayrun({id:payrunId,status:\"Verified\",totalpayroll:payrundata.totalpayroll,totalwages:payrundata.totalwages,totaltap:payrundata.totaltap,totalscp:payrundata.totalscp,totalallows:payrundata.totalallows,totaldeducts:payrundata.totaldeducts,totalsitesallows:payrundata.totalsiteallows,totalexpensesclaims:payrundata.totalexpensesclaims});toast({title:\"Batch has been verified!\",status:\"success\"});};var handleEmpButtonClick=function handleEmpButtonClick(index){var paydata=singlebatchpayslip[index];setFormdata(initial_formdata);setFormdata(_objectSpread(_objectSpread({},initial_formdata),paydata));setFormdata(_objectSpread(_objectSpread({},initial_formdata),paydata));setLoadFormdata(true);};var handleTabChange=function handleTabChange(index){setTabno(index);if(index===1){calcPayrunTotals();}setIsShow(false);};useEffect(function(){if(tabno===1){setIsShow(true);}else{setIsShow(false);}},[tabno]);var SentEmailModal=function SentEmailModal(){return/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(MaterialTable,{columns:columns,data:payslipsbatch,title:\"Employees\",options:{filtering:false,search:false,toolbar:true,selection:true,pageSize:10,headerStyle:{backgroundColor:\"#daad86\",color:\"primary\"},showTitle:true},components:{Toolbar:function Toolbar(props){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(MTableToolbar,_objectSpread({},props)),/*#__PURE__*/_jsx(\"div\",{style:{padding:\"5px 10px\"},children:/*#__PURE__*/_jsx(Button,{colorScheme:\"blue\",isDisabled:payrundata.status!==\"Approve\"?true:false,onClick:function onClick(){return handleSentEmail();},leftIcon:/*#__PURE__*/_jsx(FiMail,{color:\"white\",fontSize:\"1.5em\"}),children:\"Email\"})})]});}}})});};var handleSentEmail=function handleSentEmail(data){var mth=months[payslip_period.substring(6,7)];var yr=payslip_period.substring(0,4);payslipsbatch.forEach(function(pay){if(pay.tableData.checked){var name=pay.name,empid=pay.empid;var emp=employees.filter(function(r){return r.id===empid;}).map(function(rec){return _objectSpread({},rec);});var emaildata={to_name:name,to_email:emp[0].email,message:\"Your payroll for the month of \".concat(mth,\" \").concat(yr,\" has been transfered. Please login in to view your payslip!\")};emailjs.send(SERVICE_ID,TEMPLATE_ID,emaildata,USER_ID).then(function(response){console.log(response.status,response.text);toast({title:\"Email has sent successfully to \".concat(emaildata.to_email,\"!\"),status:\"success\"});},function(err){console.log(err);toast({title:\"Email has fail to send to \".concat(emaildata.to_email,\"!\"),status:\"warning\"});});}});};return/*#__PURE__*/_jsxs(Flex,{marginLeft:4,marginTop:70,w:\"98%\",h:\"100%\",style:{backgroundColor:\"lightcyan\"},children:[/*#__PURE__*/_jsxs(Grid,{templateRows:\"repeat(10,1fr)\",templateColumns:\"repeat(1,1fr)\",children:[/*#__PURE__*/_jsxs(GridItem,{rowSpan:1,colSpan:1,children:[/*#__PURE__*/_jsxs(Grid,{templateRows:\"repeat(1,1fr)\",templateColumns:\"repeat(10,1fr)\",children:[/*#__PURE__*/_jsx(GridItem,{rowSpan:1,colSpan:2}),/*#__PURE__*/_jsx(GridItem,{rowSpan:1,colSpan:4,children:/*#__PURE__*/_jsx(Box,{textAlign:\"center\",alignItems:\"center\",children:/*#__PURE__*/_jsx(Heading,{pl:\"10\",pt:\"2\",children:\"Payroll\"})})}),/*#__PURE__*/_jsx(GridItem,{rowSpan:1,colSpan:4,children:/*#__PURE__*/_jsx(Box,{pt:\"2\",pr:5,alignItems:\"right\",align:\"right\",children:/*#__PURE__*/_jsxs(Stack,{spacing:4,direction:\"row\",align:\"center\",pl:150,children:[/*#__PURE__*/_jsx(Button,{width:\"800px\",colorScheme:\"blue\",isDisabled:payrundata.status===\"Verified\"||payrundata.status===\"Approved\"||!isShow?true:false,onClick:function onClick(e){return handleSavePayslips(e);},leftIcon:/*#__PURE__*/_jsx(FiSave,{color:\"white\",fontSize:\"1.5em\"}),children:\"Save/Exit\"}),/*#__PURE__*/_jsx(Button,{isDisabled:!isShow,width:\"500px\",colorScheme:\"blue\",onClick:function onClick(e){return handlePrintSummary(e);},leftIcon:/*#__PURE__*/_jsx(FiSave,{color:\"white\",fontSize:\"1.5em\"}),children:\"Print\"}),/*#__PURE__*/_jsx(Button,{width:\"500px\",colorScheme:\"blue\",isDisabled:payrundata.status===\"Verified\"||payrundata.status===\"Approved\"||payrundata.status===\"New\"||!isShow?true:false,onClick:function onClick(e){return handleVerifyPayslips(e);},leftIcon:/*#__PURE__*/_jsx(FiCheckCircle,{color:\"white\",fontSize:\"1.5em\"}),children:\"Verify\"}),/*#__PURE__*/_jsx(Button,{width:\"500px\",colorScheme:\"blue\",isDisabled:payrundata.status!==\"Approved\"?true:false,onClick:onOpen,leftIcon:/*#__PURE__*/_jsx(FiMail,{color:\"white\",fontSize:\"1.5em\"}),children:\"Email\"})]})})})]}),/*#__PURE__*/_jsx(Divider,{style:{border:\"1px solid lightgrey\"},orientation:\"horizontal\",colorScheme:\"red\",variant:\"solid\"})]}),/*#__PURE__*/_jsxs(Tabs,{defaultIndex:0,onChange:function onChange(index){return handleTabChange(index);},children:[/*#__PURE__*/_jsxs(TabList,{marginLeft:4,children:[/*#__PURE__*/_jsx(Tab,{children:/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Heading,{size:\"sm\",children:\"Details\"})})}),/*#__PURE__*/_jsx(Tab,{children:/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(Heading,{size:\"sm\",children:\"Summary\"})})})]}),/*#__PURE__*/_jsxs(TabPanels,{children:[/*#__PURE__*/_jsx(TabPanel,{children:/*#__PURE__*/_jsxs(Grid,{templateRows:\"repeat(1,1fr)\",templateColumns:\"repeat(10,1fr)\",children:[/*#__PURE__*/_jsxs(GridItem,{colSpan:2,children:[/*#__PURE__*/_jsx(Box,{textAlign:\"center\",p:4,children:/*#__PURE__*/_jsx(Heading,{size:\"sm\",alignItems:\"center\",children:\"Employees\"})}),/*#__PURE__*/_jsx(Divider,{backgroundColor:\"white\"}),/*#__PURE__*/_jsx(Box,{border:\"2px solid white\",backgroundColor:\"cyan.100\",children:/*#__PURE__*/_jsx(Table,{variant:\"simple\",children:/*#__PURE__*/_jsx(Tbody,{children:payslipsbatch.map(function(item,index){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{className:classes.empbtn,variant:\"outlined\"// ${index === value && \"activebtn\"}\n,onClick:function onClick(e){setRowIndex(index);setIsStart(false);handleEmpButtonClick(index);},children:/*#__PURE__*/_jsx(Text,{isTruncated:true,maxWidth:240,children:item.name})}),/*#__PURE__*/_jsx(Divider,{backgroundColor:\"white\"})]});})})})})]}),/*#__PURE__*/_jsx(GridItem,{colSpan:8,children:/*#__PURE__*/_jsx(PayForm,{formdata:formdata,setFormdata:setFormdata,loadFormdata:loadFormdata,setLoadFormdata:setLoadFormdata,payitems:payitems,setLoadUpdatedata:setLoadUpdatedata,singlebatchpayslip:singlebatchpayslip,rowindex:rowindex,isCalc:isCalc,isStart:isStart,setIsStart:setIsStart,setIsCalc:setIsCalc})})]})}),/*#__PURE__*/_jsx(TabPanel,{children:/*#__PURE__*/_jsx(PaySummary,{payrundata:payrundata,singlebatchpayslip:singlebatchpayslip})})]})]})]}),/*#__PURE__*/_jsxs(Modal,{isOpen:isOpen,onClose:onClose,children:[/*#__PURE__*/_jsx(ModalOverlay,{}),/*#__PURE__*/_jsxs(ModalContent,{children:[/*#__PURE__*/_jsx(ModalCloseButton,{}),/*#__PURE__*/_jsx(ModalBody,{children:/*#__PURE__*/_jsx(SentEmailModal,{})}),/*#__PURE__*/_jsx(ModalFooter,{children:/*#__PURE__*/_jsx(Button,{colorScheme:\"blue\",mr:3,onClick:onClose,children:\"Close\"})})]})]})]});};var useStyles=makeStyles(function(theme){return{root:{flexGrow:1},button:{margin:theme.spacing(1)},container:{margin:0,padding:0,width:\"80vw\",display:\"grid\",gridTemplateColumns:\"repeat(auto-fill,250px)\",gridAutoRows:\"10px\",position:\"absolute\",left:\"50%\",transform:\"translateX(-50%)\",justifyContent:\"center\",backgroundColor:\"primary\"},fixedHeight:{height:800},paper:{paddingTop:theme.spacing(10),// display: \"flex\",\ndisplay:\"flex\",overflow:\"auto\",flexDirection:\"column\",border:\"1px solid\",width:\"100%\",color:\"primary\",bcakgroundColor:\"white\"},card:{backgroundColor:\"white\"},section:{width:\"80vw\",margin:\"1rem auto\",maxWidth:\"var(--max-width)\"},underline:{width:\"5rem\",height:\"0.25rem\",marginBottom:\"1.25rem\",background:\"var(--clr-primary-5)\",marginLeft:\"auto\",marginRight:\"auto\"},title:{marginbottom:\"4rem\",textAlign:\"center\"},empscenter:{width:\"80vw\",margin:\"0 auto\",maxWidth:\"var(--max-width)\",flexDirection:\"row\"},empcontainer:{display:\"flex\",flexDirection:\"row\",justifyContent:\"center\",marginBottom:\"4rem\",flexWrap:\"wrap\"},empbtn:{background:\"transparent\",borderColor:\"transparent\",textTransform:\"capitalize\",fontSize:\"1rem\",letterSpacing:\"var(--spacing)\",margin:\"0 0.5rem\",transition:\"var(--transition)\",cursor:\"pointer\",padding:\"0.25rem 0\",lineHeight:\"1\",outlineColor:\"var(--clr-primary-10)\",\"&:hover\":{color:\"var(--clr-primary-5)\",boxShadow:\"0 2px var(--clr-primary-5)\"}},activebtn:{color:\"var(--clr-primary-5)\",boxShadow:\"0 2px var(--clr-primary-5)\"},empinfo:{fontWeight:\"400\"},divider:{// Theme Color, or use css color in quote\nbackground:\"white\"},textField:{marginLeft:theme.spacing(1),marginRight:theme.spacing(1),width:350}};});export default Payrunbatch;","map":{"version":3,"sources":["D:/react-myprojects/hrms-airtable/src/components/Payrunbatch.js"],"names":["React","useState","useEffect","useRef","useReactToPrint","makeStyles","clsx","dayjs","useHistory","emailjs","MaterialTable","MTableToolbar","FiSave","FiCheckCircle","FiMail","useCustomToast","Box","Button","Divider","Grid","GridItem","Flex","Heading","Stack","Spacer","Tabs","TabList","TabPanels","Tab","TabPanel","Table","Thead","Tbody","Tfoot","Tr","Th","Td","TableCaption","Text","Modal","ModalOverlay","ModalContent","ModalHeader","ModalFooter","ModalBody","ModalCloseButton","Wrap","WrapItem","useDisclosure","PayForm","PaySummary","PrintPaySummary","useEmployees","usePayrun","useUpdatePayrun","usePayslipsBatch","useUpdatePayslips","usePayslipsContext","useTablesContext","useSetRecoilState","useRecoilState","payrunState","paydataState","payrunIdState","payrunStatusState","useRecoilValue","drawerWidth","SERVICE_ID","process","env","REACT_APP_EMAILJS_SERVICEID","TEMPLATE_ID","USER_ID","REACT_APP_EMAILJS_USERID","initial_formdata","name","period","pay_date","payrun","bank_name","bank_acno","salary_currency","currency_rate","tap_acno","scp_acno","tap_checkbox","empid","status","allows_type1","allows_type1amt","allows_type2","allows_type2amt","allows_type3","allows_type3amt","allows_type4","allows_type4amt","allows_type5","allows_type5amt","allows_type6","allows_type6amt","allows_type7","allows_type7amt","allows_type8","allows_type8amt","deducts_type1","deducts_type1amt","deducts_type2","deducts_type2amt","deducts_type3","deducts_type3amt","deducts_type4","deducts_type4amt","deducts_type5","deducts_type5amt","deducts_type6","deducts_type6amt","deducts_type7","deducts_type7amt","deducts_type8","deducts_type8amt","wages","tap_amount","scp_amount","total_allowances","total_deductions","site_allows","expenses_claims","nett_pay","wages_bnd","site_allows_bnd","expenses_claims_bnd","total_allowances_bnd","total_deductions_bnd","tap_amount_bnd","scp_amount_bnd","nett_pay_bnd","months","columns","title","field","editable","cellStyle","width","maxWidth","Payrunbatch","history","classes","useStyles","toast","componentRef","fixedHeightPaper","paper","fixedHeight","getSingleBatchPayslip","payslip_period","singlebatch_payslip_loading","singlebatch_payslip_error","payslipsbatch","psbpayrunId","setPSBPayrunId","employees","updatePayslip","updatePayrun","loadPayitems","payitems","payrundata","setPayrundata","payrunId","setPayrunId","payrunstatus","setPayrunStatus","loadFormdata","setLoadFormdata","loadUpdatedata","setLoadUpdatedata","formdata","setFormdata","rowindex","setRowIndex","emponclick","setEmponclick","showSumm","setShowSumm","isCalc","setIsCalc","isStart","setIsStart","isShow","setIsShow","tabno","setTabno","isOpen","onOpen","onClose","singlebatchpayslip","calcPayrunTotals","handleShowSumm","e","preventDefault","handlePrintSummary","exportPdfTable","saveIndividualPayslips","id","totalpayroll","totalwages","totaltap","totalscp","totalallows","totaldeducts","totalsitesallows","totalsiteallows","totalexpensesclaims","handleSavePayslips","handleSavePayrun","push","forEach","rec","rec_id","tableData","fields","tmpbatch","filter","r","map","reduce","acc","item","value","isNaN","Math","round","Number","EPSILON","index","tmppayrun","console","log","handleVerifyPayslips","handleEmpButtonClick","paydata","handleTabChange","SentEmailModal","filtering","search","toolbar","selection","pageSize","headerStyle","backgroundColor","color","showTitle","Toolbar","props","padding","handleSentEmail","data","mth","substring","yr","pay","checked","emp","emaildata","to_name","to_email","email","message","send","then","response","text","err","border","empbtn","theme","root","flexGrow","button","margin","spacing","container","display","gridTemplateColumns","gridAutoRows","position","left","transform","justifyContent","height","paddingTop","overflow","flexDirection","bcakgroundColor","card","section","underline","marginBottom","background","marginLeft","marginRight","marginbottom","textAlign","empscenter","empcontainer","flexWrap","borderColor","textTransform","fontSize","letterSpacing","transition","cursor","lineHeight","outlineColor","boxShadow","activebtn","empinfo","fontWeight","divider","textField"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { useReactToPrint } from \"react-to-print\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport clsx from \"clsx\";\r\nimport dayjs from \"dayjs\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport * as emailjs from \"emailjs-com\";\r\nimport MaterialTable, { MTableToolbar } from \"material-table\";\r\nimport { FiSave, FiCheckCircle, FiMail } from \"react-icons/fi\";\r\nimport { useCustomToast } from \"../helpers/useCustomToast\";\r\n//import { Button} from \"@material-ui/core\"\r\nimport {\r\n  Box,\r\n  Button,\r\n  Divider,\r\n  Grid,\r\n  GridItem,\r\n  Flex,\r\n  Heading,\r\n  Stack,\r\n  Spacer,\r\n  Tabs,\r\n  TabList,\r\n  TabPanels,\r\n  Tab,\r\n  TabPanel,\r\n  Table,\r\n  Thead,\r\n  Tbody,\r\n  Tfoot,\r\n  Tr,\r\n  Th,\r\n  Td,\r\n  TableCaption,\r\n  Text,\r\n  Modal,\r\n  ModalOverlay,\r\n  ModalContent,\r\n  ModalHeader,\r\n  ModalFooter,\r\n  ModalBody,\r\n  ModalCloseButton,\r\n  Wrap,\r\n  WrapItem,\r\n  useDisclosure,\r\n} from \"@chakra-ui/react\";\r\nimport PayForm from \"./PayForm\";\r\nimport PaySummary from \"./PaySummary\";\r\nimport PrintPaySummary from \"./PrintPaySummary\";\r\nimport { useEmployees } from \"./employees/useEmployees\";\r\nimport { usePayrun } from \"./payrun/usePayrun\";\r\nimport { useUpdatePayrun } from \"./payrun/useUpdatePayrun\";\r\nimport { usePayslipsBatch } from \"./payslips/usePayslipsBatch\";\r\nimport { useUpdatePayslips } from \"./payslips/useUpdatePayslips\";\r\nimport { usePayslipsContext } from \"../context/payslips_context\";\r\nimport { useTablesContext } from \"../context/tables_context\";\r\nimport { useSetRecoilState, useRecoilState } from \"recoil\";\r\nimport {\r\n  payrunState,\r\n  paydataState,\r\n  payrunIdState,\r\n  payrunStatusState,\r\n} from \"./data/atomdata\";\r\nimport { useRecoilValue } from \"recoil\";\r\n\r\nconst drawerWidth = 240;\r\nconst SERVICE_ID = process.env.REACT_APP_EMAILJS_SERVICEID;\r\nconst TEMPLATE_ID = \"template_1y8odlq\";\r\nconst USER_ID = process.env.REACT_APP_EMAILJS_USERID;\r\n\r\nconst initial_formdata = {\r\n  name: \"\",\r\n  period: \"\",\r\n  pay_date: null,\r\n  payrun: \"\",\r\n  bank_name: \"\",\r\n  bank_acno: \"\",\r\n  salary_currency: \"BND\",\r\n  currency_rate: 1,\r\n  tap_acno: \"\",\r\n  scp_acno: \"\",\r\n  tap_checkbox: false,\r\n  empid: \"\",\r\n  status: \"\",\r\n  allows_type1: \"\",\r\n  allows_type1amt: \"\",\r\n  allows_type2: \"\",\r\n  allows_type2amt: \"\",\r\n  allows_type3: \" \",\r\n  allows_type3amt: 0,\r\n  allows_type4: \"\",\r\n  allows_type4amt: 0,\r\n  allows_type5: \" \",\r\n  allows_type5amt: 0,\r\n  allows_type6: \" \",\r\n  allows_type6amt: 0,\r\n  allows_type7: \" \",\r\n  allows_type7amt: 0,\r\n  allows_type8: \" \",\r\n  allows_type8amt: 0,\r\n  deducts_type1: \" \",\r\n  deducts_type1amt: 0,\r\n  deducts_type2: \" \",\r\n  deducts_type2amt: 0,\r\n  deducts_type3: \" \",\r\n  deducts_type3amt: 0,\r\n  deducts_type4: \" \",\r\n  deducts_type4amt: 0,\r\n  deducts_type5: \" \",\r\n  deducts_type5amt: 0,\r\n  deducts_type6: \" \",\r\n  deducts_type6amt: 0,\r\n  deducts_type7: \" \",\r\n  deducts_type7amt: 0,\r\n  deducts_type8: \" \",\r\n  deducts_type8amt: 0,\r\n\r\n  wages: 0,\r\n  tap_amount: 0,\r\n  scp_amount: 0,\r\n  total_allowances: 0,\r\n  total_deductions: 0,\r\n  site_allows: 0,\r\n  expenses_claims: 0,\r\n  nett_pay: 0,\r\n\r\n  wages_bnd: 0,\r\n  site_allows_bnd: 0,\r\n  expenses_claims_bnd: 0,\r\n  total_allowances_bnd: 0,\r\n  total_deductions_bnd: 0,\r\n  tap_amount_bnd: 0,\r\n  scp_amount_bnd: 0,\r\n  nett_pay_bnd: 0,\r\n};\r\n\r\nconst months = [\r\n  \"January\",\r\n  \"February\",\r\n  \"March\",\r\n  \"April\",\r\n  \"May\",\r\n  \"June\",\r\n  \"July\",\r\n  \"August\",\r\n  \"September\",\r\n  \"October\",\r\n  \"November\",\r\n  \"December\",\r\n];\r\n\r\nconst columns = [\r\n  {\r\n    title: \"Name\",\r\n    field: \"name\",\r\n    editable: \"never\",\r\n    cellStyle: {\r\n      width: 280,\r\n      maxWidth: 280,\r\n    },\r\n  },\r\n];\r\n\r\nconst Payrunbatch = () => {\r\n  let history = useHistory();\r\n  const classes = useStyles();\r\n  const toast = useCustomToast();\r\n  const componentRef = useRef();\r\n  const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight);\r\n\r\n  //const { register, handleSubmit, control, setValue, reset, watch } = useForm();\r\n\r\n  const {\r\n    //payrun,\r\n    getSingleBatchPayslip,\r\n    //singlebatchpayslip,\r\n    payslip_period,\r\n    //updatePayslip,\r\n    //updatePayrun,\r\n    singlebatch_payslip_loading,\r\n    singlebatch_payslip_error,\r\n  } = usePayslipsContext();\r\n  const { payslipsbatch, psbpayrunId, setPSBPayrunId } = usePayslipsBatch();\r\n  const { employees } = useEmployees();\r\n  const { payrun } = usePayrun();\r\n  const updatePayslip = useUpdatePayslips();\r\n  const updatePayrun = useUpdatePayrun();\r\n  const { loadPayitems, payitems } = useTablesContext();\r\n  const [payrundata, setPayrundata] = useRecoilState(payrunState);\r\n  const [payrunId, setPayrunId] = useRecoilState(payrunIdState);\r\n  const [payrunstatus, setPayrunStatus] = useRecoilState(payrunStatusState);\r\n  const [loadFormdata, setLoadFormdata] = useState(false);\r\n  const [loadUpdatedata, setLoadUpdatedata] = useState(false);\r\n  const [formdata, setFormdata] = useState(initial_formdata);\r\n  const [rowindex, setRowIndex] = useState(0);\r\n  const [emponclick, setEmponclick] = useState(false);\r\n  const [showSumm, setShowSumm] = useState(false);\r\n  const [isCalc, setIsCalc] = useState(false);\r\n  const [isStart, setIsStart] = useState(true);\r\n  const [isShow, setIsShow] = useState(false);\r\n  const [tabno, setTabno] = useState(0);\r\n  const { isOpen, onOpen, onClose } = useDisclosure();\r\n  const singlebatchpayslip = payslipsbatch;\r\n\r\n  useEffect(() => {\r\n    loadPayitems();\r\n    setEmponclick(true);\r\n    // getSingleBatchPayslip(payslip_period);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    setRowIndex(0);\r\n    // handleEmpButtonClick(0);\r\n    setEmponclick(false);\r\n  }, [emponclick]);\r\n\r\n  useEffect(() => {\r\n    setLoadFormdata(false);\r\n  }, [loadUpdatedata]);\r\n\r\n  useEffect(() => {\r\n    setPSBPayrunId(payslip_period);\r\n    //setIsCalc(true);\r\n  }, [psbpayrunId]);\r\n\r\n  useEffect(() => {\r\n    calcPayrunTotals();\r\n    setIsCalc(false);\r\n  }, [isCalc]);\r\n\r\n  // useEffect(() => {\r\n  //   handleEmpButtonClick(0);\r\n  //   setIsLoad(false);\r\n  // }, [isLoad]);\r\n\r\n  const handleShowSumm = (e) => {\r\n    e.preventDefault();\r\n    setShowSumm(!showSumm);\r\n  };\r\n\r\n  const handlePrintSummary = (e) => {\r\n    e.preventDefault();\r\n    if (payrundata.status === \"Verified\" || payrundata.status === \"Approved\") {\r\n      exportPdfTable(singlebatchpayslip);\r\n    } else {\r\n      // save individual payslips\r\n      saveIndividualPayslips();\r\n      // save payrun\r\n      updatePayrun({\r\n        id: payrunId,\r\n        totalpayroll: payrundata.totalpayroll,\r\n        totalwages: payrundata.totalwages,\r\n        totaltap: payrundata.totaltap,\r\n        totalscp: payrundata.totalscp,\r\n        totalallows: payrundata.totalallows,\r\n        totaldeducts: payrundata.totaldeducts,\r\n        totalsitesallows: payrundata.totalsiteallows,\r\n        totalexpensesclaims: payrundata.totalexpensesclaims,\r\n      });\r\n      exportPdfTable(singlebatchpayslip);\r\n    }\r\n  };\r\n\r\n  const exportPdfTable = (singlebatchpayslip) => {\r\n    PrintPaySummary((singlebatchpayslip = { singlebatchpayslip }));\r\n  };\r\n\r\n  const handleSavePayslips = (e) => {\r\n    e.preventDefault();\r\n\r\n    //calcPayrunTotals();\r\n    // eslint-disable-next-line no-lone-blocks\r\n    // {\r\n    //   singlebatchpayslip.forEach((rec) => {\r\n    //     const { id, rec_id, tableData, ...fields } = rec;\r\n    //     updatePayslip({ id, ...fields });\r\n    //   });\r\n    // }\r\n    // save individual payslips\r\n    saveIndividualPayslips();\r\n\r\n    //update payrun\r\n    handleSavePayrun();\r\n    toast({\r\n      title: \"Changes have been saved!\",\r\n      status: \"success\",\r\n    });\r\n    history.push(\"/payslip\");\r\n  };\r\n\r\n  const saveIndividualPayslips = () => {\r\n    singlebatchpayslip.forEach((rec) => {\r\n      const { id, rec_id, tableData, ...fields } = rec;\r\n      updatePayslip({ id, ...fields });\r\n    });\r\n  };\r\n\r\n  const calcPayrunTotals = () => {\r\n    // if (!psbpayrunId) {\r\n    //   return null;\r\n    // }\r\n    const tmpbatch = singlebatchpayslip\r\n      .filter((r) => r.payrun === payslip_period)\r\n      .map((rec) => {\r\n        return { ...rec };\r\n      });\r\n    //console.log(\"recalc\", tmpbatch);\r\n\r\n    const totalpayroll = tmpbatch.reduce((acc, item) => {\r\n      const value = isNaN(item.nett_pay_bnd) ? 0 : item.nett_pay_bnd;\r\n      return acc + Math.round((value + Number.EPSILON) * 100) / 100;\r\n    }, 0);\r\n    const totalwages = tmpbatch.reduce((acc, item, index) => {\r\n      const value = isNaN(item.wages_bnd) ? 0 : item.wages_bnd;\r\n      return acc + Math.round((value + Number.EPSILON) * 100) / 100;\r\n    }, 0);\r\n    const totaltap = tmpbatch.reduce((acc, item) => {\r\n      const value = isNaN(item.tap_amount_bnd) ? 0 : item.tap_amount_bnd;\r\n      return acc + Math.round((value + Number.EPSILON) * 100) / 100;\r\n    }, 0);\r\n\r\n    const totalscp = tmpbatch.reduce((acc, item) => {\r\n      const value = isNaN(item.scp_amount_bnd) ? 0 : item.scp_amount_bnd;\r\n      return acc + Math.round((value + Number.EPSILON) * 100) / 100;\r\n    }, 0);\r\n\r\n    const totalallows = tmpbatch.reduce((acc, item) => {\r\n      const value = isNaN(item.total_allowances_bnd)\r\n        ? 0\r\n        : item.total_allowances_bnd;\r\n      return acc + Math.round((value + Number.EPSILON) * 100) / 100;\r\n    }, 0);\r\n\r\n    const totaldeducts = tmpbatch.reduce((acc, item) => {\r\n      const value = isNaN(item.total_deductions_bnd)\r\n        ? 0\r\n        : item.total_deductions_bnd;\r\n      return acc + Math.round((value + Number.EPSILON) * 100) / 100;\r\n    }, 0);\r\n\r\n    const totalsiteallows = tmpbatch.reduce((acc, item) => {\r\n      const value = isNaN(item.site_allows_bnd) ? 0 : item.site_allows_bnd;\r\n      return acc + Math.round((value + Number.EPSILON) * 100) / 100;\r\n    }, 0);\r\n\r\n    const totalexpensesclaims = tmpbatch.reduce((acc, item) => {\r\n      const value = isNaN(item.expenses_claims_bnd)\r\n        ? 0\r\n        : item.expenses_claims_bnd;\r\n      return acc + Math.round((value + Number.EPSILON) * 100) / 100;\r\n    }, 0);\r\n\r\n    setPayrundata({\r\n      ...payrundata,\r\n      totalpayroll: totalpayroll,\r\n      totalwages: totalwages,\r\n      totaltap: totaltap,\r\n      totalscp: totalscp,\r\n      totalallows: totalallows,\r\n      totaldeducts: totaldeducts,\r\n      totalsiteallows: totalsiteallows,\r\n      totalexpensesclaims: totalexpensesclaims,\r\n    });\r\n  };\r\n\r\n  const handleSavePayrun = () => {\r\n    if (payrundata.status === \"Verified\" || payrundata.status === \"Approved\") {\r\n      toast({\r\n        title: `This payroll batch has been ${payrundata.status}! No changes can be made!`,\r\n        status: \"warning\",\r\n      });\r\n      return <div></div>;\r\n    }\r\n\r\n    const tmppayrun = payrun.filter((r) => r.payrun === payslip_period);\r\n    //console.log(\"paysave\", tmppayrun[0].id);\r\n    // eslint-disable-next-line no-lone-blocks\r\n    console.log(\"paybatch\", payslip_period, payrundata);\r\n    updatePayrun({\r\n      id: tmppayrun[0].id,\r\n      totalpayroll: payrundata.totalpayroll,\r\n      totalwages: payrundata.totalwages,\r\n      totaltap: payrundata.totaltap,\r\n      totalscp: payrundata.totalscp,\r\n      totalallows: payrundata.totalallows,\r\n      totaldeducts: payrundata.totaldeducts,\r\n      totalsitesallows: payrundata.totalsiteallows,\r\n      totalexpensesclaims: payrundata.totalexpensesclaims,\r\n    });\r\n    history.push(\"/payslip\");\r\n  };\r\n\r\n  const handleVerifyPayslips = (e) => {\r\n    e.preventDefault();\r\n    setPayrundata({ ...payrundata, status: \"Verified\" });\r\n    setPayrunStatus(\"Verified\");\r\n    // save individual payslips\r\n    saveIndividualPayslips();\r\n    // save payrun\r\n    updatePayrun({\r\n      id: payrunId,\r\n      status: \"Verified\",\r\n      totalpayroll: payrundata.totalpayroll,\r\n      totalwages: payrundata.totalwages,\r\n      totaltap: payrundata.totaltap,\r\n      totalscp: payrundata.totalscp,\r\n      totalallows: payrundata.totalallows,\r\n      totaldeducts: payrundata.totaldeducts,\r\n      totalsitesallows: payrundata.totalsiteallows,\r\n      totalexpensesclaims: payrundata.totalexpensesclaims,\r\n    });\r\n    toast({\r\n      title: \"Batch has been verified!\",\r\n      status: \"success\",\r\n    });\r\n  };\r\n\r\n  const handleEmpButtonClick = (index) => {\r\n    const paydata = singlebatchpayslip[index];\r\n    setFormdata(initial_formdata);\r\n    setFormdata({ ...initial_formdata, ...paydata });\r\n    setFormdata({ ...initial_formdata, ...paydata });\r\n    setLoadFormdata(true);\r\n  };\r\n\r\n  const handleTabChange = (index) => {\r\n    setTabno(index);\r\n    if (index === 1) {\r\n      calcPayrunTotals();\r\n    }\r\n    setIsShow(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (tabno === 1) {\r\n      setIsShow(true);\r\n    } else {\r\n      setIsShow(false);\r\n    }\r\n  }, [tabno]);\r\n\r\n  const SentEmailModal = () => {\r\n    return (\r\n      <Box>\r\n        <MaterialTable\r\n          columns={columns}\r\n          data={payslipsbatch}\r\n          title=\"Employees\"\r\n          options={{\r\n            filtering: false,\r\n            search: false,\r\n            toolbar: true,\r\n            selection: true,\r\n            pageSize: 10,\r\n            headerStyle: {\r\n              backgroundColor: \"#daad86\",\r\n              color: \"primary\",\r\n            },\r\n            showTitle: true,\r\n          }}\r\n          components={{\r\n            Toolbar: (props) => (\r\n              <div>\r\n                <MTableToolbar {...props} />\r\n                <div style={{ padding: \"5px 10px\" }}>\r\n                  <Button\r\n                    colorScheme=\"blue\"\r\n                    isDisabled={payrundata.status !== \"Approve\" ? true : false}\r\n                    onClick={() => handleSentEmail()}\r\n                    leftIcon={<FiMail color=\"white\" fontSize=\"1.5em\" />}\r\n                  >\r\n                    Email\r\n                  </Button>\r\n                </div>\r\n              </div>\r\n            ),\r\n          }}\r\n        />\r\n      </Box>\r\n    );\r\n  };\r\n\r\n  const handleSentEmail = (data) => {\r\n    const mth = months[payslip_period.substring(6, 7)];\r\n    const yr = payslip_period.substring(0, 4);\r\n\r\n    payslipsbatch.forEach((pay) => {\r\n      if (pay.tableData.checked) {\r\n        const { name, empid } = pay;\r\n        const emp = employees\r\n          .filter((r) => r.id === empid)\r\n          .map((rec) => {\r\n            return { ...rec };\r\n          });\r\n\r\n        var emaildata = {\r\n          to_name: name,\r\n          to_email: emp[0].email,\r\n          message: `Your payroll for the month of ${mth} ${yr} has been transfered. Please login in to view your payslip!`,\r\n        };\r\n\r\n        emailjs.send(SERVICE_ID, TEMPLATE_ID, emaildata, USER_ID).then(\r\n          function (response) {\r\n            console.log(response.status, response.text);\r\n            toast({\r\n              title: `Email has sent successfully to ${emaildata.to_email}!`,\r\n              status: \"success\",\r\n            });\r\n          },\r\n          function (err) {\r\n            console.log(err);\r\n            toast({\r\n              title: `Email has fail to send to ${emaildata.to_email}!`,\r\n              status: \"warning\",\r\n            });\r\n          }\r\n        );\r\n      }\r\n    });\r\n  };\r\n\r\n  return (\r\n    <Flex\r\n      marginLeft={4}\r\n      marginTop={70}\r\n      w=\"98%\"\r\n      h=\"100%\"\r\n      style={{ backgroundColor: \"lightcyan\" }}\r\n    >\r\n      <Grid templateRows=\"repeat(10,1fr)\" templateColumns=\"repeat(1,1fr)\">\r\n        <GridItem rowSpan={1} colSpan={1}>\r\n          <Grid templateRows=\"repeat(1,1fr)\" templateColumns=\"repeat(10,1fr)\">\r\n            <GridItem rowSpan={1} colSpan={2}></GridItem>\r\n            <GridItem rowSpan={1} colSpan={4}>\r\n              <Box textAlign=\"center\" alignItems=\"center\">\r\n                <Heading pl=\"10\" pt=\"2\">\r\n                  Payroll\r\n                </Heading>\r\n              </Box>\r\n            </GridItem>\r\n            <GridItem rowSpan={1} colSpan={4}>\r\n              <Box pt=\"2\" pr={5} alignItems=\"right\" align=\"right\">\r\n                <Stack spacing={4} direction=\"row\" align=\"center\" pl={150}>\r\n                  <Button\r\n                    width=\"800px\"\r\n                    colorScheme=\"blue\"\r\n                    isDisabled={\r\n                      payrundata.status === \"Verified\" ||\r\n                      payrundata.status === \"Approved\" ||\r\n                      !isShow\r\n                        ? true\r\n                        : false\r\n                    }\r\n                    onClick={(e) => handleSavePayslips(e)}\r\n                    leftIcon={<FiSave color=\"white\" fontSize=\"1.5em\" />}\r\n                  >\r\n                    Save/Exit\r\n                  </Button>\r\n                  <Button\r\n                    isDisabled={!isShow}\r\n                    width=\"500px\"\r\n                    colorScheme=\"blue\"\r\n                    onClick={(e) => handlePrintSummary(e)}\r\n                    leftIcon={<FiSave color=\"white\" fontSize=\"1.5em\" />}\r\n                  >\r\n                    Print\r\n                  </Button>\r\n\r\n                  <Button\r\n                    width=\"500px\"\r\n                    colorScheme=\"blue\"\r\n                    isDisabled={\r\n                      payrundata.status === \"Verified\" ||\r\n                      payrundata.status === \"Approved\" ||\r\n                      payrundata.status === \"New\" ||\r\n                      !isShow\r\n                        ? true\r\n                        : false\r\n                    }\r\n                    onClick={(e) => handleVerifyPayslips(e)}\r\n                    leftIcon={<FiCheckCircle color=\"white\" fontSize=\"1.5em\" />}\r\n                  >\r\n                    Verify\r\n                  </Button>\r\n                  <Button\r\n                    width=\"500px\"\r\n                    colorScheme=\"blue\"\r\n                    isDisabled={payrundata.status !== \"Approved\" ? true : false}\r\n                    onClick={onOpen}\r\n                    leftIcon={<FiMail color=\"white\" fontSize=\"1.5em\" />}\r\n                  >\r\n                    Email\r\n                  </Button>\r\n                </Stack>\r\n              </Box>\r\n            </GridItem>\r\n          </Grid>\r\n          <Divider\r\n            style={{ border: \"1px solid lightgrey\" }}\r\n            orientation=\"horizontal\"\r\n            colorScheme=\"red\"\r\n            variant=\"solid\"\r\n          />\r\n        </GridItem>\r\n\r\n        <Tabs defaultIndex={0} onChange={(index) => handleTabChange(index)}>\r\n          <TabList marginLeft={4}>\r\n            <Tab>\r\n              <Box>\r\n                <Heading size=\"sm\">Details</Heading>\r\n              </Box>\r\n            </Tab>\r\n            <Tab>\r\n              <Box>\r\n                <Heading size=\"sm\">Summary</Heading>\r\n              </Box>\r\n            </Tab>\r\n          </TabList>\r\n          <TabPanels>\r\n            <TabPanel>\r\n              <Grid\r\n                templateRows=\"repeat(1,1fr)\"\r\n                templateColumns=\"repeat(10,1fr)\"\r\n              >\r\n                <GridItem colSpan={2}>\r\n                  <Box textAlign=\"center\" p={4}>\r\n                    <Heading size=\"sm\" alignItems=\"center\">\r\n                      Employees\r\n                    </Heading>\r\n                  </Box>\r\n                  <Divider backgroundColor=\"white\" />\r\n                  <Box border=\"2px solid white\" backgroundColor=\"cyan.100\">\r\n                    {/* {payslipsbatch &&\r\n                      payslipsbatch.map((item, index) => {\r\n                        return (\r\n                          <div>\r\n                            <Button\r\n                              className={classes.empbtn}\r\n                              variant=\"outlined\"\r\n                              // ${index === value && \"activebtn\"}\r\n                              onClick={(e) => {\r\n                                setRowIndex(index);\r\n                                handleEmpButtonClick(index);\r\n                              }}\r\n                            >\r\n                              <div key={item.id}> {item.name}</div>\r\n                            </Button>\r\n                            <Divider\r\n                              variant=\"fullWidth\"\r\n                              className={classes.divider}\r\n                            />\r\n                          </div>\r\n                        );\r\n                      })} */}\r\n                    <Table variant=\"simple\">\r\n                      {/* <Thead>\r\n                        <Tr>\r\n                          <Th>Employees</Th>\r\n                        </Tr>\r\n                      </Thead> */}\r\n                      <Tbody>\r\n                        {payslipsbatch.map((item, index) => {\r\n                          return (\r\n                            <div>\r\n                              <Button\r\n                                className={classes.empbtn}\r\n                                variant=\"outlined\"\r\n                                // ${index === value && \"activebtn\"}\r\n                                onClick={(e) => {\r\n                                  setRowIndex(index);\r\n                                  setIsStart(false);\r\n                                  handleEmpButtonClick(index);\r\n                                }}\r\n                              >\r\n                                <Text isTruncated maxWidth={240}>\r\n                                  {item.name}\r\n                                </Text>\r\n                              </Button>\r\n                              <Divider backgroundColor=\"white\" />\r\n                            </div>\r\n                          );\r\n                        })}\r\n                      </Tbody>\r\n                    </Table>\r\n                  </Box>\r\n                </GridItem>\r\n                <GridItem colSpan={8}>\r\n                  <PayForm\r\n                    formdata={formdata}\r\n                    setFormdata={setFormdata}\r\n                    loadFormdata={loadFormdata}\r\n                    setLoadFormdata={setLoadFormdata}\r\n                    payitems={payitems}\r\n                    setLoadUpdatedata={setLoadUpdatedata}\r\n                    singlebatchpayslip={singlebatchpayslip}\r\n                    rowindex={rowindex}\r\n                    isCalc={isCalc}\r\n                    isStart={isStart}\r\n                    setIsStart={setIsStart}\r\n                    setIsCalc={setIsCalc}\r\n                  />\r\n                </GridItem>\r\n              </Grid>\r\n            </TabPanel>\r\n            <TabPanel>\r\n              <PaySummary\r\n                payrundata={payrundata}\r\n                singlebatchpayslip={singlebatchpayslip}\r\n              />\r\n            </TabPanel>\r\n          </TabPanels>\r\n        </Tabs>\r\n      </Grid>\r\n      <Modal isOpen={isOpen} onClose={onClose}>\r\n        <ModalOverlay />\r\n        <ModalContent>\r\n          {/* <ModalHeader>Sending EMail Notifications</ModalHeader> */}\r\n          <ModalCloseButton />\r\n          <ModalBody>\r\n            <SentEmailModal />\r\n          </ModalBody>\r\n\r\n          <ModalFooter>\r\n            <Button colorScheme=\"blue\" mr={3} onClick={onClose}>\r\n              Close\r\n            </Button>\r\n          </ModalFooter>\r\n        </ModalContent>\r\n      </Modal>\r\n    </Flex>\r\n  );\r\n};\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    flexGrow: 1,\r\n  },\r\n  button: {\r\n    margin: theme.spacing(1),\r\n  },\r\n  container: {\r\n    margin: 0,\r\n    padding: 0,\r\n    width: \"80vw\",\r\n    display: \"grid\",\r\n    gridTemplateColumns: \"repeat(auto-fill,250px)\",\r\n    gridAutoRows: \"10px\",\r\n    position: \"absolute\",\r\n    left: \"50%\",\r\n    transform: \"translateX(-50%)\",\r\n    justifyContent: \"center\",\r\n    backgroundColor: \"primary\",\r\n  },\r\n  fixedHeight: {\r\n    height: 800,\r\n  },\r\n  paper: {\r\n    paddingTop: theme.spacing(10),\r\n    // display: \"flex\",\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    border: \"1px solid\",\r\n    width: \"100%\",\r\n    color: \"primary\",\r\n    bcakgroundColor: \"white\",\r\n  },\r\n  card: {\r\n    backgroundColor: \"white\",\r\n  },\r\n  section: {\r\n    width: \"80vw\",\r\n    margin: \"1rem auto\",\r\n    maxWidth: \"var(--max-width)\",\r\n  },\r\n  underline: {\r\n    width: \"5rem\",\r\n    height: \"0.25rem\",\r\n    marginBottom: \"1.25rem\",\r\n    background: \"var(--clr-primary-5)\",\r\n    marginLeft: \"auto\",\r\n    marginRight: \"auto\",\r\n  },\r\n  title: {\r\n    marginbottom: \"4rem\",\r\n    textAlign: \"center\",\r\n  },\r\n  empscenter: {\r\n    width: \"80vw\",\r\n    margin: \"0 auto\",\r\n    maxWidth: \"var(--max-width)\",\r\n    flexDirection: \"row\",\r\n  },\r\n  empcontainer: {\r\n    display: \"flex\",\r\n    flexDirection: \"row\",\r\n    justifyContent: \"center\",\r\n    marginBottom: \"4rem\",\r\n    flexWrap: \"wrap\",\r\n  },\r\n  empbtn: {\r\n    background: \"transparent\",\r\n    borderColor: \"transparent\",\r\n    textTransform: \"capitalize\",\r\n    fontSize: \"1rem\",\r\n    letterSpacing: \"var(--spacing)\",\r\n    margin: \"0 0.5rem\",\r\n    transition: \"var(--transition)\",\r\n    cursor: \"pointer\",\r\n    padding: \"0.25rem 0\",\r\n    lineHeight: \"1\",\r\n    outlineColor: \"var(--clr-primary-10)\",\r\n    \"&:hover\": {\r\n      color: \"var(--clr-primary-5)\",\r\n      boxShadow: \"0 2px var(--clr-primary-5)\",\r\n    },\r\n  },\r\n  activebtn: {\r\n    color: \"var(--clr-primary-5)\",\r\n    boxShadow: \"0 2px var(--clr-primary-5)\",\r\n  },\r\n  empinfo: {\r\n    fontWeight: \"400\",\r\n  },\r\n  divider: {\r\n    // Theme Color, or use css color in quote\r\n    background: \"white\",\r\n  },\r\n  textField: {\r\n    marginLeft: theme.spacing(1),\r\n    marginRight: theme.spacing(1),\r\n    width: 350,\r\n  },\r\n}));\r\n\r\nexport default Payrunbatch;\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('react'), require('prop-types'), require('moment'), require('moment-range'), require('react-dom')) : typeof define === 'function' && define.amd ? define(['react', 'prop-types', 'moment', 'moment-range', 'react-dom'], factory) : (global = global || self, global.dayz = factory(global.React, global.PropTypes, global.moment, global['moment-range'], global.ReactDOM));\n})(this, function (React, PropTypes, moment$2, momentRange, ReactDOM) {\n  'use strict';\n\n  React = React && React.hasOwnProperty('default') ? React['default'] : React;\n  PropTypes = PropTypes && PropTypes.hasOwnProperty('default') ? PropTypes['default'] : PropTypes;\n  moment$2 = moment$2 && moment$2.hasOwnProperty('default') ? moment$2['default'] : moment$2;\n  ReactDOM = ReactDOM && ReactDOM.hasOwnProperty('default') ? ReactDOM['default'] : ReactDOM;\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _extends() {\n    _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(source, true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(source).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  var moment = require('moment'); // an event duration describes how an event is displayed.\n  // A event may be split into one or more durations in order to be split across week boundaries\n\n\n  class EventDuration {\n    constructor(layout, event, displayRange) {\n      this.layout = layout;\n      this.event = event;\n      this.stack = 0;\n      this.displayRange = displayRange;\n      this.startsBefore = event.start.isBefore(displayRange.start);\n      this.endsAfter = event.end.isAfter(displayRange.end);\n\n      if (this.layout.isDisplayingAsMonth) {\n        this.range = moment.range(moment.max(displayRange.start, event.start.startOf('day')), moment.min(displayRange.end, event.end.endOf('day')));\n      } else {\n        this.range = moment.range(moment.max(displayRange.start, event.start), moment.min(displayRange.end, event.end));\n      }\n\n      this.span = Math.max(1, Math.ceil(this.range.end.diff(this.range.start, 'day', true)));\n    }\n\n    isEditing() {\n      return this.first && this.event.isEditing();\n    }\n\n    startsOnWeek() {\n      return 0 === this.event.start.weekday();\n    }\n\n    adjustEventTime(startOrEnd, position, height) {\n      if (position < 0 || position > height) {\n        return;\n      }\n\n      var time = this.event[startOrEnd].startOf('day').add(this.layout.displayHours[0], 'hours').add(this.layout.minutesInDay() * (position / height), 'minutes');\n      var {\n        step\n      } = this.event.get('resizable');\n\n      if (step) {\n        var rounded = Math.round(time.minute() / step) * step;\n        time.minute(rounded).second(0);\n      }\n\n      this.event.emit('change');\n    }\n\n    inlineStyles() {\n      if ('month' === this.layout.displayingAs() || !this.event.isSingleDay()) {\n        return {};\n      }\n\n      var {\n        start,\n        end\n      } = this.event.daysMinuteRange();\n      var startOffset = this.layout.displayHours[0] * 60;\n      var endOffset = this.layout.displayHours[1] * 60;\n      start = Math.max(start - startOffset, 0);\n      end = Math.min(end, endOffset) - startOffset;\n      var inday = this.layout.minutesInDay();\n      var top = \"\".concat((start / inday * 100).toFixed(2), \"%\");\n      var bottom = \"\".concat((100 - end / inday * 100).toFixed(2), \"%\");\n      return {\n        top,\n        bottom\n      };\n    }\n\n    isResizable() {\n      return this.layout.displayingAs() !== 'month' && this.event.get('resizable');\n    }\n\n    key() {\n      return this.displayRange.start.format('YYYYMMDD') + this.event.key;\n    }\n\n    setIsResizing(val) {\n      this.isResizing = val;\n    }\n\n    classNames() {\n      var classes = ['event', \"span-\".concat(this.span)];\n\n      if (this.event.colorIndex) {\n        classes.push(\"color-\".concat(this.event.colorIndex));\n      }\n\n      if (this.isResizing) classes.push('is-resizing');\n      if (this.startsBefore) classes.push('is-continuation');\n      if (this.endsAfter) classes.push('is-continued');\n      if (this.stack) classes.push(\"stack-\".concat(this.stack));\n      if (this.isEditing()) classes.push('is-editing');\n      if (this.isResizable()) classes.push('is-resizable');\n\n      if (this.event.className) {\n        classes.push(this.event.className);\n      }\n\n      return classes.join(' ');\n    }\n\n  }\n\n  var C = {\n    eventHeight: 20 // px\n\n  };\n  var moment$1 = momentRange.extendMoment(moment$2);\n\n  var Emitter = require('tiny-emitter');\n\n  var EVENT_COUNTER = 1;\n\n  class Event {\n    constructor(attributes) {\n      this.attributes = attributes;\n      this.isEvent = true;\n      EVENT_COUNTER += 1;\n      this.key = EVENT_COUNTER;\n\n      if (!this.attributes.range) {\n        throw new Error('Must provide range');\n      }\n    }\n\n    render() {\n      if (this.attributes.render) {\n        return this.attributes.render({\n          event: this\n        });\n      }\n\n      return this.defaultRenderImplementation();\n    }\n\n    defaultRenderImplementation() {\n      return React.createElement('div', {}, this.attributes.content || this.attributes.range.start.format('MMM DD YYYY'));\n    }\n\n    get(key) {\n      return this.attributes[key];\n    }\n\n    set(attributes, options) {\n      var changed = false;\n      var keys = Object.keys(attributes);\n\n      for (var i = 0; i < keys.length; i++) {\n        var key = keys[i];\n\n        if (this.attributes[key] !== attributes[key]) {\n          changed = true;\n          break;\n        }\n      }\n\n      if (!changed) {\n        return;\n      }\n\n      Object.assign(this.attributes, attributes);\n      this.emitChangeEvent(options);\n    }\n\n    isEditing() {\n      return !!this.attributes.editing;\n    }\n\n    setEditing(isEditing) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (isEditing !== this.isEditing()) {\n        this.attributes.editing = isEditing;\n      }\n\n      this.emitChangeEvent(options);\n    }\n\n    emitChangeEvent() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (this.collection) {\n        this.collection.emit('change', this);\n      }\n\n      if (!options || !options.silent) {\n        this.emit('change', this);\n      }\n    }\n\n    range() {\n      return this.attributes.range.clone();\n    }\n\n    isSingleDay() {\n      var maxDiff = this.attributes.range.start.isDST() ? 25 : 24;\n      return maxDiff > this.attributes.range.end.diff(this.attributes.range.start, 'hours');\n    }\n\n    daysMinuteRange() {\n      var startOfDay = this.attributes.range.start.clone().startOf('day');\n      return {\n        start: this.attributes.range.start.diff(startOfDay, 'minute'),\n        end: this.attributes.range.end.diff(startOfDay, 'minute')\n      };\n    }\n\n    get content() {\n      return this.attributes.content;\n    }\n\n    get start() {\n      return this.attributes.range.start;\n    }\n\n    get end() {\n      return this.attributes.range.end;\n    }\n\n    get colorIndex() {\n      return this.attributes.colorIndex || 0;\n    }\n\n    get className() {\n      return this.attributes.className || '';\n    }\n\n    remove() {\n      this.collection.remove(this);\n      this.isDeleted = true;\n      this.emit('change');\n    }\n\n  }\n\n  Object.assign(Event.prototype, Emitter.prototype);\n\n  var Emitter$1 = require('tiny-emitter');\n\n  var lc = event => event.attributes.range.start.diff(event.attributes.range.end);\n\n  var sortEvents = (eventA, eventB) => {\n    var a = lc(eventA);\n    var b = lc(eventB);\n    return a < b ? -1 : a > b ? 1 : 0; // eslint-disable-line no-nested-ternary\n  };\n\n  class EventsCollection {\n    constructor() {\n      var _this = this;\n\n      var events = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        displayAllDay: true,\n        displayLabelForAllDays: true\n      };\n      this.events = [];\n\n      var _loop = function _loop(i, length) {\n        if (options.displayAllDay) {\n          _this.add(events[i], {\n            silent: true\n          });\n        } else {\n          Array.from(events[i].range.snapTo('days').by('day')).map((date, j) => {\n            if (false === options.displayLabelForAllDays && j > 0) {\n              events[i].content = ' ';\n            }\n\n            return _this.add(events[i], {\n              silent: true,\n              eventDay: date.clone()\n            });\n          });\n        }\n      };\n\n      for (var i = 0, {\n        length\n      } = events; i < length; i += 1) {\n        _loop(i);\n      }\n    }\n\n    add(eventAttrs) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var attrs = this.prepareEventAttributes(eventAttrs, options.eventDay);\n      var event = eventAttrs instanceof Event ? eventAttrs : new Event(attrs);\n      event.collection = this;\n      this.events.push(event);\n\n      if (!options.silent) {\n        this.emit('change');\n      }\n\n      return event;\n    }\n\n    prepareEventAttributes(eventAttrs, eventDay) {\n      if (eventDay === undefined) {\n        return eventAttrs;\n      }\n\n      var attrs = _objectSpread2({}, eventAttrs);\n\n      var rangeEnd = moment$1.min(attrs.range.end, eventDay.endOf('day')).toDate();\n      var rangeStart = moment$1.max(attrs.range.start, eventDay.startOf('day')).toDate();\n      var range = {\n        range: moment$1.range(rangeStart, rangeEnd)\n      };\n      return _objectSpread2({}, attrs, {}, range);\n    }\n\n    forEach(fn) {\n      this.events.sort(sortEvents).forEach(fn);\n    }\n\n    get length() {\n      return this.events.length;\n    }\n\n    at(i) {\n      return this.events[i];\n    }\n\n    remove(event) {\n      var index = this.events.indexOf(event);\n\n      if (-1 !== index) {\n        this.events.splice(index, 1);\n        this.emit('change');\n      }\n    }\n\n  }\n\n  EventsCollection.Event = Event;\n  Object.assign(EventsCollection.prototype, Emitter$1.prototype);\n\n  function cacheKey(day) {\n    return day.format('YYYYMMDD');\n  }\n\n  function highlightedDaysFinder(days) {\n    var highlighted = Object.create(null);\n    days.forEach(d => {\n      highlighted[cacheKey(moment$1(d))] = true;\n    });\n    return day => highlighted[cacheKey(day)] ? 'highlight' : false;\n  } // a layout describes how the calendar is displayed.\n\n\n  class Layout {\n    constructor(options) {\n      this.cache = Object.create(null);\n      options.date = moment$1(options.date);\n      Object.assign(this, options);\n      var cacheMethod = 'day' === this.display ? 'addtoDaysCache' : 'calculateDurations';\n      this.calculateRange();\n\n      if (!this.isDisplayingAsMonth && !this.displayHours) {\n        this.displayHours = this.hourRange();\n      } else {\n        this.displayHours = this.displayHours || [0, 24];\n      }\n\n      if (options.highlightDays) {\n        this.isDayHighlighted = 'function' === typeof options.highlightDays ? options.highlightDays : highlightedDaysFinder(options.highlightDays);\n      }\n\n      var multiDayCount = 0;\n\n      if (!this.events) {\n        this.events = new EventsCollection();\n      }\n\n      var {\n        range\n      } = this;\n      this.events.forEach(event => {\n        // we only care about events that are in the range we were provided\n        if (range.overlaps(event.range())) {\n          this[cacheMethod](event);\n\n          if (!event.isSingleDay()) {\n            multiDayCount += 1;\n          }\n        }\n      });\n      this.multiDayCount = multiDayCount;\n      this.calculateStacking();\n    }\n\n    calculateRange() {\n      if (this.range) {\n        return;\n      }\n\n      var start = moment$1(this.date).locale(this.locale);\n      var end = moment$1(this.date).locale(this.locale);\n\n      if ('week' === this.display) {\n        if (this.weekStartsOn !== undefined) {\n          start.startOf('isoWeek');\n          end.endOf('isoWeek');\n\n          if (0 === this.weekStartsOn && 1 === start.isoWeekday()) {\n            start.subtract(1, 'day');\n            end.subtract(1, 'day');\n          }\n        } else {\n          start.startOf(this.display);\n          end.endOf(this.display);\n        }\n      } else {\n        start.startOf(this.display);\n        end.endOf(this.display);\n      }\n\n      this.range = moment$1.range(start, end);\n\n      if (this.isDisplayingAsMonth) {\n        var startWeekday;\n        var maxWeekday = 6;\n\n        if (this.weekStartsOn !== undefined) {\n          startWeekday = this.range.start.isoWeekday();\n\n          if (1 === this.weekStartsOn) {\n            startWeekday -= 1;\n            maxWeekday += 1;\n          }\n        } else {\n          startWeekday = this.range.start.weekday();\n        }\n\n        this.range.start.subtract(startWeekday, 'days');\n        this.range.end.add(maxWeekday - this.range.end.isoWeekday(), 'days');\n      }\n    }\n\n    minutesInDay() {\n      return (this.displayHours[1] - this.displayHours[0]) * 60;\n    }\n\n    propsForDayContainer(_ref) {\n      var {\n        day,\n        position\n      } = _ref;\n      var classes = ['day'];\n      var date = moment$1(day);\n\n      if (moment$1(date).isBefore(this.date)) {\n        classes.push('before');\n      } else if (moment$1(date).isAfter(this.date)) {\n        classes.push('after');\n      } else {\n        classes.push('current');\n      }\n\n      if (this.isDateOutsideRange(date)) {\n        classes.push('outside');\n      }\n\n      var higlight = this.isDayHighlighted(date, this);\n\n      if (higlight) {\n        classes.push(higlight);\n      }\n\n      var handlers = {};\n      Object.keys(this.dayEventHandlers || {}).forEach(k => {\n        handlers[k] = ev => this.dayEventHandlers[k](date, ev);\n      });\n      return _objectSpread2({\n        className: classes.join(' '),\n        'data-date': cacheKey(day),\n        style: {\n          order: position\n        }\n      }, handlers);\n    }\n\n    propsForAllDayEventContainer() {\n      var style = this.multiDayCount ? {\n        flexBasis: this.multiDayCount * C.eventHeight\n      } : {\n        display: 'none'\n      };\n      return {\n        className: 'all-day',\n        style\n      };\n    }\n\n    hourRange() {\n      var range = [7, 19];\n      Array.from(this.range.by('days')).forEach(day => {\n        this.forDay(day).forEach(duration => {\n          range[0] = Math.min(duration.event.start.hour(), range[0]);\n          range[1] = Math.max(duration.event.end.hour(), range[1]);\n        });\n      });\n      range[1] += 1;\n      return range;\n    }\n\n    getEventsForWeek(start) {\n      var day = start.clone();\n      var weeklyEvents = [];\n\n      for (var i = 0; i < 7; i++) {\n        var durations = this.forDay(day);\n\n        for (var li = 0, {\n          length\n        } = durations; li < length; li += 1) {\n          weeklyEvents.push(durations[li]);\n        }\n\n        day.add(1, 'day');\n      }\n\n      var minLong = range => moment$1.max(start, range.start).diff(moment$1.min(day, range.end), 'minutes');\n\n      return weeklyEvents.sort((al, bl) => {\n        var a = minLong(al.event.range());\n        var b = minLong(bl.event.range());\n        return a === b ? 0 : a > b ? 1 : -1; // eslint-disable-line no-nested-ternary\n      });\n    }\n\n    calculateStacking() {\n      var firstOfWeek = this.range.start.clone().startOf('week');\n\n      do {\n        var weeklyEvents = this.getEventsForWeek(firstOfWeek);\n\n        for (var durationIndex = 0; durationIndex < weeklyEvents.length; durationIndex++) {\n          var duration = weeklyEvents[durationIndex]; // loop through each duration that is before this one\n\n          var ceilingIndex = 0;\n\n          for (var pi = durationIndex - 1; pi >= 0; pi--) {\n            var prevDuration = weeklyEvents[pi];\n\n            if (prevDuration.range.start.isSame(duration.range.start, 'd')) {\n              ceilingIndex = pi + 1;\n              break;\n            }\n          }\n\n          for (var _pi = ceilingIndex; _pi < durationIndex; _pi++) {\n            var _prevDuration = weeklyEvents[_pi];\n\n            if (duration.range.overlaps(_prevDuration.range)) {\n              duration.stack += 1;\n            }\n          }\n        }\n\n        firstOfWeek.add(7, 'day');\n      } while (!firstOfWeek.isAfter(this.range.end));\n    } // This is the default implementation.\n    // It will be overwritten if highlightDays option is provided\n\n\n    isDayHighlighted() {\n      return false;\n    }\n\n    isDateOutsideRange(date) {\n      return this.isDisplayingAsMonth && !this.date.isSame(date, 'month');\n    }\n\n    forDay(day) {\n      return this.cache[cacheKey(day)] || [];\n    } // a single day is easy, just add the event to that day\n\n\n    addtoDaysCache(event) {\n      var duration = new EventDuration(this, event, this.range);\n      this.addToCache(this.range.start, duration);\n    } // other durations must break at week boundaries, with indicators if they were/are continuing\n\n\n    calculateDurations(event) {\n      var end = moment$1.min(this.range.end, event.range().end);\n      var start = moment$1.max(this.range.start, event.range().start).clone();\n\n      do {\n        var range = moment$1.range(start, start.clone().endOf('week'));\n        var duration = new EventDuration(this, event, range);\n        this.addToCache(start, duration); // go to first day of next week\n\n        start.add(7 - start.weekday(), 'day');\n      } while (!start.isAfter(end));\n    }\n\n    addToCache(date, duration) {\n      var found = false;\n      var keys = Object.keys(this.cache);\n\n      for (var i = 0; i < keys.length; i++) {\n        var key = keys[i];\n\n        if (this.cache[key].event === duration.event) {\n          found = true;\n          break;\n        }\n      }\n\n      if (!found) {\n        duration.first = true; // eslint-disable-line no-param-reassign\n      }\n\n      var dayCache = this.cache[cacheKey(date)] || (this.cache[cacheKey(date)] = []);\n      dayCache.push(duration);\n    }\n\n    displayingAs() {\n      return this.display;\n    }\n\n    get isDisplayingAsMonth() {\n      return 'month' === this.display;\n    }\n\n  }\n\n  var IsResizeClass = new RegExp('(\\\\s|^)event(\\\\s|$)');\n\n  class Event$1 extends React.Component {\n    constructor(props) {\n      super(props);\n      ['onClick', 'onDoubleClick', 'onDoubleClick', 'onDragStart'].forEach(ev => {\n        this[ev] = this[ev].bind(this);\n      });\n    }\n\n    onClick(ev) {\n      if (!this.props.onClick) {\n        return;\n      }\n\n      this.props.onClick(ev, this.props.duration.event);\n      ev.stopPropagation();\n    }\n\n    onDoubleClick(ev) {\n      if (!this.props.onDoubleClick) {\n        return;\n      }\n\n      this.props.onDoubleClick(ev, this.props.duration.event);\n      ev.stopPropagation();\n    }\n\n    onDragStart(ev) {\n      if (!IsResizeClass.test(ev.target.className)) {\n        return;\n      }\n\n      var bounds = ReactDOM.findDOMNode(this.refs.element).getBoundingClientRect();\n      var resize;\n\n      if (ev.clientY - bounds.top < 10) {\n        resize = {\n          type: 'start'\n        };\n      } else if (bounds.bottom - ev.clientY < 10) {\n        resize = {\n          type: 'end'\n        };\n      } else {\n        return;\n      }\n\n      this.props.onDragStart(resize, this.props.duration);\n    }\n\n    render() {\n      var body = React.createElement(\"div\", {\n        className: \"evbody\",\n        onClick: this.onClick\n      }, this.props.duration.event.render());\n      var Edit = this.props.editComponent;\n      var children = this.props.duration.isEditing() ? React.createElement(Edit, {\n        event: this.props.duration.event\n      }, body) : body;\n      return React.createElement(\"div\", {\n        ref: \"element\",\n        onMouseDown: this.onDragStart,\n        style: this.props.duration.inlineStyles(),\n        className: this.props.duration.classNames()\n      }, children);\n    }\n\n  }\n\n  Event$1.propTypes = {\n    duration: PropTypes.instanceOf(EventDuration),\n    editComponent: PropTypes.func,\n    onClick: PropTypes.func,\n    onDoubleClick: PropTypes.func\n  };\n\n  var Label = _ref => {\n    var {\n      day\n    } = _ref;\n    return React.createElement(\"div\", {\n      className: \"label\"\n    }, day.format('D'));\n  };\n\n  Label.propTypes = {\n    day: PropTypes.object.isRequired\n  };\n  var IsDayClass = new RegExp('(\\\\s|^)(events|day|label)(\\\\s|$)');\n\n  class Day extends React.Component {\n    constructor() {\n      super();\n      this.state = {\n        resize: false\n      };\n      ['onClick', 'onDoubleClick', 'onMouseMove', 'onMouseUp', 'onDragStart'].forEach(ev => {\n        this[ev] = this[ev].bind(this);\n      });\n    }\n\n    get boundingBox() {\n      return ReactDOM.findDOMNode(this.refs.events || this.refs.root).getBoundingClientRect();\n    }\n\n    onClickHandler(ev, handler) {\n      if (!handler || !IsDayClass.test(ev.target.className) || this.lastMouseUp && this.lastMouseUp < new Date().getMilliseconds() + 100) {\n        return;\n      }\n\n      this.lastMouseUp = 0;\n      var bounds = this.boundingBox;\n      var perc = Math.max(0.0, (ev.clientY - bounds.top) / ev.target.offsetHeight);\n      var hours = this.props.layout.displayHours[0] + this.props.layout.minutesInDay() * perc / 60;\n      handler.call(this, ev, this.props.day.clone().startOf('day').add(hours, 'hour'));\n    }\n\n    onClick(ev) {\n      this.onClickHandler(ev, this.props.handlers.onClick);\n    }\n\n    onDoubleClick(ev) {\n      this.onClickHandler(ev, this.props.handlers.onDoubleClick);\n    }\n\n    onDragStart(resize, eventLayout) {\n      eventLayout.setIsResizing(true);\n      var bounds = this.boundingBox;\n      Object.assign(resize, {\n        eventLayout,\n        height: bounds.height,\n        top: bounds.top\n      });\n      this.setState({\n        resize\n      });\n    }\n\n    onMouseMove(ev) {\n      if (!this.state.resize) {\n        return;\n      }\n\n      var coord = ev.clientY - this.state.resize.top;\n      this.state.resize.eventLayout.adjustEventTime(this.state.resize.type, coord, this.state.resize.height);\n      this.forceUpdate();\n    }\n\n    onMouseUp(ev) {\n      if (!this.state.resize) {\n        return;\n      }\n\n      this.state.resize.eventLayout.setIsResizing(false);\n      setTimeout(() => this.setState({\n        resize: false\n      }), 1);\n\n      if (this.props.onEventResize) {\n        this.props.onEventResize(ev, this.state.resize.eventLayout.event);\n      }\n\n      this.lastMouseUp = new Date().getMilliseconds();\n    }\n\n    renderEvents() {\n      var asMonth = this.props.layout.isDisplayingAsMonth;\n      var singleDayEvents = [];\n      var allDayEvents = [];\n      var onMouseMove = asMonth ? null : this.onMouseMove;\n      this.props.layout.forDay(this.props.day).forEach(duration => {\n        var event = React.createElement(Event$1, {\n          duration: duration,\n          key: duration.key(),\n          day: this.props.day,\n          parent: this,\n          onDragStart: this.onDragStart,\n          onClick: this.props.onEventClick,\n          editComponent: this.props.editComponent,\n          onDoubleClick: this.props.onEventDoubleClick\n        });\n        (duration.event.isSingleDay() ? singleDayEvents : allDayEvents).push(event);\n      });\n      var events = [];\n\n      if (allDayEvents.length || !asMonth) {\n        events.push(React.createElement(\"div\", _extends({\n          key: \"allday\"\n        }, this.props.layout.propsForAllDayEventContainer()), allDayEvents));\n      }\n\n      if (singleDayEvents.length) {\n        events.push(React.createElement(\"div\", {\n          key: \"events\",\n          ref: \"events\",\n          className: \"events\",\n          onMouseMove: onMouseMove,\n          onMouseUp: this.onMouseUp\n        }, singleDayEvents));\n      }\n\n      return events;\n    }\n\n    render() {\n      var props = this.props.layout.propsForDayContainer(this.props);\n      return React.createElement(\"div\", _extends({\n        ref: \"root\"\n      }, props, {\n        onClick: this.onClick,\n        onDoubleClick: this.onDoubleClick\n      }), React.createElement(Label, {\n        day: this.props.day,\n        className: \"label\"\n      }, this.props.day.format('D')), this.renderEvents());\n    }\n\n  }\n\n  Day.propTypes = {\n    day: PropTypes.object.isRequired,\n    layout: PropTypes.instanceOf(Layout).isRequired,\n    handlers: PropTypes.object,\n    position: PropTypes.number.isRequired,\n    highlight: PropTypes.func,\n    onEventClick: PropTypes.func,\n    onEventResize: PropTypes.func,\n    editComponent: PropTypes.func,\n    onEventDoubleClick: PropTypes.func\n  };\n  Day.defaultProps = {\n    handlers: {}\n  };\n\n  class XLabels extends React.Component {\n    get days() {\n      var days = [];\n\n      if ('day' === this.props.display) {\n        days.push(moment$2(this.props.date));\n      } else {\n        var startOfType = 'week';\n        var day = moment$2(this.props.date).locale(this.props.locale);\n\n        if (this.props.weekStartsOn !== undefined) {\n          startOfType = 'isoWeek';\n          day.startOf(startOfType);\n\n          if (0 === this.props.weekStartsOn && 1 === day.isoWeekday()) {\n            day.subtract(1, 'day');\n          }\n        } else {\n          day.startOf(startOfType);\n        }\n\n        for (var i = 0; i < 7; i += 1) {\n          days.push(day.clone().add(i, 'day'));\n        }\n      }\n\n      return days;\n    }\n\n    get dateFormat() {\n      var defaultFormat = 'month' === this.props.display ? 'dddd' : 'ddd, MMM Do';\n      return this.props.dateFormat || defaultFormat;\n    }\n\n    render() {\n      return React.createElement(\"div\", {\n        className: \"x-labels\"\n      }, this.days.map(day => React.createElement(\"div\", {\n        key: day.format('YYYYMMDD'),\n        className: \"day-label\"\n      }, day.locale(this.props.locale).format(this.dateFormat))));\n    }\n\n  }\n\n  XLabels.propTypes = {\n    display: PropTypes.oneOf(['month', 'week', 'day']),\n    date: PropTypes.object.isRequired,\n    dateFormat: PropTypes.string,\n    locale: PropTypes.string.isRequired,\n    weekStartsOn: PropTypes.oneOf([0, 1])\n  };\n\n  class YLabels extends React.Component {\n    get hours() {\n      var [start, end] = this.props.layout.displayHours;\n      return Array(end - start).fill().map((_, i) => i + start);\n    }\n\n    renderLabels() {\n      var day = moment$1().startOf('hour');\n      return this.hours.map(hour => React.createElement(\"div\", {\n        key: hour,\n        className: \"hour\"\n      }, day.hour(hour).format(this.props.timeFormat)));\n    }\n\n    render() {\n      if ('month' === this.props.display) {\n        return null;\n      }\n\n      return React.createElement(\"div\", null, React.createElement(\"div\", {\n        className: \"y-labels\"\n      }, React.createElement(\"div\", this.props.layout.propsForAllDayEventContainer(), \"All Day\"), this.renderLabels()));\n    }\n\n  }\n\n  YLabels.propTypes = {\n    display: PropTypes.oneOf(['month', 'week', 'day']).isRequired,\n    date: PropTypes.object.isRequired,\n    layout: PropTypes.instanceOf(Layout).isRequired,\n    timeFormat: PropTypes.string\n  };\n  YLabels.defaultProps = {\n    timeFormat: 'ha'\n  };\n\n  class Dayz extends React.Component {\n    constructor(props) {\n      super(props);\n      this.layoutFromProps();\n    }\n\n    componentDidUpdate(prevProps) {\n      // don't calculate layout if update is due to state change\n      if (prevProps !== this.props) {\n        this.layoutFromProps();\n        this.forceUpdate();\n      }\n    }\n\n    componentWillUnmount() {\n      this.detachEventBindings();\n    }\n\n    detachEventBindings() {\n      if (this.props.events) {\n        this.props.events.off('change', this.onEventAdd);\n      }\n    }\n\n    onEventsChange() {\n      this.forceUpdate();\n    }\n\n    layoutFromProps() {\n      var {\n        props\n      } = this;\n\n      if (this.props && props.events) {\n        this.detachEventBindings();\n        props.events.on('change', this.onEventsChange, this);\n      }\n\n      this.layout = new Layout(Object.assign({}, props));\n    }\n\n    get days() {\n      return Array.from(this.layout.range.by('days'));\n    }\n\n    renderDays() {\n      return this.days.map((day, index) => React.createElement(Day, {\n        key: day.format('YYYYMMDD'),\n        day: day,\n        position: index,\n        layout: this.layout,\n        editComponent: this.props.editComponent,\n        handlers: this.props.dayEventHandlers,\n        eventHandlers: this.props.eventHandlers,\n        onEventClick: this.props.onEventClick,\n        onEventResize: this.props.onEventResize\n      }));\n    }\n\n    render() {\n      var classes = ['dayz', this.props.display];\n      return React.createElement(\"div\", {\n        className: classes.join(' ')\n      }, React.createElement(XLabels, {\n        date: this.props.date,\n        display: this.props.display,\n        dateFormat: this.props.dateFormat,\n        locale: this.props.locale,\n        weekStartsOn: this.props.weekStartsOn\n      }), React.createElement(\"div\", {\n        className: \"body\"\n      }, React.createElement(YLabels, {\n        layout: this.layout,\n        display: this.props.display,\n        date: this.props.date,\n        timeFormat: this.props.timeFormat\n      }), React.createElement(\"div\", {\n        className: \"days\"\n      }, this.renderDays(), this.props.children)));\n    }\n\n  }\n\n  Dayz.EventsCollection = EventsCollection;\n  Dayz.propTypes = {\n    date: PropTypes.object.isRequired,\n    events: PropTypes.instanceOf(EventsCollection),\n    display: PropTypes.oneOf(['month', 'week', 'day']),\n    timeFormat: PropTypes.string,\n    dateFormat: PropTypes.string,\n    displayHours: PropTypes.array,\n    onEventClick: PropTypes.func,\n    editComponent: PropTypes.func,\n    onEventResize: PropTypes.func,\n    dayEventHandlers: PropTypes.object,\n    locale: PropTypes.string,\n    highlightDays: PropTypes.oneOfType([PropTypes.array, PropTypes.func]),\n    weekStartsOn: PropTypes.oneOf([0, 1])\n  };\n  Dayz.defaultProps = {\n    display: 'month',\n    locale: 'en'\n  };\n  return Dayz;\n});","map":{"version":3,"sources":["D:/react-myprojects/hrms-airtable/node_modules/dayz/dist/dayz.js"],"names":["global","factory","exports","module","require","define","amd","self","dayz","React","PropTypes","moment","ReactDOM","moment$2","momentRange","hasOwnProperty","_defineProperty","obj","key","value","Object","defineProperty","enumerable","configurable","writable","_extends","assign","target","i","arguments","length","source","prototype","call","apply","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","push","_objectSpread2","forEach","getOwnPropertyDescriptors","defineProperties","EventDuration","constructor","layout","event","displayRange","stack","startsBefore","start","isBefore","endsAfter","end","isAfter","isDisplayingAsMonth","range","max","startOf","min","endOf","span","Math","ceil","diff","isEditing","first","startsOnWeek","weekday","adjustEventTime","startOrEnd","position","height","time","add","displayHours","minutesInDay","step","get","rounded","round","minute","second","emit","inlineStyles","displayingAs","isSingleDay","daysMinuteRange","startOffset","endOffset","inday","top","concat","toFixed","bottom","isResizable","format","setIsResizing","val","isResizing","classNames","classes","colorIndex","className","join","C","eventHeight","moment$1","extendMoment","Emitter","EVENT_COUNTER","Event","attributes","isEvent","Error","render","defaultRenderImplementation","createElement","content","set","options","changed","emitChangeEvent","editing","setEditing","undefined","collection","silent","clone","maxDiff","isDST","startOfDay","remove","isDeleted","Emitter$1","lc","sortEvents","eventA","eventB","a","b","EventsCollection","_this","events","displayAllDay","displayLabelForAllDays","_loop","Array","from","snapTo","by","map","date","j","eventDay","eventAttrs","attrs","prepareEventAttributes","rangeEnd","toDate","rangeStart","fn","sort","at","index","indexOf","splice","cacheKey","day","highlightedDaysFinder","days","highlighted","create","d","Layout","cache","cacheMethod","display","calculateRange","hourRange","highlightDays","isDayHighlighted","multiDayCount","overlaps","calculateStacking","locale","weekStartsOn","isoWeekday","subtract","startWeekday","maxWeekday","propsForDayContainer","_ref","isDateOutsideRange","higlight","handlers","dayEventHandlers","k","ev","style","order","propsForAllDayEventContainer","flexBasis","forDay","duration","hour","getEventsForWeek","weeklyEvents","durations","li","minLong","al","bl","firstOfWeek","durationIndex","ceilingIndex","pi","prevDuration","isSame","_pi","_prevDuration","addtoDaysCache","addToCache","calculateDurations","found","dayCache","IsResizeClass","RegExp","Event$1","Component","props","bind","onClick","stopPropagation","onDoubleClick","onDragStart","test","bounds","findDOMNode","refs","element","getBoundingClientRect","resize","clientY","type","body","Edit","editComponent","children","ref","onMouseDown","propTypes","instanceOf","func","Label","isRequired","IsDayClass","Day","state","boundingBox","root","onClickHandler","handler","lastMouseUp","Date","getMilliseconds","perc","offsetHeight","hours","eventLayout","setState","onMouseMove","coord","forceUpdate","onMouseUp","setTimeout","onEventResize","renderEvents","asMonth","singleDayEvents","allDayEvents","parent","onEventClick","onEventDoubleClick","number","highlight","defaultProps","XLabels","startOfType","dateFormat","defaultFormat","oneOf","string","YLabels","fill","_","renderLabels","timeFormat","Dayz","layoutFromProps","componentDidUpdate","prevProps","componentWillUnmount","detachEventBindings","off","onEventAdd","onEventsChange","on","renderDays","eventHandlers","array","oneOfType"],"mappings":"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","sourcesContent":["(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('react'), require('prop-types'), require('moment'), require('moment-range'), require('react-dom')) :\n  typeof define === 'function' && define.amd ? define(['react', 'prop-types', 'moment', 'moment-range', 'react-dom'], factory) :\n  (global = global || self, global.dayz = factory(global.React, global.PropTypes, global.moment, global['moment-range'], global.ReactDOM));\n}(this, function (React, PropTypes, moment$2, momentRange, ReactDOM) { 'use strict';\n\n  React = React && React.hasOwnProperty('default') ? React['default'] : React;\n  PropTypes = PropTypes && PropTypes.hasOwnProperty('default') ? PropTypes['default'] : PropTypes;\n  moment$2 = moment$2 && moment$2.hasOwnProperty('default') ? moment$2['default'] : moment$2;\n  ReactDOM = ReactDOM && ReactDOM.hasOwnProperty('default') ? ReactDOM['default'] : ReactDOM;\n\n  function _defineProperty(obj, key, value) {\n    if (key in obj) {\n      Object.defineProperty(obj, key, {\n        value: value,\n        enumerable: true,\n        configurable: true,\n        writable: true\n      });\n    } else {\n      obj[key] = value;\n    }\n\n    return obj;\n  }\n\n  function _extends() {\n    _extends = Object.assign || function (target) {\n      for (var i = 1; i < arguments.length; i++) {\n        var source = arguments[i];\n\n        for (var key in source) {\n          if (Object.prototype.hasOwnProperty.call(source, key)) {\n            target[key] = source[key];\n          }\n        }\n      }\n\n      return target;\n    };\n\n    return _extends.apply(this, arguments);\n  }\n\n  function ownKeys(object, enumerableOnly) {\n    var keys = Object.keys(object);\n\n    if (Object.getOwnPropertySymbols) {\n      var symbols = Object.getOwnPropertySymbols(object);\n      if (enumerableOnly) symbols = symbols.filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n      });\n      keys.push.apply(keys, symbols);\n    }\n\n    return keys;\n  }\n\n  function _objectSpread2(target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i] != null ? arguments[i] : {};\n\n      if (i % 2) {\n        ownKeys(source, true).forEach(function (key) {\n          _defineProperty(target, key, source[key]);\n        });\n      } else if (Object.getOwnPropertyDescriptors) {\n        Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n      } else {\n        ownKeys(source).forEach(function (key) {\n          Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n        });\n      }\n    }\n\n    return target;\n  }\n\n  var moment = require('moment'); // an event duration describes how an event is displayed.\n  // A event may be split into one or more durations in order to be split across week boundaries\n\n\n  class EventDuration {\n    constructor(layout, event, displayRange) {\n      this.layout = layout;\n      this.event = event;\n      this.stack = 0;\n      this.displayRange = displayRange;\n      this.startsBefore = event.start.isBefore(displayRange.start);\n      this.endsAfter = event.end.isAfter(displayRange.end);\n\n      if (this.layout.isDisplayingAsMonth) {\n        this.range = moment.range(moment.max(displayRange.start, event.start.startOf('day')), moment.min(displayRange.end, event.end.endOf('day')));\n      } else {\n        this.range = moment.range(moment.max(displayRange.start, event.start), moment.min(displayRange.end, event.end));\n      }\n\n      this.span = Math.max(1, Math.ceil(this.range.end.diff(this.range.start, 'day', true)));\n    }\n\n    isEditing() {\n      return this.first && this.event.isEditing();\n    }\n\n    startsOnWeek() {\n      return 0 === this.event.start.weekday();\n    }\n\n    adjustEventTime(startOrEnd, position, height) {\n      if (position < 0 || position > height) {\n        return;\n      }\n\n      var time = this.event[startOrEnd].startOf('day').add(this.layout.displayHours[0], 'hours').add(this.layout.minutesInDay() * (position / height), 'minutes');\n      var {\n        step\n      } = this.event.get('resizable');\n\n      if (step) {\n        var rounded = Math.round(time.minute() / step) * step;\n        time.minute(rounded).second(0);\n      }\n\n      this.event.emit('change');\n    }\n\n    inlineStyles() {\n      if ('month' === this.layout.displayingAs() || !this.event.isSingleDay()) {\n        return {};\n      }\n\n      var {\n        start,\n        end\n      } = this.event.daysMinuteRange();\n      var startOffset = this.layout.displayHours[0] * 60;\n      var endOffset = this.layout.displayHours[1] * 60;\n      start = Math.max(start - startOffset, 0);\n      end = Math.min(end, endOffset) - startOffset;\n      var inday = this.layout.minutesInDay();\n      var top = \"\".concat((start / inday * 100).toFixed(2), \"%\");\n      var bottom = \"\".concat((100 - end / inday * 100).toFixed(2), \"%\");\n      return {\n        top,\n        bottom\n      };\n    }\n\n    isResizable() {\n      return this.layout.displayingAs() !== 'month' && this.event.get('resizable');\n    }\n\n    key() {\n      return this.displayRange.start.format('YYYYMMDD') + this.event.key;\n    }\n\n    setIsResizing(val) {\n      this.isResizing = val;\n    }\n\n    classNames() {\n      var classes = ['event', \"span-\".concat(this.span)];\n\n      if (this.event.colorIndex) {\n        classes.push(\"color-\".concat(this.event.colorIndex));\n      }\n\n      if (this.isResizing) classes.push('is-resizing');\n      if (this.startsBefore) classes.push('is-continuation');\n      if (this.endsAfter) classes.push('is-continued');\n      if (this.stack) classes.push(\"stack-\".concat(this.stack));\n      if (this.isEditing()) classes.push('is-editing');\n      if (this.isResizable()) classes.push('is-resizable');\n\n      if (this.event.className) {\n        classes.push(this.event.className);\n      }\n\n      return classes.join(' ');\n    }\n\n  }\n\n  var C = {\n    eventHeight: 20 // px\n\n  };\n\n  var moment$1 = momentRange.extendMoment(moment$2);\n\n  var Emitter = require('tiny-emitter');\n\n  var EVENT_COUNTER = 1;\n  class Event {\n    constructor(attributes) {\n      this.attributes = attributes;\n      this.isEvent = true;\n      EVENT_COUNTER += 1;\n      this.key = EVENT_COUNTER;\n\n      if (!this.attributes.range) {\n        throw new Error('Must provide range');\n      }\n    }\n\n    render() {\n      if (this.attributes.render) {\n        return this.attributes.render({\n          event: this\n        });\n      }\n\n      return this.defaultRenderImplementation();\n    }\n\n    defaultRenderImplementation() {\n      return React.createElement('div', {}, this.attributes.content || this.attributes.range.start.format('MMM DD YYYY'));\n    }\n\n    get(key) {\n      return this.attributes[key];\n    }\n\n    set(attributes, options) {\n      var changed = false;\n      var keys = Object.keys(attributes);\n\n      for (var i = 0; i < keys.length; i++) {\n        var key = keys[i];\n\n        if (this.attributes[key] !== attributes[key]) {\n          changed = true;\n          break;\n        }\n      }\n\n      if (!changed) {\n        return;\n      }\n\n      Object.assign(this.attributes, attributes);\n      this.emitChangeEvent(options);\n    }\n\n    isEditing() {\n      return !!this.attributes.editing;\n    }\n\n    setEditing(isEditing) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      if (isEditing !== this.isEditing()) {\n        this.attributes.editing = isEditing;\n      }\n\n      this.emitChangeEvent(options);\n    }\n\n    emitChangeEvent() {\n      var options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n\n      if (this.collection) {\n        this.collection.emit('change', this);\n      }\n\n      if (!options || !options.silent) {\n        this.emit('change', this);\n      }\n    }\n\n    range() {\n      return this.attributes.range.clone();\n    }\n\n    isSingleDay() {\n      var maxDiff = this.attributes.range.start.isDST() ? 25 : 24;\n      return maxDiff > this.attributes.range.end.diff(this.attributes.range.start, 'hours');\n    }\n\n    daysMinuteRange() {\n      var startOfDay = this.attributes.range.start.clone().startOf('day');\n      return {\n        start: this.attributes.range.start.diff(startOfDay, 'minute'),\n        end: this.attributes.range.end.diff(startOfDay, 'minute')\n      };\n    }\n\n    get content() {\n      return this.attributes.content;\n    }\n\n    get start() {\n      return this.attributes.range.start;\n    }\n\n    get end() {\n      return this.attributes.range.end;\n    }\n\n    get colorIndex() {\n      return this.attributes.colorIndex || 0;\n    }\n\n    get className() {\n      return this.attributes.className || '';\n    }\n\n    remove() {\n      this.collection.remove(this);\n      this.isDeleted = true;\n      this.emit('change');\n    }\n\n  }\n  Object.assign(Event.prototype, Emitter.prototype);\n\n  var Emitter$1 = require('tiny-emitter');\n\n  var lc = event => event.attributes.range.start.diff(event.attributes.range.end);\n\n  var sortEvents = (eventA, eventB) => {\n    var a = lc(eventA);\n    var b = lc(eventB);\n    return a < b ? -1 : a > b ? 1 : 0; // eslint-disable-line no-nested-ternary\n  };\n\n  class EventsCollection {\n    constructor() {\n      var _this = this;\n\n      var events = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {\n        displayAllDay: true,\n        displayLabelForAllDays: true\n      };\n      this.events = [];\n\n      var _loop = function _loop(i, length) {\n        if (options.displayAllDay) {\n          _this.add(events[i], {\n            silent: true\n          });\n        } else {\n          Array.from(events[i].range.snapTo('days').by('day')).map((date, j) => {\n            if (false === options.displayLabelForAllDays && j > 0) {\n              events[i].content = ' ';\n            }\n\n            return _this.add(events[i], {\n              silent: true,\n              eventDay: date.clone()\n            });\n          });\n        }\n      };\n\n      for (var i = 0, {\n        length\n      } = events; i < length; i += 1) {\n        _loop(i);\n      }\n    }\n\n    add(eventAttrs) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var attrs = this.prepareEventAttributes(eventAttrs, options.eventDay);\n      var event = eventAttrs instanceof Event ? eventAttrs : new Event(attrs);\n      event.collection = this;\n      this.events.push(event);\n\n      if (!options.silent) {\n        this.emit('change');\n      }\n\n      return event;\n    }\n\n    prepareEventAttributes(eventAttrs, eventDay) {\n      if (eventDay === undefined) {\n        return eventAttrs;\n      }\n\n      var attrs = _objectSpread2({}, eventAttrs);\n\n      var rangeEnd = moment$1.min(attrs.range.end, eventDay.endOf('day')).toDate();\n      var rangeStart = moment$1.max(attrs.range.start, eventDay.startOf('day')).toDate();\n      var range = {\n        range: moment$1.range(rangeStart, rangeEnd)\n      };\n      return _objectSpread2({}, attrs, {}, range);\n    }\n\n    forEach(fn) {\n      this.events.sort(sortEvents).forEach(fn);\n    }\n\n    get length() {\n      return this.events.length;\n    }\n\n    at(i) {\n      return this.events[i];\n    }\n\n    remove(event) {\n      var index = this.events.indexOf(event);\n\n      if (-1 !== index) {\n        this.events.splice(index, 1);\n        this.emit('change');\n      }\n    }\n\n  }\n  EventsCollection.Event = Event;\n  Object.assign(EventsCollection.prototype, Emitter$1.prototype);\n\n  function cacheKey(day) {\n    return day.format('YYYYMMDD');\n  }\n\n  function highlightedDaysFinder(days) {\n    var highlighted = Object.create(null);\n    days.forEach(d => {\n      highlighted[cacheKey(moment$1(d))] = true;\n    });\n    return day => highlighted[cacheKey(day)] ? 'highlight' : false;\n  } // a layout describes how the calendar is displayed.\n\n\n  class Layout {\n    constructor(options) {\n      this.cache = Object.create(null);\n      options.date = moment$1(options.date);\n      Object.assign(this, options);\n      var cacheMethod = 'day' === this.display ? 'addtoDaysCache' : 'calculateDurations';\n      this.calculateRange();\n\n      if (!this.isDisplayingAsMonth && !this.displayHours) {\n        this.displayHours = this.hourRange();\n      } else {\n        this.displayHours = this.displayHours || [0, 24];\n      }\n\n      if (options.highlightDays) {\n        this.isDayHighlighted = 'function' === typeof options.highlightDays ? options.highlightDays : highlightedDaysFinder(options.highlightDays);\n      }\n\n      var multiDayCount = 0;\n\n      if (!this.events) {\n        this.events = new EventsCollection();\n      }\n\n      var {\n        range\n      } = this;\n      this.events.forEach(event => {\n        // we only care about events that are in the range we were provided\n        if (range.overlaps(event.range())) {\n          this[cacheMethod](event);\n\n          if (!event.isSingleDay()) {\n            multiDayCount += 1;\n          }\n        }\n      });\n      this.multiDayCount = multiDayCount;\n      this.calculateStacking();\n    }\n\n    calculateRange() {\n      if (this.range) {\n        return;\n      }\n\n      var start = moment$1(this.date).locale(this.locale);\n      var end = moment$1(this.date).locale(this.locale);\n\n      if ('week' === this.display) {\n        if (this.weekStartsOn !== undefined) {\n          start.startOf('isoWeek');\n          end.endOf('isoWeek');\n\n          if (0 === this.weekStartsOn && 1 === start.isoWeekday()) {\n            start.subtract(1, 'day');\n            end.subtract(1, 'day');\n          }\n        } else {\n          start.startOf(this.display);\n          end.endOf(this.display);\n        }\n      } else {\n        start.startOf(this.display);\n        end.endOf(this.display);\n      }\n\n      this.range = moment$1.range(start, end);\n\n      if (this.isDisplayingAsMonth) {\n        var startWeekday;\n        var maxWeekday = 6;\n\n        if (this.weekStartsOn !== undefined) {\n          startWeekday = this.range.start.isoWeekday();\n\n          if (1 === this.weekStartsOn) {\n            startWeekday -= 1;\n            maxWeekday += 1;\n          }\n        } else {\n          startWeekday = this.range.start.weekday();\n        }\n\n        this.range.start.subtract(startWeekday, 'days');\n        this.range.end.add(maxWeekday - this.range.end.isoWeekday(), 'days');\n      }\n    }\n\n    minutesInDay() {\n      return (this.displayHours[1] - this.displayHours[0]) * 60;\n    }\n\n    propsForDayContainer(_ref) {\n      var {\n        day,\n        position\n      } = _ref;\n      var classes = ['day'];\n      var date = moment$1(day);\n\n      if (moment$1(date).isBefore(this.date)) {\n        classes.push('before');\n      } else if (moment$1(date).isAfter(this.date)) {\n        classes.push('after');\n      } else {\n        classes.push('current');\n      }\n\n      if (this.isDateOutsideRange(date)) {\n        classes.push('outside');\n      }\n\n      var higlight = this.isDayHighlighted(date, this);\n\n      if (higlight) {\n        classes.push(higlight);\n      }\n\n      var handlers = {};\n      Object.keys(this.dayEventHandlers || {}).forEach(k => {\n        handlers[k] = ev => this.dayEventHandlers[k](date, ev);\n      });\n      return _objectSpread2({\n        className: classes.join(' '),\n        'data-date': cacheKey(day),\n        style: {\n          order: position\n        }\n      }, handlers);\n    }\n\n    propsForAllDayEventContainer() {\n      var style = this.multiDayCount ? {\n        flexBasis: this.multiDayCount * C.eventHeight\n      } : {\n        display: 'none'\n      };\n      return {\n        className: 'all-day',\n        style\n      };\n    }\n\n    hourRange() {\n      var range = [7, 19];\n      Array.from(this.range.by('days')).forEach(day => {\n        this.forDay(day).forEach(duration => {\n          range[0] = Math.min(duration.event.start.hour(), range[0]);\n          range[1] = Math.max(duration.event.end.hour(), range[1]);\n        });\n      });\n      range[1] += 1;\n      return range;\n    }\n\n    getEventsForWeek(start) {\n      var day = start.clone();\n      var weeklyEvents = [];\n\n      for (var i = 0; i < 7; i++) {\n        var durations = this.forDay(day);\n\n        for (var li = 0, {\n          length\n        } = durations; li < length; li += 1) {\n          weeklyEvents.push(durations[li]);\n        }\n\n        day.add(1, 'day');\n      }\n\n      var minLong = range => moment$1.max(start, range.start).diff(moment$1.min(day, range.end), 'minutes');\n\n      return weeklyEvents.sort((al, bl) => {\n        var a = minLong(al.event.range());\n        var b = minLong(bl.event.range());\n        return a === b ? 0 : a > b ? 1 : -1; // eslint-disable-line no-nested-ternary\n      });\n    }\n\n    calculateStacking() {\n      var firstOfWeek = this.range.start.clone().startOf('week');\n\n      do {\n        var weeklyEvents = this.getEventsForWeek(firstOfWeek);\n\n        for (var durationIndex = 0; durationIndex < weeklyEvents.length; durationIndex++) {\n          var duration = weeklyEvents[durationIndex]; // loop through each duration that is before this one\n\n          var ceilingIndex = 0;\n\n          for (var pi = durationIndex - 1; pi >= 0; pi--) {\n            var prevDuration = weeklyEvents[pi];\n\n            if (prevDuration.range.start.isSame(duration.range.start, 'd')) {\n              ceilingIndex = pi + 1;\n              break;\n            }\n          }\n\n          for (var _pi = ceilingIndex; _pi < durationIndex; _pi++) {\n            var _prevDuration = weeklyEvents[_pi];\n\n            if (duration.range.overlaps(_prevDuration.range)) {\n              duration.stack += 1;\n            }\n          }\n        }\n\n        firstOfWeek.add(7, 'day');\n      } while (!firstOfWeek.isAfter(this.range.end));\n    } // This is the default implementation.\n    // It will be overwritten if highlightDays option is provided\n\n\n    isDayHighlighted() {\n      return false;\n    }\n\n    isDateOutsideRange(date) {\n      return this.isDisplayingAsMonth && !this.date.isSame(date, 'month');\n    }\n\n    forDay(day) {\n      return this.cache[cacheKey(day)] || [];\n    } // a single day is easy, just add the event to that day\n\n\n    addtoDaysCache(event) {\n      var duration = new EventDuration(this, event, this.range);\n      this.addToCache(this.range.start, duration);\n    } // other durations must break at week boundaries, with indicators if they were/are continuing\n\n\n    calculateDurations(event) {\n      var end = moment$1.min(this.range.end, event.range().end);\n      var start = moment$1.max(this.range.start, event.range().start).clone();\n\n      do {\n        var range = moment$1.range(start, start.clone().endOf('week'));\n        var duration = new EventDuration(this, event, range);\n        this.addToCache(start, duration); // go to first day of next week\n\n        start.add(7 - start.weekday(), 'day');\n      } while (!start.isAfter(end));\n    }\n\n    addToCache(date, duration) {\n      var found = false;\n      var keys = Object.keys(this.cache);\n\n      for (var i = 0; i < keys.length; i++) {\n        var key = keys[i];\n\n        if (this.cache[key].event === duration.event) {\n          found = true;\n          break;\n        }\n      }\n\n      if (!found) {\n        duration.first = true; // eslint-disable-line no-param-reassign\n      }\n\n      var dayCache = this.cache[cacheKey(date)] || (this.cache[cacheKey(date)] = []);\n      dayCache.push(duration);\n    }\n\n    displayingAs() {\n      return this.display;\n    }\n\n    get isDisplayingAsMonth() {\n      return 'month' === this.display;\n    }\n\n  }\n\n  var IsResizeClass = new RegExp('(\\\\s|^)event(\\\\s|$)');\n  class Event$1 extends React.Component {\n    constructor(props) {\n      super(props);\n      ['onClick', 'onDoubleClick', 'onDoubleClick', 'onDragStart'].forEach(ev => {\n        this[ev] = this[ev].bind(this);\n      });\n    }\n\n    onClick(ev) {\n      if (!this.props.onClick) {\n        return;\n      }\n\n      this.props.onClick(ev, this.props.duration.event);\n      ev.stopPropagation();\n    }\n\n    onDoubleClick(ev) {\n      if (!this.props.onDoubleClick) {\n        return;\n      }\n\n      this.props.onDoubleClick(ev, this.props.duration.event);\n      ev.stopPropagation();\n    }\n\n    onDragStart(ev) {\n      if (!IsResizeClass.test(ev.target.className)) {\n        return;\n      }\n\n      var bounds = ReactDOM.findDOMNode(this.refs.element).getBoundingClientRect();\n      var resize;\n\n      if (ev.clientY - bounds.top < 10) {\n        resize = {\n          type: 'start'\n        };\n      } else if (bounds.bottom - ev.clientY < 10) {\n        resize = {\n          type: 'end'\n        };\n      } else {\n        return;\n      }\n\n      this.props.onDragStart(resize, this.props.duration);\n    }\n\n    render() {\n      var body = React.createElement(\"div\", {\n        className: \"evbody\",\n        onClick: this.onClick\n      }, this.props.duration.event.render());\n      var Edit = this.props.editComponent;\n      var children = this.props.duration.isEditing() ? React.createElement(Edit, {\n        event: this.props.duration.event\n      }, body) : body;\n      return React.createElement(\"div\", {\n        ref: \"element\",\n        onMouseDown: this.onDragStart,\n        style: this.props.duration.inlineStyles(),\n        className: this.props.duration.classNames()\n      }, children);\n    }\n\n  }\n  Event$1.propTypes = {\n    duration: PropTypes.instanceOf(EventDuration),\n    editComponent: PropTypes.func,\n    onClick: PropTypes.func,\n    onDoubleClick: PropTypes.func\n  };\n\n  var Label = (_ref) => {\n    var {\n      day\n    } = _ref;\n    return React.createElement(\"div\", {\n      className: \"label\"\n    }, day.format('D'));\n  };\n\n  Label.propTypes = {\n    day: PropTypes.object.isRequired\n  };\n\n  var IsDayClass = new RegExp('(\\\\s|^)(events|day|label)(\\\\s|$)');\n  class Day extends React.Component {\n    constructor() {\n      super();\n      this.state = {\n        resize: false\n      };\n      ['onClick', 'onDoubleClick', 'onMouseMove', 'onMouseUp', 'onDragStart'].forEach(ev => {\n        this[ev] = this[ev].bind(this);\n      });\n    }\n\n    get boundingBox() {\n      return ReactDOM.findDOMNode(this.refs.events || this.refs.root).getBoundingClientRect();\n    }\n\n    onClickHandler(ev, handler) {\n      if (!handler || !IsDayClass.test(ev.target.className) || this.lastMouseUp && this.lastMouseUp < new Date().getMilliseconds() + 100) {\n        return;\n      }\n\n      this.lastMouseUp = 0;\n      var bounds = this.boundingBox;\n      var perc = Math.max(0.0, (ev.clientY - bounds.top) / ev.target.offsetHeight);\n      var hours = this.props.layout.displayHours[0] + this.props.layout.minutesInDay() * perc / 60;\n      handler.call(this, ev, this.props.day.clone().startOf('day').add(hours, 'hour'));\n    }\n\n    onClick(ev) {\n      this.onClickHandler(ev, this.props.handlers.onClick);\n    }\n\n    onDoubleClick(ev) {\n      this.onClickHandler(ev, this.props.handlers.onDoubleClick);\n    }\n\n    onDragStart(resize, eventLayout) {\n      eventLayout.setIsResizing(true);\n      var bounds = this.boundingBox;\n      Object.assign(resize, {\n        eventLayout,\n        height: bounds.height,\n        top: bounds.top\n      });\n      this.setState({\n        resize\n      });\n    }\n\n    onMouseMove(ev) {\n      if (!this.state.resize) {\n        return;\n      }\n\n      var coord = ev.clientY - this.state.resize.top;\n      this.state.resize.eventLayout.adjustEventTime(this.state.resize.type, coord, this.state.resize.height);\n      this.forceUpdate();\n    }\n\n    onMouseUp(ev) {\n      if (!this.state.resize) {\n        return;\n      }\n\n      this.state.resize.eventLayout.setIsResizing(false);\n      setTimeout(() => this.setState({\n        resize: false\n      }), 1);\n\n      if (this.props.onEventResize) {\n        this.props.onEventResize(ev, this.state.resize.eventLayout.event);\n      }\n\n      this.lastMouseUp = new Date().getMilliseconds();\n    }\n\n    renderEvents() {\n      var asMonth = this.props.layout.isDisplayingAsMonth;\n      var singleDayEvents = [];\n      var allDayEvents = [];\n      var onMouseMove = asMonth ? null : this.onMouseMove;\n      this.props.layout.forDay(this.props.day).forEach(duration => {\n        var event = React.createElement(Event$1, {\n          duration: duration,\n          key: duration.key(),\n          day: this.props.day,\n          parent: this,\n          onDragStart: this.onDragStart,\n          onClick: this.props.onEventClick,\n          editComponent: this.props.editComponent,\n          onDoubleClick: this.props.onEventDoubleClick\n        });\n        (duration.event.isSingleDay() ? singleDayEvents : allDayEvents).push(event);\n      });\n      var events = [];\n\n      if (allDayEvents.length || !asMonth) {\n        events.push(React.createElement(\"div\", _extends({\n          key: \"allday\"\n        }, this.props.layout.propsForAllDayEventContainer()), allDayEvents));\n      }\n\n      if (singleDayEvents.length) {\n        events.push(React.createElement(\"div\", {\n          key: \"events\",\n          ref: \"events\",\n          className: \"events\",\n          onMouseMove: onMouseMove,\n          onMouseUp: this.onMouseUp\n        }, singleDayEvents));\n      }\n\n      return events;\n    }\n\n    render() {\n      var props = this.props.layout.propsForDayContainer(this.props);\n      return React.createElement(\"div\", _extends({\n        ref: \"root\"\n      }, props, {\n        onClick: this.onClick,\n        onDoubleClick: this.onDoubleClick\n      }), React.createElement(Label, {\n        day: this.props.day,\n        className: \"label\"\n      }, this.props.day.format('D')), this.renderEvents());\n    }\n\n  }\n  Day.propTypes = {\n    day: PropTypes.object.isRequired,\n    layout: PropTypes.instanceOf(Layout).isRequired,\n    handlers: PropTypes.object,\n    position: PropTypes.number.isRequired,\n    highlight: PropTypes.func,\n    onEventClick: PropTypes.func,\n    onEventResize: PropTypes.func,\n    editComponent: PropTypes.func,\n    onEventDoubleClick: PropTypes.func\n  };\n  Day.defaultProps = {\n    handlers: {}\n  };\n\n  class XLabels extends React.Component {\n    get days() {\n      var days = [];\n\n      if ('day' === this.props.display) {\n        days.push(moment$2(this.props.date));\n      } else {\n        var startOfType = 'week';\n        var day = moment$2(this.props.date).locale(this.props.locale);\n\n        if (this.props.weekStartsOn !== undefined) {\n          startOfType = 'isoWeek';\n          day.startOf(startOfType);\n\n          if (0 === this.props.weekStartsOn && 1 === day.isoWeekday()) {\n            day.subtract(1, 'day');\n          }\n        } else {\n          day.startOf(startOfType);\n        }\n\n        for (var i = 0; i < 7; i += 1) {\n          days.push(day.clone().add(i, 'day'));\n        }\n      }\n\n      return days;\n    }\n\n    get dateFormat() {\n      var defaultFormat = 'month' === this.props.display ? 'dddd' : 'ddd, MMM Do';\n      return this.props.dateFormat || defaultFormat;\n    }\n\n    render() {\n      return React.createElement(\"div\", {\n        className: \"x-labels\"\n      }, this.days.map(day => React.createElement(\"div\", {\n        key: day.format('YYYYMMDD'),\n        className: \"day-label\"\n      }, day.locale(this.props.locale).format(this.dateFormat))));\n    }\n\n  }\n  XLabels.propTypes = {\n    display: PropTypes.oneOf(['month', 'week', 'day']),\n    date: PropTypes.object.isRequired,\n    dateFormat: PropTypes.string,\n    locale: PropTypes.string.isRequired,\n    weekStartsOn: PropTypes.oneOf([0, 1])\n  };\n\n  class YLabels extends React.Component {\n    get hours() {\n      var [start, end] = this.props.layout.displayHours;\n      return Array(end - start).fill().map((_, i) => i + start);\n    }\n\n    renderLabels() {\n      var day = moment$1().startOf('hour');\n      return this.hours.map(hour => React.createElement(\"div\", {\n        key: hour,\n        className: \"hour\"\n      }, day.hour(hour).format(this.props.timeFormat)));\n    }\n\n    render() {\n      if ('month' === this.props.display) {\n        return null;\n      }\n\n      return React.createElement(\"div\", null, React.createElement(\"div\", {\n        className: \"y-labels\"\n      }, React.createElement(\"div\", this.props.layout.propsForAllDayEventContainer(), \"All Day\"), this.renderLabels()));\n    }\n\n  }\n  YLabels.propTypes = {\n    display: PropTypes.oneOf(['month', 'week', 'day']).isRequired,\n    date: PropTypes.object.isRequired,\n    layout: PropTypes.instanceOf(Layout).isRequired,\n    timeFormat: PropTypes.string\n  };\n  YLabels.defaultProps = {\n    timeFormat: 'ha'\n  };\n\n  class Dayz extends React.Component {\n    constructor(props) {\n      super(props);\n      this.layoutFromProps();\n    }\n\n    componentDidUpdate(prevProps) {\n      // don't calculate layout if update is due to state change\n      if (prevProps !== this.props) {\n        this.layoutFromProps();\n        this.forceUpdate();\n      }\n    }\n\n    componentWillUnmount() {\n      this.detachEventBindings();\n    }\n\n    detachEventBindings() {\n      if (this.props.events) {\n        this.props.events.off('change', this.onEventAdd);\n      }\n    }\n\n    onEventsChange() {\n      this.forceUpdate();\n    }\n\n    layoutFromProps() {\n      var {\n        props\n      } = this;\n\n      if (this.props && props.events) {\n        this.detachEventBindings();\n        props.events.on('change', this.onEventsChange, this);\n      }\n\n      this.layout = new Layout(Object.assign({}, props));\n    }\n\n    get days() {\n      return Array.from(this.layout.range.by('days'));\n    }\n\n    renderDays() {\n      return this.days.map((day, index) => React.createElement(Day, {\n        key: day.format('YYYYMMDD'),\n        day: day,\n        position: index,\n        layout: this.layout,\n        editComponent: this.props.editComponent,\n        handlers: this.props.dayEventHandlers,\n        eventHandlers: this.props.eventHandlers,\n        onEventClick: this.props.onEventClick,\n        onEventResize: this.props.onEventResize\n      }));\n    }\n\n    render() {\n      var classes = ['dayz', this.props.display];\n      return React.createElement(\"div\", {\n        className: classes.join(' ')\n      }, React.createElement(XLabels, {\n        date: this.props.date,\n        display: this.props.display,\n        dateFormat: this.props.dateFormat,\n        locale: this.props.locale,\n        weekStartsOn: this.props.weekStartsOn\n      }), React.createElement(\"div\", {\n        className: \"body\"\n      }, React.createElement(YLabels, {\n        layout: this.layout,\n        display: this.props.display,\n        date: this.props.date,\n        timeFormat: this.props.timeFormat\n      }), React.createElement(\"div\", {\n        className: \"days\"\n      }, this.renderDays(), this.props.children)));\n    }\n\n  }\n  Dayz.EventsCollection = EventsCollection;\n  Dayz.propTypes = {\n    date: PropTypes.object.isRequired,\n    events: PropTypes.instanceOf(EventsCollection),\n    display: PropTypes.oneOf(['month', 'week', 'day']),\n    timeFormat: PropTypes.string,\n    dateFormat: PropTypes.string,\n    displayHours: PropTypes.array,\n    onEventClick: PropTypes.func,\n    editComponent: PropTypes.func,\n    onEventResize: PropTypes.func,\n    dayEventHandlers: PropTypes.object,\n    locale: PropTypes.string,\n    highlightDays: PropTypes.oneOfType([PropTypes.array, PropTypes.func]),\n    weekStartsOn: PropTypes.oneOf([0, 1])\n  };\n  Dayz.defaultProps = {\n    display: 'month',\n    locale: 'en'\n  };\n\n  return Dayz;\n\n}));\n"]},"metadata":{},"sourceType":"script"}
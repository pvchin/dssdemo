{"ast":null,"code":"import _defineProperty from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _toConsumableArray from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{useState,useEffect}from\"react\";import clsx from\"clsx\";import MaterialTable,{MTableToolbar}from\"material-table\";import{makeStyles}from\"@material-ui/core/styles\";import{Box,Button,Icon}from\"@chakra-ui/react\";import{useEmployeesContext}from\"../context/employees_context\";import{useTablesContext}from\"../context/tables_context\";import{useEmployees}from\"./employees/useEmployees\";import{useUpdateEmployees}from\"./employees/useUpdateEmployees\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var drawerWidth=240;var columns=[{title:\"Name\",field:\"name\",editable:\"never\"},{title:\"Department\",field:\"department\",editable:\"never\"},{title:\"Designation\",field:\"designation\",editable:\"never\"},{title:\"Role\",field:\"role\",lookup:{1:\"Staff\",2:\"Admin\",3:\"AdminManager\",4:\"Manager\"}}];export default function UserAccessTable(){var classes=useStyles();var fixedHeightPaper=clsx(classes.paper,classes.fixedHeight);var _useEmployees=useEmployees(),employees=_useEmployees.employees;var updateEmployees=useUpdateEmployees();var _useEmployeesContext=useEmployeesContext(),editEmployeeID=_useEmployeesContext.editEmployeeID;var update_rec=function update_rec(data){var id=data.id,rec_id=data.rec_id,role=data.role,fields=_objectWithoutProperties(data,[\"id\",\"rec_id\",\"role\"]);updateEmployees(_objectSpread({id:id,role:parseInt(role,10)},fields));};return/*#__PURE__*/_jsx(\"div\",{className:fixedHeightPaper,children:/*#__PURE__*/_jsx(Box,{w:\"100%\",mt:\"65\",children:/*#__PURE__*/_jsx(MaterialTable,{columns:columns,data:employees,title:\"User Access Table\",editable:{onRowUpdate:function onRowUpdate(newData,oldData){return new Promise(function(resolve,reject){setTimeout(function(){var dataUpdate=_toConsumableArray(employees);var index=oldData.tableData.id;dataUpdate[index]=newData;update_rec(newData);resolve();},1000);});}},options:{filtering:true,pageSize:10,headerStyle:{backgroundColor:\"#90CDF4\",color:\"primary\"},showTitle:true},components:{Toolbar:function Toolbar(props){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(MTableToolbar,_objectSpread({},props)),/*#__PURE__*/_jsx(\"div\",{style:{padding:\"5px 10px\"}})]});}}})})});}var useStyles=makeStyles(function(theme){return{root:{display:\"flex\"},toolbar:{paddingRight:24// keep right padding when drawer closed\n},toolbarIcon:_objectSpread({display:\"flex\",alignItems:\"center\",justifyContent:\"flex-end\",padding:\"0 8px\"},theme.mixins.toolbar),appBar:{zIndex:theme.zIndex.drawer+1,transition:theme.transitions.create([\"width\",\"margin\"],{easing:theme.transitions.easing.sharp,duration:theme.transitions.duration.leavingScreen})},appBarShift:{marginLeft:drawerWidth,width:\"calc(100% - \".concat(drawerWidth,\"px)\"),transition:theme.transitions.create([\"width\",\"margin\"],{easing:theme.transitions.easing.sharp,duration:theme.transitions.duration.enteringScreen})},menuButton:{marginRight:36},menuButtonHidden:{display:\"none\"},title:{flexGrow:1},drawerPaper:{position:\"relative\",whiteSpace:\"nowrap\",width:drawerWidth,transition:theme.transitions.create(\"width\",{easing:theme.transitions.easing.sharp,duration:theme.transitions.duration.enteringScreen})},drawerPaperClose:_defineProperty({overflowX:\"hidden\",transition:theme.transitions.create(\"width\",{easing:theme.transitions.easing.sharp,duration:theme.transitions.duration.leavingScreen}),width:theme.spacing(7)},theme.breakpoints.up(\"sm\"),{width:theme.spacing(9)}),appBarSpacer:theme.mixins.toolbar,content:{flexGrow:1,height:\"100vh\",overflow:\"auto\"},container:{paddingTop:theme.spacing(9),paddingBottom:theme.spacing(4),border:\"1px solid\"},paper:{padding:theme.spacing(2),// display: \"flex\",\ndisplay:\"flex\",overflow:\"auto\",flexDirection:\"column\",border:\"1px solid\",width:\"100%\"},fixedHeight:{height:800}};});","map":{"version":3,"sources":["D:/react-myprojects/hrms-airtable/src/components/UserAccessTable.js"],"names":["React","useState","useEffect","clsx","MaterialTable","MTableToolbar","makeStyles","Box","Button","Icon","useEmployeesContext","useTablesContext","useEmployees","useUpdateEmployees","drawerWidth","columns","title","field","editable","lookup","UserAccessTable","classes","useStyles","fixedHeightPaper","paper","fixedHeight","employees","updateEmployees","editEmployeeID","update_rec","data","id","rec_id","role","fields","parseInt","onRowUpdate","newData","oldData","Promise","resolve","reject","setTimeout","dataUpdate","index","tableData","filtering","pageSize","headerStyle","backgroundColor","color","showTitle","Toolbar","props","padding","theme","root","display","toolbar","paddingRight","toolbarIcon","alignItems","justifyContent","mixins","appBar","zIndex","drawer","transition","transitions","create","easing","sharp","duration","leavingScreen","appBarShift","marginLeft","width","enteringScreen","menuButton","marginRight","menuButtonHidden","flexGrow","drawerPaper","position","whiteSpace","drawerPaperClose","overflowX","spacing","breakpoints","up","appBarSpacer","content","height","overflow","container","paddingTop","paddingBottom","border","flexDirection"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport clsx from \"clsx\";\r\nimport MaterialTable, { MTableToolbar } from \"material-table\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Box, Button, Icon } from \"@chakra-ui/react\";\r\nimport { useEmployeesContext } from \"../context/employees_context\";\r\nimport { useTablesContext } from \"../context/tables_context\";\r\nimport { useEmployees } from \"./employees/useEmployees\";\r\nimport { useUpdateEmployees } from \"./employees/useUpdateEmployees\";\r\n\r\nconst drawerWidth = 240;\r\n\r\nconst columns = [\r\n  {\r\n    title: \"Name\",\r\n    field: \"name\",\r\n    editable: \"never\",\r\n  },\r\n  {\r\n    title: \"Department\",\r\n    field: \"department\",\r\n    editable: \"never\",\r\n  },\r\n  {\r\n    title: \"Designation\",\r\n    field: \"designation\",\r\n    editable: \"never\",\r\n  },\r\n  {\r\n    title: \"Role\",\r\n    field: \"role\",\r\n    lookup: { 1: \"Staff\", 2: \"Admin\", 3: \"AdminManager\", 4: \"Manager\" },\r\n  },\r\n];\r\n\r\nexport default function UserAccessTable() {\r\n  const classes = useStyles();\r\n  const fixedHeightPaper = clsx(classes.paper, classes.fixedHeight);\r\n  const { employees } = useEmployees();\r\n  const updateEmployees = useUpdateEmployees();\r\n  const { editEmployeeID } = useEmployeesContext();\r\n\r\n  const update_rec = (data) => {\r\n    const { id, rec_id, role, ...fields } = data;\r\n    updateEmployees({ id, role: parseInt(role, 10), ...fields });\r\n  };\r\n\r\n  return (\r\n    <div className={fixedHeightPaper}>\r\n      {/* <div className={classes.root}> */}\r\n        <Box w=\"100%\" mt=\"65\">\r\n          <MaterialTable\r\n            columns={columns}\r\n            data={employees}\r\n            title=\"User Access Table\"\r\n            editable={{\r\n              onRowUpdate: (newData, oldData) =>\r\n                new Promise((resolve, reject) => {\r\n                  setTimeout(() => {\r\n                    const dataUpdate = [...employees];\r\n                    const index = oldData.tableData.id;\r\n                    dataUpdate[index] = newData;\r\n                    update_rec(newData);\r\n\r\n                    resolve();\r\n                  }, 1000);\r\n                }),\r\n            }}\r\n            options={{\r\n              filtering: true,\r\n              pageSize: 10,\r\n              headerStyle: {\r\n                backgroundColor: \"#90CDF4\",\r\n                color: \"primary\",\r\n              },\r\n              showTitle: true,\r\n            }}\r\n            components={{\r\n              Toolbar: (props) => (\r\n                <div>\r\n                  <MTableToolbar {...props} />\r\n                  <div style={{ padding: \"5px 10px\" }}></div>\r\n                </div>\r\n              ),\r\n            }}\r\n          />\r\n        </Box>\r\n      {/* </div> */}\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    display: \"flex\",\r\n  },\r\n  toolbar: {\r\n    paddingRight: 24, // keep right padding when drawer closed\r\n  },\r\n  toolbarIcon: {\r\n    display: \"flex\",\r\n    alignItems: \"center\",\r\n    justifyContent: \"flex-end\",\r\n    padding: \"0 8px\",\r\n    ...theme.mixins.toolbar,\r\n  },\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n  },\r\n  appBarShift: {\r\n    marginLeft: drawerWidth,\r\n    width: `calc(100% - ${drawerWidth}px)`,\r\n    transition: theme.transitions.create([\"width\", \"margin\"], {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  menuButton: {\r\n    marginRight: 36,\r\n  },\r\n  menuButtonHidden: {\r\n    display: \"none\",\r\n  },\r\n  title: {\r\n    flexGrow: 1,\r\n  },\r\n  drawerPaper: {\r\n    position: \"relative\",\r\n    whiteSpace: \"nowrap\",\r\n    width: drawerWidth,\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.enteringScreen,\r\n    }),\r\n  },\r\n  drawerPaperClose: {\r\n    overflowX: \"hidden\",\r\n    transition: theme.transitions.create(\"width\", {\r\n      easing: theme.transitions.easing.sharp,\r\n      duration: theme.transitions.duration.leavingScreen,\r\n    }),\r\n    width: theme.spacing(7),\r\n    [theme.breakpoints.up(\"sm\")]: {\r\n      width: theme.spacing(9),\r\n    },\r\n  },\r\n  appBarSpacer: theme.mixins.toolbar,\r\n  content: {\r\n    flexGrow: 1,\r\n    height: \"100vh\",\r\n    overflow: \"auto\",\r\n  },\r\n  container: {\r\n    paddingTop: theme.spacing(9),\r\n    paddingBottom: theme.spacing(4),\r\n    border: \"1px solid\",\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    // display: \"flex\",\r\n    display: \"flex\",\r\n    overflow: \"auto\",\r\n    flexDirection: \"column\",\r\n    border: \"1px solid\",\r\n    width: \"100%\",\r\n  },\r\n  fixedHeight: {\r\n    height: 800,\r\n  },\r\n}));\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _slicedToArray from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import MaterialTable from\"material-table\";import{TextField,MenuItem}from\"@material-ui/core\";import{makeStyles}from\"@material-ui/core/styles\";import AddIcon from\"@material-ui/icons/Add\";import EditIcon from\"@material-ui/icons/Edit\";import DeleteIcon from\"@material-ui/icons/Delete\";import CheckIcon from\"@material-ui/icons/Check\";import SearchIcon from\"@material-ui/icons/Search\";import LeaveForm from\"./LeaveForm\";import{CustomDialog}from\"../helpers/CustomDialog\";import{AlertDialog}from\"../helpers/AlertDialogBox\";import{useExpensesStatus}from\"./expenses/useExpensesStatus\";import{useExpensesPeriod}from\"./expenses/useExpensesPeriod\";import{useEmployeesContext}from\"../context/employees_context\";import{jsx as _jsx}from\"react/jsx-runtime\";var FILTERSTRING=\"Pending\";var columns=[{title:\"Name\",field:\"name\"},{title:\"Date\",field:\"date\",type:\"date\",dateSetting:{locale:\"en-GB\"}},{title:\"Description\",field:\"description\"},{title:\"Amount\",field:\"amount\",type:\"currency\"},{title:\"Status\",field:\"status\"}];export default function ExpenseTableView(_ref){var year=_ref.year,month=_ref.month;var classes=useStyles();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isDialogOpen=_useState2[0],setIsDialogOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isAlertOpen=_useState4[0],setIsAlertOpen=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totals=_useState6[0],setTotals=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isCalc=_useState8[0],setIsCalc=_useState8[1];var _useEmployeesContext=useEmployeesContext(),loadEmployees=_useEmployeesContext.loadEmployees;var _useExpensesStatus=useExpensesStatus(),expensesstatus=_useExpensesStatus.expensesstatus,setExpStatusId=_useExpensesStatus.setExpStatusId;var _useExpensesPeriod=useExpensesPeriod(),expensesperiod=_useExpensesPeriod.expensesperiod,setExpPeriodYrId=_useExpensesPeriod.setExpPeriodYrId,setExpPeriodMthId=_useExpensesPeriod.setExpPeriodMthId;useEffect(function(){setExpPeriodYrId(year);setExpPeriodMthId(month);setIsCalc(true);},[]);useEffect(function(){if(expensesperiod){Calc_Totals();setIsCalc(false);}},[isCalc]);var Calc_Totals=function Calc_Totals(){var amount=expensesperiod.reduce(function(acc,r){if(r.status===\"Approved\"||r.status===\"Approve\"){return acc+r.amount;}else{return acc;}},0);setTotals(amount);};return/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsx(\"div\",{style:{maxWidth:\"100%\",paddingTop:\"5px\"},children:/*#__PURE__*/_jsx(MaterialTable,{columns:columns,data:expensesperiod,title:\"Leave Application\",options:{filtering:false,search:false,toolbar:false,headerStyle:{backgroundColor:\"rgba(75, 192, 192, 1)\",color:\"white\"},showTitle:false}})})});}var useStyles=makeStyles(function(theme){return{root:{padding:0}};});","map":{"version":3,"sources":["D:/react-myprojects/hrms-airtable/src/components/ExpenseTableViewSummary.js"],"names":["React","useState","useEffect","MaterialTable","TextField","MenuItem","makeStyles","AddIcon","EditIcon","DeleteIcon","CheckIcon","SearchIcon","LeaveForm","CustomDialog","AlertDialog","useExpensesStatus","useExpensesPeriod","useEmployeesContext","FILTERSTRING","columns","title","field","type","dateSetting","locale","ExpenseTableView","year","month","classes","useStyles","isDialogOpen","setIsDialogOpen","isAlertOpen","setIsAlertOpen","totals","setTotals","isCalc","setIsCalc","loadEmployees","expensesstatus","setExpStatusId","expensesperiod","setExpPeriodYrId","setExpPeriodMthId","Calc_Totals","amount","reduce","acc","r","status","root","maxWidth","paddingTop","filtering","search","toolbar","headerStyle","backgroundColor","color","showTitle","theme","padding"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport MaterialTable from \"material-table\";\r\nimport { TextField, MenuItem } from \"@material-ui/core\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport CheckIcon from \"@material-ui/icons/Check\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport LeaveForm from \"./LeaveForm\";\r\nimport { CustomDialog } from \"../helpers/CustomDialog\";\r\nimport { AlertDialog } from \"../helpers/AlertDialogBox\";\r\nimport { useExpensesStatus } from \"./expenses/useExpensesStatus\";\r\nimport { useExpensesPeriod } from \"./expenses/useExpensesPeriod\";\r\nimport { useEmployeesContext } from \"../context/employees_context\";\r\n\r\nconst FILTERSTRING = \"Pending\";\r\n\r\nconst columns = [\r\n  {\r\n    title: \"Name\",\r\n    field: \"name\",\r\n  },\r\n  {\r\n    title: \"Date\",\r\n    field: \"date\",\r\n    type: \"date\",\r\n    dateSetting: { locale: \"en-GB\" },\r\n  },\r\n\r\n  { title: \"Description\", field: \"description\" },\r\n  { title: \"Amount\", field: \"amount\", type: \"currency\" },\r\n  { title: \"Status\", field: \"status\" },\r\n];\r\n\r\nexport default function ExpenseTableView({ year, month }) {\r\n  const classes = useStyles();\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n  const [isAlertOpen, setIsAlertOpen] = useState(false);\r\n  const [totals, setTotals] = useState(0)\r\n  const [isCalc, setIsCalc] = useState(false);\r\n  const { loadEmployees } = useEmployeesContext();\r\n  const { expensesstatus, setExpStatusId } = useExpensesStatus();\r\n  const { expensesperiod, setExpPeriodYrId, setExpPeriodMthId } =\r\n    useExpensesPeriod();\r\n\r\n  useEffect(() => {\r\n    setExpPeriodYrId(year);\r\n    setExpPeriodMthId(month);\r\n    setIsCalc(true)\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (expensesperiod) {\r\n      Calc_Totals()\r\n      setIsCalc(false)\r\n    }\r\n  },[isCalc])\r\n\r\n\r\n  const Calc_Totals = () => {\r\n    const amount = expensesperiod.reduce((acc, r) => {\r\n      if (r.status === \"Approved\" || r.status === \"Approve\") {\r\n        return acc + r.amount;\r\n      } else {\r\n        return acc;\r\n      }\r\n    }, 0);\r\n    setTotals(amount)\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      {/* <h1>Expenses Claims Application</h1> */}\r\n     \r\n      <div style={{ maxWidth: \"100%\", paddingTop: \"5px\" }}>\r\n        <MaterialTable\r\n          columns={columns}\r\n          data={expensesperiod}\r\n          title=\"Leave Application\"\r\n          options={{\r\n            filtering: false,\r\n            search: false,\r\n            toolbar: false,\r\n            headerStyle: {\r\n              backgroundColor: \"rgba(75, 192, 192, 1)\",\r\n              color: \"white\",\r\n            },\r\n            showTitle: false,\r\n          }}\r\n        />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: 0,\r\n  },\r\n}));\r\n"]},"metadata":{},"sourceType":"module"}
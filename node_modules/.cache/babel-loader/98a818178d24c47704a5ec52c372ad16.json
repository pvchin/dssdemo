{"ast":null,"code":"import _objectSpread from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _objectWithoutProperties from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _slicedToArray from\"D:/react-myprojects/hrms-airtable/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import{useHistory}from\"react-router-dom\";import MaterialTable,{MTableToolbar}from\"material-table\";import{makeStyles}from\"@material-ui/core/styles\";import{TextField,Icon,Button,MenuItem}from\"@material-ui/core\";import{Alert}from\"@material-ui/lab\";import{useCustomToast}from\"../helpers/useCustomToast\";import{useSetRecoilState,useRecoilValue,useRecoilState}from\"recoil\";import{allowsPeriodState,allowsDataState,allowsDataDetlsState,allowsDataIdState,empidState,loginLevelState}from\"./data/atomdata\";import{AlertDialogBox}from\"../helpers/AlertDialogBox\";import AddIcon from\"@material-ui/icons/Add\";import EditIcon from\"@material-ui/icons/Edit\";import DeleteIcon from\"@material-ui/icons/Delete\";import CheckIcon from\"@material-ui/icons/Check\";import SearchIcon from\"@material-ui/icons/Search\";import{CustomDialog}from\"../helpers/CustomDialog\";import{useDailyAllowancesContext}from\"../context/dailyallowances_context\";import DailyAllowancesAddPeriod from\"./DailyAllowancesAddPeriod\";import DailyAllowsDetlsTableStaff from\"./DailyAllowsDetlsTableStaff\";import{useDailyAllows}from\"./dailyallows/useDailyAllows\";import{useAddDailyAllows}from\"./dailyallows/useAddDailyAllows\";import{useUpdateDailyAllows}from\"./dailyallows/useUpdateDailyAllows\";import{useDeleteDailyAllows}from\"./dailyallows/useDeleteDailyAllows\";import{useDeleteDailyAllowsDetls}from\"./dailyallowsdetls/useDeleteDailyAllowsDetls\";import{useDailyAllowsDetls}from\"./dailyallowsdetls/useDailyAllowsDetls\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function DailyAllowancesTableStaff(){var history=useHistory();var classes=useStyles();var toast=useCustomToast();var _useDailyAllows=useDailyAllows(),dailyallows=_useDailyAllows.dailyallows,dailyAllowsId=_useDailyAllows.dailyAllowsId,setDailyAllowsId=_useDailyAllows.setDailyAllowsId;var _useDailyAllowsDetls=useDailyAllowsDetls(),dailyallowsdetls=_useDailyAllowsDetls.dailyallowsdetls,setDailyAllowsDetlsId=_useDailyAllowsDetls.setDailyAllowsDetlsId,setDailyAllowsDetlsFilter=_useDailyAllowsDetls.setDailyAllowsDetlsFilter;var addDailyAllows=useAddDailyAllows();var updateDailyAllows=useUpdateDailyAllows();var deleteDailyAllows=useDeleteDailyAllows();var deleteDailyAllowsDetls=useDeleteDailyAllowsDetls();var _useRecoilState=useRecoilState(loginLevelState),_useRecoilState2=_slicedToArray(_useRecoilState,2),loginLevel=_useRecoilState2[0],setLoginLevel=_useRecoilState2[1];var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isAddPeriodDialogOpen=_useState2[0],setIsAddPeriodDialogOpen=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),tmpallowsdata=_useState4[0],setTmpallowsdata=_useState4[1];var _useRecoilState3=useRecoilState(allowsDataState),_useRecoilState4=_slicedToArray(_useRecoilState3,2),allowsdata=_useRecoilState4[0],setAllowsdata=_useRecoilState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isAlertOpen=_useState6[0],setIsAlertOpen=_useState6[1];var _useRecoilState5=useRecoilState(allowsDataDetlsState),_useRecoilState6=_slicedToArray(_useRecoilState5,2),allowsDetlsdata=_useRecoilState6[0],setAllowsDetlsdata=_useRecoilState6[1];var _useRecoilState7=useRecoilState(allowsPeriodState),_useRecoilState8=_slicedToArray(_useRecoilState7,2),allows_period=_useRecoilState8[0],setAllows_period=_useRecoilState8[1];var _useRecoilState9=useRecoilState(empidState),_useRecoilState10=_slicedToArray(_useRecoilState9,2),allows_empid=_useRecoilState10[0],setAllows_empid=_useRecoilState10[1];var _useState7=useState(allowsDataIdState),_useState8=_slicedToArray(_useState7,2),allowsdataId=_useState8[0],setAllowsdataId=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),toLoad=_useState10[0],settoLoad=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),error=_useState12[0],setError=_useState12[1];var _useState13=useState({id:\"\",period:\"\",empid:\"\"}),_useState14=_slicedToArray(_useState13,2),deletestate=_useState14[0],setDeletestate=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),isAllowsDetlDialogOpen=_useState16[0],setIsAllowsDetlDialogOpen=_useState16[1];var title=\"Site Allowances\";var _useDailyAllowancesCo=useDailyAllowancesContext(),loadEmpDailyAllowances=_useDailyAllowancesCo.loadEmpDailyAllowances,loadEmpDailyAllowsDetls=_useDailyAllowancesCo.loadEmpDailyAllowsDetls,dailyallowances_loading=_useDailyAllowancesCo.dailyallowances_loading,dailyallowances_error=_useDailyAllowancesCo.dailyallowances_error,updateDailyAllowance=_useDailyAllowancesCo.updateDailyAllowance,getSingleBatchDailyAllowsDetl=_useDailyAllowancesCo.getSingleBatchDailyAllowsDetl;useEffect(function(){setDailyAllowsId(loginLevel.loginUserId);},[dailyAllowsId]);// useEffect(() => {\n//   loadEmpDailyAllowances(loginLevel.loginUserId);\n// }, [toLoad]);\n// const myCustomSortingAlgorithm = {\n//   ascending: (a, b) => a.period.length - b.period.length,\n//   descending: (a, b) => b.period.length - a.period.length,\n// };\nvar columns=[{title:\"Name\",field:\"name\",editable:\"never\"},{title:\"Period\",field:\"period\",editable:\"never\"},{title:\"Location\",field:\"location\",editable:\"never\"},{title:\"Manager Name\",field:\"manager\",editable:\"never\"},{title:\"No Of Days\",field:\"no_of_days\",type:\"numeric\",editable:\"never\"},{title:\"Job Bonus\",field:\"totaljobbonus\",type:\"currency\",editable:\"never\"},{title:\"Per Diem\",field:\"totalperdiem\",type:\"currency\",editable:\"never\"},{title:\"Amount\",field:\"amount\",type:\"currency\",editable:\"never\"},{title:\"Status\",field:\"status\",editable:\"never\"}// {\n//   title: \"Status\",\n//   field: \"status\",\n//   editComponent: (props) => (\n//     <TextField\n//       //defaultValue={props.value || null}\n//       onChange={(e) => props.onChange(e.target.value)}\n//       style={{ width: 100 }}\n//       value={props.value}\n//       select\n//     >\n//       <MenuItem value=\"Pending\">Pending</MenuItem>\n//       {/* <MenuItem value=\"Approve\">Approve</MenuItem>\n//     <MenuItem value=\"Reject\">Reject</MenuItem>\n//     <MenuItem value=\"Cancel\">Cancel</MenuItem> */}\n//     </TextField>\n//   ),\n// },\n];var Save_DailyAllowancesData=function Save_DailyAllowancesData(){dailyallows.forEach(function(data){var id=data.id;if(id){var _id=data.id,rec_id=data.rec_id,tableData=data.tableData,fields=_objectWithoutProperties(data,[\"id\",\"rec_id\",\"tableData\"]);updateDailyAllowance(_objectSpread({id:_id},fields));}});//handleDialogClose();\n};var update_SiteAllowsDetl=function update_SiteAllowsDetl(data){var id=data.id,empid=data.empid,period=data.period,no_of_days=data.no_of_days,amount=data.amount,totaljobbonus=data.totaljobbonus,totalperdiem=data.totalperdiem;loadEmpDailyAllowsDetls(empid,period);setAllows_period(period);setAllows_empid(empid);setAllowsdataId(id);setAllows_period(period);setAllows_empid(empid);setAllowsdataId(id);setAllowsdata(_objectSpread(_objectSpread({},allowsdata),{},{id:id,no_of_days:no_of_days,totaljobbonus:totaljobbonus,totalperdiem:totalperdiem,amount:amount,period:period,empid:empid}));//setIsAllowsDetlDialogOpen(true);\nhistory.push(\"/singledailyallowsdetlstable\");};var delete_SiteAllows=function delete_SiteAllows(data){var id=data.id,period=data.period,empid=data.empid;setDeletestate({id:id,period:period,empid:empid});handleAlertOpen();};var handleAlertOpen=function handleAlertOpen(){setIsAlertOpen(true);};var handleAlertClose=function handleAlertClose(){setIsAlertOpen(false);};var handleOnDeleteConfirm=function handleOnDeleteConfirm(data){var id=deletestate.id,period=deletestate.period,empid=deletestate.empid;//delete allows detls\n//console.log(\"allowsdetls\", dailyallowsdetls);\ndailyallowsdetls.filter(function(f){return f.empid===empid;}).forEach(function(rec){if(rec.period===period&&rec.empid===empid){//console.log(\"del id\", rec.id);\ndeleteDailyAllowsDetls(rec.id);}});//delete daily allows\ndeleteDailyAllows(id);// toast({\n//   title: `Site Allowances has been successfully deleted!`,\n//   status: \"warning\",\n// });\n};var add_SiteAllowsPeriod=function add_SiteAllowsPeriod(){handleAddPeriodDialogOpen();};var handleAddPeriodDialogOpen=function handleAddPeriodDialogOpen(){setIsAddPeriodDialogOpen(true);};var handleAddPeriodDialogClose=function handleAddPeriodDialogClose(){setIsAddPeriodDialogOpen(false);};var handleAllowsDetlDialogOpen=function handleAllowsDetlDialogOpen(){setIsAllowsDetlDialogOpen(true);};var handleAllowsDetlDialogClose=function handleAllowsDetlDialogClose(){settoLoad(true);setIsAllowsDetlDialogOpen(false);};return/*#__PURE__*/_jsx(\"div\",{className:classes.root,children:/*#__PURE__*/_jsxs(\"div\",{style:{maxWidth:\"100%\",paddingTop:\"5px\"},children:[/*#__PURE__*/_jsx(MaterialTable,{columns:columns,data:dailyallows,title:title,icons:{Add:function Add(props){return/*#__PURE__*/_jsx(AddIcon,{});},Edit:function Edit(props){return/*#__PURE__*/_jsx(EditIcon,{});},Delete:function Delete(props){return/*#__PURE__*/_jsx(DeleteIcon,{});},Clear:function Clear(props){return/*#__PURE__*/_jsx(DeleteIcon,{});},Check:function Check(props){return/*#__PURE__*/_jsx(CheckIcon,{});},Search:function Search(props){return/*#__PURE__*/_jsx(SearchIcon,{});},ResetSearch:function ResetSearch(props){return/*#__PURE__*/_jsx(DeleteIcon,{});}}// editable={{\n//   onRowUpdate: (newData, oldData) =>\n//     new Promise((resolve, reject) => {\n//       setTimeout(() => {\n//         // const dataUpdate = [...dailyallowances];\n//         // const index = oldData.tableData.id;\n//         // dataUpdate[index] = newData;\n//         //setDailyAllowances([...dataUpdate]);\n//         //approve_Expense(newData);\n//         update_AllowsDetl();\n//         resolve();\n//       }, 1000);\n//     }),\n// }}\n,actions:[{icon:\"add\",tooltip:\"Add Record\",isFreeAction:true,onClick:function onClick(event,rowData){add_SiteAllowsPeriod();}},function(rowData){return{disabled:rowData.status===\"Approved\"||rowData.status===\"Submitted\",icon:\"edit\",tooltip:\"Edit Record\",onClick:function onClick(event,rowData){update_SiteAllowsDetl(rowData);}};},function(rowData){return{disabled:rowData.status===\"Approved\"||rowData.status===\"Submitted\",icon:\"delete\",tooltip:\"Delete Record\",onClick:function onClick(event,rowData){delete_SiteAllows(rowData);}};}],options:{filtering:true,sorting:true,headerStyle:{backgroundColor:\"orange\",color:\"#FFF\"},showTitle:true},components:{Toolbar:function Toolbar(props){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(MTableToolbar,_objectSpread({},props)),/*#__PURE__*/_jsx(\"div\",{style:{padding:\"5px 10px\"},children:error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",onClose:function onClose(){return setError(false);},children:\"Period already existed!\"})})]});}}}),/*#__PURE__*/_jsx(\"div\",{className:classes.dialog,children:/*#__PURE__*/_jsx(CustomDialog,{isOpen:isAddPeriodDialogOpen,handleClose:handleAddPeriodDialogClose,title:\"\",showButton:true,isFullscreen:false,isFullwidth:false,children:/*#__PURE__*/_jsx(DailyAllowancesAddPeriod,{handleDialogClose:handleAddPeriodDialogClose})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CustomDialog,{isOpen:isAllowsDetlDialogOpen,handleClose:handleAllowsDetlDialogClose,title:\"\",showButton:true,isFullscreen:false,isFullwidth:false,children:/*#__PURE__*/_jsx(DailyAllowsDetlsTableStaff,{allowsdata:allowsdata,allowsdataId:allowsdataId,handleDialogClose:handleAllowsDetlDialogClose})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(AlertDialogBox,{onClose:handleAlertClose,onConfirm:handleOnDeleteConfirm,isOpen:isAlertOpen,title:\"Delete Site Allowances Batch\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Are you sure you want to delete ?\"})})})]})});}var useStyles=makeStyles(function(theme){return{root:{padding:0},dialog:{width:1000}};});","map":{"version":3,"sources":["D:/react-myprojects/hrms-airtable/src/components/DailyAllowancesTableStaff.js"],"names":["React","useState","useEffect","useHistory","MaterialTable","MTableToolbar","makeStyles","TextField","Icon","Button","MenuItem","Alert","useCustomToast","useSetRecoilState","useRecoilValue","useRecoilState","allowsPeriodState","allowsDataState","allowsDataDetlsState","allowsDataIdState","empidState","loginLevelState","AlertDialogBox","AddIcon","EditIcon","DeleteIcon","CheckIcon","SearchIcon","CustomDialog","useDailyAllowancesContext","DailyAllowancesAddPeriod","DailyAllowsDetlsTableStaff","useDailyAllows","useAddDailyAllows","useUpdateDailyAllows","useDeleteDailyAllows","useDeleteDailyAllowsDetls","useDailyAllowsDetls","DailyAllowancesTableStaff","history","classes","useStyles","toast","dailyallows","dailyAllowsId","setDailyAllowsId","dailyallowsdetls","setDailyAllowsDetlsId","setDailyAllowsDetlsFilter","addDailyAllows","updateDailyAllows","deleteDailyAllows","deleteDailyAllowsDetls","loginLevel","setLoginLevel","isAddPeriodDialogOpen","setIsAddPeriodDialogOpen","tmpallowsdata","setTmpallowsdata","allowsdata","setAllowsdata","isAlertOpen","setIsAlertOpen","allowsDetlsdata","setAllowsDetlsdata","allows_period","setAllows_period","allows_empid","setAllows_empid","allowsdataId","setAllowsdataId","toLoad","settoLoad","error","setError","id","period","empid","deletestate","setDeletestate","isAllowsDetlDialogOpen","setIsAllowsDetlDialogOpen","title","loadEmpDailyAllowances","loadEmpDailyAllowsDetls","dailyallowances_loading","dailyallowances_error","updateDailyAllowance","getSingleBatchDailyAllowsDetl","loginUserId","columns","field","editable","type","Save_DailyAllowancesData","forEach","data","rec_id","tableData","fields","update_SiteAllowsDetl","no_of_days","amount","totaljobbonus","totalperdiem","push","delete_SiteAllows","handleAlertOpen","handleAlertClose","handleOnDeleteConfirm","filter","f","rec","add_SiteAllowsPeriod","handleAddPeriodDialogOpen","handleAddPeriodDialogClose","handleAllowsDetlDialogOpen","handleAllowsDetlDialogClose","root","maxWidth","paddingTop","Add","props","Edit","Delete","Clear","Check","Search","ResetSearch","icon","tooltip","isFreeAction","onClick","event","rowData","disabled","status","filtering","sorting","headerStyle","backgroundColor","color","showTitle","Toolbar","padding","dialog","theme","width"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport MaterialTable, { MTableToolbar } from \"material-table\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { TextField, Icon, Button, MenuItem } from \"@material-ui/core\";\r\nimport { Alert } from \"@material-ui/lab\";\r\nimport { useCustomToast } from \"../helpers/useCustomToast\";\r\nimport { useSetRecoilState, useRecoilValue, useRecoilState } from \"recoil\";\r\nimport {\r\n  allowsPeriodState,\r\n  allowsDataState,\r\n  allowsDataDetlsState,\r\n  allowsDataIdState,\r\n  empidState,\r\n  loginLevelState,\r\n} from \"./data/atomdata\";\r\nimport { AlertDialogBox } from \"../helpers/AlertDialogBox\";\r\nimport AddIcon from \"@material-ui/icons/Add\";\r\nimport EditIcon from \"@material-ui/icons/Edit\";\r\nimport DeleteIcon from \"@material-ui/icons/Delete\";\r\nimport CheckIcon from \"@material-ui/icons/Check\";\r\nimport SearchIcon from \"@material-ui/icons/Search\";\r\nimport { CustomDialog } from \"../helpers/CustomDialog\";\r\nimport { useDailyAllowancesContext } from \"../context/dailyallowances_context\";\r\nimport DailyAllowancesAddPeriod from \"./DailyAllowancesAddPeriod\";\r\nimport DailyAllowsDetlsTableStaff from \"./DailyAllowsDetlsTableStaff\";\r\nimport { useDailyAllows } from \"./dailyallows/useDailyAllows\";\r\nimport { useAddDailyAllows } from \"./dailyallows/useAddDailyAllows\";\r\nimport { useUpdateDailyAllows } from \"./dailyallows/useUpdateDailyAllows\";\r\nimport { useDeleteDailyAllows } from \"./dailyallows/useDeleteDailyAllows\";\r\nimport { useDeleteDailyAllowsDetls } from \"./dailyallowsdetls/useDeleteDailyAllowsDetls\";\r\nimport { useDailyAllowsDetls } from \"./dailyallowsdetls/useDailyAllowsDetls\";\r\n\r\nexport default function DailyAllowancesTableStaff() {\r\n  let history = useHistory();\r\n  const classes = useStyles();\r\n  const toast = useCustomToast();\r\n  const { dailyallows, dailyAllowsId, setDailyAllowsId } = useDailyAllows();\r\n  const { dailyallowsdetls, setDailyAllowsDetlsId, setDailyAllowsDetlsFilter } =\r\n    useDailyAllowsDetls();\r\n  const addDailyAllows = useAddDailyAllows();\r\n  const updateDailyAllows = useUpdateDailyAllows();\r\n  const deleteDailyAllows = useDeleteDailyAllows();\r\n  const deleteDailyAllowsDetls = useDeleteDailyAllowsDetls();\r\n  const [loginLevel, setLoginLevel] = useRecoilState(loginLevelState);\r\n  const [isAddPeriodDialogOpen, setIsAddPeriodDialogOpen] = useState(false);\r\n  const [tmpallowsdata, setTmpallowsdata] = useState([]);\r\n  const [allowsdata, setAllowsdata] = useRecoilState(allowsDataState);\r\n  const [isAlertOpen, setIsAlertOpen] = useState(false);\r\n  const [allowsDetlsdata, setAllowsDetlsdata] =\r\n    useRecoilState(allowsDataDetlsState);\r\n  const [allows_period, setAllows_period] = useRecoilState(allowsPeriodState);\r\n  const [allows_empid, setAllows_empid] = useRecoilState(empidState);\r\n  const [allowsdataId, setAllowsdataId] = useState(allowsDataIdState);\r\n  const [toLoad, settoLoad] = useState(true);\r\n  const [error, setError] = useState(\"\");\r\n  const [deletestate, setDeletestate] = useState({\r\n    id: \"\",\r\n    period: \"\",\r\n    empid: \"\",\r\n  });\r\n  const [isAllowsDetlDialogOpen, setIsAllowsDetlDialogOpen] = useState(false);\r\n  const title = `Site Allowances`;\r\n  const {\r\n    loadEmpDailyAllowances,\r\n    loadEmpDailyAllowsDetls,\r\n    dailyallowances_loading,\r\n    dailyallowances_error,\r\n    updateDailyAllowance,\r\n    getSingleBatchDailyAllowsDetl,\r\n  } = useDailyAllowancesContext();\r\n\r\n  useEffect(() => {\r\n    setDailyAllowsId(loginLevel.loginUserId);\r\n  }, [dailyAllowsId]);\r\n\r\n  // useEffect(() => {\r\n  //   loadEmpDailyAllowances(loginLevel.loginUserId);\r\n  // }, [toLoad]);\r\n\r\n  // const myCustomSortingAlgorithm = {\r\n  //   ascending: (a, b) => a.period.length - b.period.length,\r\n  //   descending: (a, b) => b.period.length - a.period.length,\r\n  // };\r\n\r\n  const columns = [\r\n    {\r\n      title: \"Name\",\r\n      field: \"name\",\r\n      editable: \"never\",\r\n    },\r\n    {\r\n      title: \"Period\",\r\n      field: \"period\",\r\n      editable: \"never\",\r\n    },\r\n    { title: \"Location\", field: \"location\", editable: \"never\" },\r\n    { title: \"Manager Name\", field: \"manager\", editable: \"never\" },\r\n    {\r\n      title: \"No Of Days\",\r\n      field: \"no_of_days\",\r\n      type: \"numeric\",\r\n      editable: \"never\",\r\n    },\r\n    {\r\n      title: \"Job Bonus\",\r\n      field: \"totaljobbonus\",\r\n      type: \"currency\",\r\n      editable: \"never\",\r\n    },\r\n    {\r\n      title: \"Per Diem\",\r\n      field: \"totalperdiem\",\r\n      type: \"currency\",\r\n      editable: \"never\",\r\n    },\r\n    { title: \"Amount\", field: \"amount\", type: \"currency\", editable: \"never\" },\r\n    { title: \"Status\", field: \"status\", editable: \"never\" },\r\n    // {\r\n    //   title: \"Status\",\r\n    //   field: \"status\",\r\n    //   editComponent: (props) => (\r\n    //     <TextField\r\n    //       //defaultValue={props.value || null}\r\n    //       onChange={(e) => props.onChange(e.target.value)}\r\n    //       style={{ width: 100 }}\r\n    //       value={props.value}\r\n    //       select\r\n    //     >\r\n    //       <MenuItem value=\"Pending\">Pending</MenuItem>\r\n    //       {/* <MenuItem value=\"Approve\">Approve</MenuItem>\r\n    //     <MenuItem value=\"Reject\">Reject</MenuItem>\r\n    //     <MenuItem value=\"Cancel\">Cancel</MenuItem> */}\r\n    //     </TextField>\r\n    //   ),\r\n    // },\r\n  ];\r\n\r\n  const Save_DailyAllowancesData = () => {\r\n    dailyallows.forEach((data) => {\r\n      const { id } = data;\r\n      if (id) {\r\n        const { id, rec_id, tableData, ...fields } = data;\r\n        updateDailyAllowance({ id, ...fields });\r\n      }\r\n    });\r\n    //handleDialogClose();\r\n  };\r\n\r\n  const update_SiteAllowsDetl = (data) => {\r\n    const {\r\n      id,\r\n      empid,\r\n      period,\r\n      no_of_days,\r\n      amount,\r\n      totaljobbonus,\r\n      totalperdiem,\r\n    } = data;\r\n\r\n    loadEmpDailyAllowsDetls(empid, period);\r\n\r\n    setAllows_period(period);\r\n    setAllows_empid(empid);\r\n    setAllowsdataId(id);\r\n    setAllows_period(period);\r\n    setAllows_empid(empid);\r\n    setAllowsdataId(id);\r\n    setAllowsdata({\r\n      ...allowsdata,\r\n      id: id,\r\n      no_of_days: no_of_days,\r\n      totaljobbonus: totaljobbonus,\r\n      totalperdiem: totalperdiem,\r\n      amount: amount,\r\n      period: period,\r\n      empid: empid,\r\n    });\r\n\r\n    //setIsAllowsDetlDialogOpen(true);\r\n    history.push(\"/singledailyallowsdetlstable\");\r\n  };\r\n\r\n  const delete_SiteAllows = (data) => {\r\n    const { id, period, empid } = data;\r\n    setDeletestate({ id: id, period: period, empid: empid });\r\n    handleAlertOpen();\r\n  };\r\n\r\n  const handleAlertOpen = () => {\r\n    setIsAlertOpen(true);\r\n  };\r\n\r\n  const handleAlertClose = () => {\r\n    setIsAlertOpen(false);\r\n  };\r\n\r\n  const handleOnDeleteConfirm = (data) => {\r\n    const { id, period, empid } = deletestate;\r\n\r\n    //delete allows detls\r\n    //console.log(\"allowsdetls\", dailyallowsdetls);\r\n    dailyallowsdetls\r\n      .filter((f) => f.empid === empid)\r\n      .forEach((rec) => {\r\n        if (rec.period === period && rec.empid === empid) {\r\n          //console.log(\"del id\", rec.id);\r\n          deleteDailyAllowsDetls(rec.id);\r\n        }\r\n      });\r\n    //delete daily allows\r\n    deleteDailyAllows(id);\r\n    // toast({\r\n    //   title: `Site Allowances has been successfully deleted!`,\r\n    //   status: \"warning\",\r\n    // });\r\n  };\r\n\r\n  const add_SiteAllowsPeriod = () => {\r\n    handleAddPeriodDialogOpen();\r\n  };\r\n\r\n  const handleAddPeriodDialogOpen = () => {\r\n    setIsAddPeriodDialogOpen(true);\r\n  };\r\n\r\n  const handleAddPeriodDialogClose = () => {\r\n    setIsAddPeriodDialogOpen(false);\r\n  };\r\n\r\n  const handleAllowsDetlDialogOpen = () => {\r\n    setIsAllowsDetlDialogOpen(true);\r\n  };\r\n\r\n  const handleAllowsDetlDialogClose = () => {\r\n    settoLoad(true);\r\n    setIsAllowsDetlDialogOpen(false);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.root}>\r\n      <div style={{ maxWidth: \"100%\", paddingTop: \"5px\" }}>\r\n        <MaterialTable\r\n          columns={columns}\r\n          data={dailyallows}\r\n          title={title}\r\n          icons={{\r\n            Add: (props) => <AddIcon />,\r\n            Edit: (props) => <EditIcon />,\r\n            Delete: (props) => <DeleteIcon />,\r\n            Clear: (props) => <DeleteIcon />,\r\n            Check: (props) => <CheckIcon />,\r\n            Search: (props) => <SearchIcon />,\r\n            ResetSearch: (props) => <DeleteIcon />,\r\n          }}\r\n          // editable={{\r\n          //   onRowUpdate: (newData, oldData) =>\r\n          //     new Promise((resolve, reject) => {\r\n          //       setTimeout(() => {\r\n          //         // const dataUpdate = [...dailyallowances];\r\n          //         // const index = oldData.tableData.id;\r\n          //         // dataUpdate[index] = newData;\r\n          //         //setDailyAllowances([...dataUpdate]);\r\n          //         //approve_Expense(newData);\r\n          //         update_AllowsDetl();\r\n          //         resolve();\r\n          //       }, 1000);\r\n          //     }),\r\n          // }}\r\n          actions={[\r\n            {\r\n              icon: \"add\",\r\n              tooltip: \"Add Record\",\r\n              isFreeAction: true,\r\n              onClick: (event, rowData) => {\r\n                add_SiteAllowsPeriod();\r\n              },\r\n            },\r\n            (rowData) => ({\r\n              disabled:\r\n                rowData.status === \"Approved\" || rowData.status === \"Submitted\",\r\n              icon: \"edit\",\r\n              tooltip: \"Edit Record\",\r\n              onClick: (event, rowData) => {\r\n                update_SiteAllowsDetl(rowData);\r\n              },\r\n            }),\r\n            (rowData) => ({\r\n              disabled: rowData.status === \"Approved\" || rowData.status === \"Submitted\",\r\n              icon: \"delete\",\r\n              tooltip: \"Delete Record\",\r\n              onClick: (event, rowData) => {\r\n                delete_SiteAllows(rowData);\r\n              },\r\n            }),\r\n          ]}\r\n          options={{\r\n            filtering: true,\r\n            sorting: true,\r\n            headerStyle: {\r\n              backgroundColor: \"orange\",\r\n              color: \"#FFF\",\r\n            },\r\n            showTitle: true,\r\n          }}\r\n          components={{\r\n            Toolbar: (props) => (\r\n              <div>\r\n                <MTableToolbar {...props} />\r\n\r\n                <div style={{ padding: \"5px 10px\" }}>\r\n                  {error && (\r\n                    <Alert severity=\"error\" onClose={() => setError(false)}>\r\n                      Period already existed!\r\n                    </Alert>\r\n                  )}\r\n                </div>\r\n              </div>\r\n            ),\r\n          }}\r\n        />\r\n        <div className={classes.dialog}>\r\n          <CustomDialog\r\n            isOpen={isAddPeriodDialogOpen}\r\n            handleClose={handleAddPeriodDialogClose}\r\n            title=\"\"\r\n            showButton={true}\r\n            isFullscreen={false}\r\n            isFullwidth={false}\r\n          >\r\n            <DailyAllowancesAddPeriod\r\n              handleDialogClose={handleAddPeriodDialogClose}\r\n            />\r\n          </CustomDialog>\r\n        </div>\r\n        <div>\r\n          <CustomDialog\r\n            isOpen={isAllowsDetlDialogOpen}\r\n            handleClose={handleAllowsDetlDialogClose}\r\n            title=\"\"\r\n            showButton={true}\r\n            isFullscreen={false}\r\n            isFullwidth={false}\r\n          >\r\n            <DailyAllowsDetlsTableStaff\r\n              allowsdata={allowsdata}\r\n              allowsdataId={allowsdataId}\r\n              handleDialogClose={handleAllowsDetlDialogClose}\r\n            />\r\n          </CustomDialog>\r\n        </div>\r\n        <div>\r\n          <AlertDialogBox\r\n            onClose={handleAlertClose}\r\n            onConfirm={handleOnDeleteConfirm}\r\n            isOpen={isAlertOpen}\r\n            title=\"Delete Site Allowances Batch\"\r\n          >\r\n            <h2>Are you sure you want to delete ?</h2>\r\n          </AlertDialogBox>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    padding: 0,\r\n  },\r\n  dialog: {\r\n    width: 1000,\r\n  },\r\n}));\r\n"]},"metadata":{},"sourceType":"module"}